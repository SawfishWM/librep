2001-10-28  John Harper  <jsh@unfactored.org>

	* version 0.15.2

2001-10-19  John Harper  <jsh@unfactored.org>

	* rep/util/repl.jl: renamed ,dis as ,disassemble (since the
	unique prefix thing will accept ,dis anyway)

2001-10-11  John Harper  <jsh@unfactored.org>

	* rep/lang/interpreter.jl (default-error-handler): catch and
	ignore errors that happen in the error handler (to avoid a
	possible infinite loop..)

2001-10-01  John Harper  <jsh@unfactored.org>

	* version 0.15

2001-09-15  John Harper  <jsh@unfactored.org>

	* rep/www/cgi-get.jl (self-test): new function. Some test cases

	* rep/www/quote-url.jl (quote-url, unquote-url): defined in
	terms of string-replace now
	(self-test): new function. A few test cases for this module

	* rep/regexp.jl (string-replace): the TEMPLATE parameter may
	now be a function, e.g. (string-replace "[ab]" (lambda (s) (1+
	(aref s (match-start)))) "foobar") -> "foocbr"

2001-09-02  John Harper  <jsh@pixelslut.com>

	* rep/io/file-handlers/tilde.jl (tilde-file-handler): fixed
	last change to this file so that it actually does expand the
	stuff after the tilde sometimes!

	* rep/vm/compiler/rep.jl (compile-log): new function, handles
	the new `log' function (which optionally has a BASE parameter).
	Compiles this into two calls to log and a divide

	* rep/util/repl.jl: fixed ,reload and ,unload commands not to
	try to unload structures that don't actually exist

2001-08-31  John Harper  <jsh@pixelslut.com>

	* rep/test/framework.jl (run-all-self-tests,
	run-module-self-tests): these both return the number of failed
	tests now

2001-08-27  John Harper  <jsh@pixelslut.com>

	* rep/util/repl.jl: meta commands may now be specified using
	unique prefixes, instead of their whole name

2001-08-24  John Harper  <jsh@pixelslut.com>

	* rep/io/file-handlers/tilde.jl (tilde-file-handler): in
	expand-file-name handler, only try to expand non-null things
	after the tilde

2001-08-16  John Harper  <jsh@pixelslut.com>

	* rep/vm/compiler/rep.jl (compile-set): raise an error if
	trying to set value of a non-symbol

2001-08-13  John Harper  <jsh@pixelslut.com>

	* rep/vm/compiler/rep.jl (compile-letrec): when compiling the
	lambda for the second time, turn off all output (to avoid
	repeating error messages)

	* rep/vm/compiler/utils.jl (silence-compiler): new fluid
	variable
	(compiler-message): only print messages if silence-compiler is
	false

	* rep/threads/message-port.jl (message-fetch): rewrote wait
	loop so it always tries once after condition-wait failed

	* rep/lang/debugger.jl (print-backtrace): print backtrace in
	top to bottom order, not bottom to top

2001-08-10  John Harper  <jsh@pixelslut.com>

	* rep/threads/message-port.jl (message-send): remembered to
	actually signal the condition after enqueuing the message!

2001-08-09  John Harper  <jsh@pixelslut.com>

	* rep/threads/message-port.jl: new module, implements a simple
	message queue for threads using mutexes and condition variables

	* rep/net/rpc.jl: one minor bug fix

2001-08-08  John Harper  <jsh@pixelslut.com>

	* rep/user.jl, rep/lang/debugger.jl: renamed --rep-debug as
	--debug and --rep-emacs-debugger as --emacs-debug

2001-08-07  John Harper  <jsh@pixelslut.com>

	* rep/lang/define.jl (define-scan-body): only return new list
	structure if it's different to the original. This prevents line
	number information being discarded needlessly

	* rep/lang/debugger.jl: much improved. Supports line numbers
	(with emacs style embedded cookies), better backtraces, etc..

	* rep/user.jl: support --rep-debug option -- launches into the
	debugger

	* rep/data/ring.jl, rep/data/queues.jl: 
	* rep/io/file-handlers/remote/rep.jl,
	rep/io/file-handlers/remote/ftp.jl: 
	* rep/lang/interpreter.jl: 
	* rep/threads/condition-variable.jl: 
	* rep/util/repl.jl:
	* scheme/misc.jl, scheme/data.jl: 
	* unscheme/misc.jl, unscheme/data.jl:

	Declarations to silence compiler warnings about unused
	parameters

	* rep/vm/compiler.jl: 
	* rep/vm/compiler/utils.jl, rep/vm/compiler/scheme.jl,
	rep/vm/compiler/rep.jl, rep/vm/compiler/modules.jl,
	rep/vm/compiler/inline.jl, rep/vm/compiler/bindings.jl,
	rep/vm/compiler/basic.jl: 

	Better error reporting, including (gasp) line numbers

2001-08-02  John Harper  <jsh@pixelslut.com>

	* rep/threads/condition-variable.jl (condition-variable-wait):
	new optional TIMEOUT parameter. The function returns false if
	the timeout expires. Note that even if this is the case the
	function will still re-obtain the mutex before exiting. Also,
	release the mutex and suspend the thread atomically

	* rep/threads/mutex.jl (obtain-mutex): new optional TIMEOUT
	parameter. The function returns false if the timeout expired
	and the mutex couldn't be obtained, true otherwise

2001-08-01  John Harper  <jsh@pixelslut.com>

	* rep/vm/compiler/modules.jl (symbol-value-1): return false for
	variables with local bindings

	(compiler-macroexpand-1): ignore macro calls whose name has a
	local bindings

	* rep/util/repl.jl (repl-iterate): ignore empty lines

2001-07-31  John Harper  <jsh@pixelslut.com>

	* rep/data/objects.jl (object): reverted last change (factoring
	out lambda expressions). It moves them out of the scope of the
	`self' parameter, which is a bad thing

2001-07-30  John Harper  <jsh@pixelslut.com>

	* rep/data/objects.jl: move method bodies that are lambda
	expressions into a let block outside the object's lambda in the
	expansion, then reference their new names. This avoids consing
	a new closure each time a method is called

2001-07-28  John Harper  <jsh@pixelslut.com>

	* rep/io/file-handlers/tilde.jl: fixed the logic for
	substituting ~ for the user's home directory at initialization

	* rep/lang/error-helper.jl (for-each-structure): ignore null
	structures (possible if called while creating a structure?)

2001-07-26  John Harper  <jsh@pixelslut.com>

	* rep/util/repl.jl: don't print results that are #undefined

	* rep/lang/interpreter.jl, rep/util/gaol.jl (define-value):
	finally deleted

	* rep/lang/interpreter.jl: export a self-referential binding of
	#undefined

	* rep/lang/error-helper.jl: new module -- given an error, try
	to deduce what could have caused, and how the user can avoid it
	in future. Currently only handles some void-value errors

	* rep/lang/interpreter.jl (default-error-handler): call the
	error-helper function

	* rep/data/objects.jl: objects now have an implicit `self'
	binding -- the object representing themself (or their derived
	self). Also fixed a bug where the BASE-OBJECT parameter could
	be evaluated zero or multiple times, instead of just once

2001-07-22  John Harper  <jsh@pixelslut.com>

	* rep/util/repl.jl: use the standard error handler, instead of
	a cut-and-pasted version

2001-07-17  John Harper  <jsh@pixelslut.com>

	* rep/lang/interpreter.jl (letrec): allow right-hand-sides of
	letrec bindings to have more than one form

	* rep/io/file-handlers/remote/rep.jl
	(remote-rep-output-filter): don't print annoying messages about
	unhandled input

2001-07-15  John Harper  <jsh@pixelslut.com>

	* rep/user.jl: catch errors signalled during command line
	option processing, pass them to the default error handler and
	quit. This avoids the horrible `error -> (void-value foo)'
	style error messages

2001-07-02  John Harper  <jsh@pixelslut.com>

	* version 0.14

2001-06-29  John Harper  <jsh@pixelslut.com>

	* rep/net/rpc.jl: added some (disabled) debugging code

	* rep/net/rpc.jl: minor changes

2001-06-28  John Harper  <jsh@pixelslut.com>

	* rep/net/rpc.jl (async-rpc-call, make-proxy,
	rpc-output-handler): support async (`one way') rpc requests

	* rep/data.jl (vector->list, list->vector): new functions

	* rep/net/rpc.jl (make-proxy): precalculate global-id value

2001-06-27  John Harper  <jsh@pixelslut.com>

	* rep/net/rpc.jl: added some comments, some API changes

2001-06-26  John Harper  <jsh@pixelslut.com>

	* rep/net/rpc.jl (call-with-rpc-servant): new function

	* rep/net/rpc.jl: misc changes. Added support for global
	servant ids (prefixed with ip address and port number)

	* rep/net/rpc.jl: new module -- simple Lisp syntax based RPC
	mechanism over TCP streams

2001-06-14  John Harper  <jsh@pixelslut.com>

	* rep/vm/compiler/rep.jl (compile-cond): disabled dead-code
	warnings after constant conditions, they're too annoying to be
	useful

2001-05-04  John Harper  <jsh@eazel.com>

	* rep/vm/compiler/rep.jl (trans-defvar): fixed typo in the last
	change (using , in a non-backquote form)

2001-05-01  John Harper  <jsh@eazel.com>

	* rep/vm/compiler/rep.jl (trans-defvar): if the defvar has a
	constant doc string, add it to the documentation database

2001-04-30  John Harper  <jsh@eazel.com>

	* rep/lang/interpreter.jl (define-special-variable): new macro,
	a combination of defvar and setq. It always declares the
	variable special and it always sets the value

2001-03-26  John Harper  <jsh@eazel.com>

	Work to make rep self-testing. The framework and some tests
	exist, but I still need to add unit tests for many modules:

	* rep/test/framework.jl: self-testing framework. Provides
	`assert', 'check' and `test' macros, as well as random other
	stuff for supporting these. 

	* rep/test/data.jl: tests for rep.data module

	* rep/data/queues.jl: added self tests

	* rep/user.jl: added --check option
	* rep/util/repl.jl: added a `,check' command
	* Makefile.in: added a `check' target

	* rep/io/file-handlers/remote/rep.jl (remote-rep-while): use
	accept-process-output-1 instead of accept-process-output
	(remote-rep-output-filter): ignore blank lines

2001-03-22  John Harper  <jsh@eazel.com>

	* version 0.13.5

2001-03-21  John Harper  <jsh@eazel.com>

	* rep/io/file-handlers/tar.jl (tarfh-call-tar): only call
	tarfh-check-tar-program if the given tar file actually exists

2001-03-12  John Harper  <jsh@eazel.com>

	* rep/io/file-handlers/tar.jl
	(tarfh-alternative-gnu-tar-programs): added `gnutar' and the
	GNU tar emulation script to this list

	(tarfh-list-regexp): hacked this to also recognize the date
	format used by Solaris tar

2001-02-13  John Harper  <jsh@eazel.com>

	* rep.jl (debug-entry, debug-exit, debug-error-entry): declare
	using defvar

2001-02-12  John Harper  <jsh@eazel.com>

	* rep/data/string-util.jl (string-upper-case-p,
	string-lower-case-p): only return t if the string contains at
	least one upper/lower case character

2001-01-27  John Harper  <jsh@eazel.com>

	* rep/i18n/xgettext.jl (scan): fixed typo when scanning
	`lambda' forms (was scanning the car (!?) instead of the cddr)

2001-01-14  John Harper  <jsh@eazel.com>

	* rep/util/gaol.jl (gaol-safe-functions): added listp

2001-01-08  John Harper  <jsh@eazel.com>

	* rep/util/repl.jl (repl-iterate): change the error handler
	reading normal forms to catch premature-end-of-stream, not
	end-of-stream

2001-01-04  John Harper  <jsh@eazel.com>

	* version 0.13.4

2000-12-29  John Harper  <jsh@eazel.com>

	* rep/threads/condition-variable.jl: new file, implemented
	the usual condition variable interface (but not quite strong
	enough for SRFI-18 compatibility, condition-variable-wait would
	need a TIMEOUT parameter)

2000-12-20  John Harper  <jsh@eazel.com>

	* rep/util/gaol.jl (gaol-safe-functions): added string-split
	and string-replace

2000-12-03  John Harper  <jsh@eazel.com>

	* version 0.13.3

2000-11-27  John Harper  <jsh@eazel.com>

	* scheme/data.jl: when defining `>' and similar predicates, use
	`rep#FOO' to get the rep versions, instead of just relying on
	the fact that their local bindings haven't been created yet

2000-11-26  John Harper  <jsh@eazel.com>

	* rep/lang/define.jl (define-scan-form): don't expand (i.e.
	delete) declaration forms

2000-11-21  John Harper  <jsh@eazel.com>

	* rep/vm/peephole.jl (peephole-optimizer): added transformation
	`{jpt,jpn,jtp,jnp} X; jmp Y; X: --> {jnp,jtp,jpn.jpt} Y; X:',
	can help some `do' loops e.g.

2000-11-12  John Harper  <jsh@eazel.com>

	* rep/util/repl.jl (completion-generator): pass this function
	as an argument to `readline' (i.e. don't call it
	rl-completion-generator)

2000-10-23  John Harper  <jsh@eazel.com>

	* version 0.13.2

2000-10-18  John Harper  <john@dcs.warwick.ac.uk>

	* Makefile.in: patch from Scott Heavner <sdh@po.cwru.edu> to
	fix `install' shell scripting

2000-09-29  John Harper  <john@dcs.warwick.ac.uk>

	* rep/lang/define.jl: track bound variables, then don't expand
	calls to these special forms or macros

2000-09-28  John Harper  <john@dcs.warwick.ac.uk>

	* version 0.13.1

2000-09-27  John Harper  <john@dcs.warwick.ac.uk>

	* rep/io/file-handlers/remote/ftp.jl (remote-ftp-get-file):
	work around bug in `ls .' with my (wu) ftpd

	* rep/system/pwd-prompt.jl: import rep.io.streams and
	rep.lang.math

2000-09-26  John Harper  <john@dcs.warwick.ac.uk>

	* rep/lang/define.jl (define-scan-form): don't expand structure
	or define-structure forms (any internal definitions they
	contain should be treated as top-level within the structure)

2000-09-24  John Harper  <john@dcs.warwick.ac.uk>

	* rep/data.jl (remove-if, remove-if-not): new functions

2000-09-22  John Harper  <john@dcs.warwick.ac.uk>

	* rep/vm/compiler/modules.jl (note-require): try to fix this
	slightly in the presence of unmodularized files

2000-09-20  John Harper  <john@dcs.warwick.ac.uk>

	* version 0.13

2000-09-19  John Harper  <john@dcs.warwick.ac.uk>

	* rep/net/domain-name.jl: new file, some domain name functions
	(from TITAN)

	* rep/regexp.jl (string-split): new function

	* rep.jl, rep/user.jl, rep/io/files.jl,
	rep/vm/compiler/modules.jl: *root-structure* is now replaced by
	*user-structure*

2000-09-18  John Harper  <john@dcs.warwick.ac.uk>

	* rep/vm/compiler/modules.jl (current-module): this now
	defaults to *user-structure* not *root-structure*

2000-09-17  John Harper  <john@dcs.warwick.ac.uk>

	* rep/lang/doc.jl (describe-value): replaced `Built-in' by
	`Native' to describe subrs

	* rep/util/repl.jl (,describe): pass structure name to
	describe-value

	* rep/lang/interpreter.jl (nil, t, defmacro): use third arg of
	%define to specify documentation of these bindings

	* rep/lang/doc.jl (describe-value): include special-variable
	and immutable-binding information in the type description.
	Don't surround the name in parentheses unless we have details
	of the parameter list

	(documentation): don't use boundp/symbol-value to look for
	in-core documentation

2000-09-14  John Harper  <john@dcs.warwick.ac.uk>

	* rep/util/repl.jl (locate-binding*): only check the current
	module for a binding when one isn't imported, not the other way
	around

2000-09-12  John Harper  <john@dcs.warwick.ac.uk>

	* rep/vm/compiler/rep.jl: after lifting top-level progn forms,
	add progns to coalesce forms that wouldn't be compiled
	specially at top-level. Each progn then forms a single byte
	code form

2000-09-11  John Harper  <john@dcs.warwick.ac.uk>

	* Makefile.in: invoke compile-assembler before compile-compiler

	* rep/vm/compiler.jl (compile-assembler): new function

	* rep/vm/peephole.jl: rep.vm.compiler.opt moved here since it
	may be useful outside the compiler

	* rep/vm/compiler/opt.jl: remove dependences on other compiler
	modules

	* rep/util/repl.jl (locate-binding*): check the current module
	before looking in the imports

	* rep/lang/define.jl: groks doc strings in `(define SYMBOL
	VALUE DOC)' forms. Will move them to the body of defuns, or
	else leave them in the %define form

	* rep/vm/compiler/rep.jl (do-pass-2): extract doc strings from
	%define forms

2000-09-10  John Harper  <john@dcs.warwick.ac.uk>

	* rep.jl: `rep.io.streams' is exported from `rep' again. I've
	decided it's too fundamental not to. Changed all the modules
	that imported it explicitly

2000-09-09  John Harper  <john@dcs.warwick.ac.uk>

	* rep/vm/compiler/modules.jl: when compiling module definition
	forms, after compiling the top-level forms, ensure that the
	resulting lambda expression is compiled in the correct module
	environment

2000-09-08  John Harper  <john@dcs.warwick.ac.uk>

	* rep.jl: don't export rep.repexp, rep.system, rep.io.streams,
	rep.io.files, rep.io.processes, rep.io.file-handlers. If
	they're needed, they'll need to be imported explicitly

	The rationale is that `(open rep)' should just specify the
	language, and not unrelated random parts of the runtime
	environment. Also, I can imagine systems where some of these
	modules (e.g. rep.io.processes) aren't available

	* rep/vm/compiler/utils.jl (test-variable-ref,
	test-variable-bind, test-function-call): never use boundp to
	check for validity of reference. Use compiler-boundp instead.
	Similar for symbol-value and compiler-symbol-value

	* rep/vm/compiler/modules.jl (compiler-boundp): new function

	* rep/system.jl, rep/lang/interpreter.jl (nop, interactive):
	moved from rep.system to rep.lang.interpreter

	* rep/data.jl, rep/data/string-util.jl, rep/regexp.jl
	(string-replace): moved from rep.data to rep.regexp

	* scheme/misc.jl, unscheme/misc.jl: explicitly reference all
	used bindings in rep.io.streams

	* rep/user.jl: 
	* rep/data/records.jl: 
	* rep/i18n/xgettext.jl: 
	* rep/io/file-handlers/tilde.jl, rep/io/file-handlers/tar.jl,
	rep/io/file-handlers/remote.jl: 
	* rep/io/file-handlers/remote/utils.jl,
	rep/io/file-handlers/remote/rep.jl,
	rep/io/file-handlers/remote/rcp.jl,
	rep/io/file-handlers/remote/ftp.jl: 
	* rep/lang/profiler.jl, rep/lang/doc.jl, rep/lang/debugger.jl: 
	* rep/mail/addr.jl: 
	* rep/util/ispell.jl, rep/util/gaol.jl, rep/util/date.jl,
	rep/util/base64.jl: 
	* rep/vm/disassembler.jl, rep/vm/compiler.jl: 
	* rep/vm/compiler/inline.jl, rep/vm/compiler/basic.jl: 
	* rep/www/quote-url.jl, rep/www/fetch-url.jl,
	rep/www/cgi-get.jl: 

	Added necessary imports of the modules removed from `rep'
	interface

	* rep/util/repl.jl: new command `,whereis VAR'

2000-09-07  John Harper  <john@dcs.warwick.ac.uk>

	* rep/util/time.jl: new module, a few utilities for converting
	timestamps to scalars and vice versa. From TITAN

2000-09-06  John Harper  <john@dcs.warwick.ac.uk>

	* rep/vm/compiler/modules.jl: added `(declare (language LANG))'
	declaration

	* rep/data/objects.jl (object): added a second method syntax:
	(METHOD-NAME FUNCTION) (in addition to ((METHOD-NAME .
	PARAM-LIST) BODY...)). This allows arbitrary functions to be
	used as method implementations

2000-09-05  John Harper  <john@dcs.warwick.ac.uk>

	* rep/module-system.jl: don't explcitly export `provide',
	`require' and `featurep', this is done from C code now

	* rep/data/records.jl: instead of using a static (higher-order)
	record-constructor function, create a local function for each
	record type. This allows the constructor parameter list to
	include all standard rep lambda-list features (i.e. including
	keywords and default values, etc..)

	* Makefile.in: lisp depends on ../src/.libexec

2000-09-04  John Harper  <john@dcs.warwick.ac.uk>

	* rep/vm/compiler/scheme.jl: when compiling let* and letrec
	forms, scan out inner defines before passing the forms to the
	rep compilers
	* rep/vm/compiler/unscheme.jl: same thing

	* scheme/syntax-funs.jl (expand-letrec): expand inner defines
	in body by hand; `lambda' would miss them since they come after
	the initialising `set!' forms

	* rep/i18n/xgettext.jl: track the current module name while
	scanning, and export it via the current-module fluid

2000-09-03  John Harper  <john@dcs.warwick.ac.uk>

	* rep/util/repl.jl: added command `,locate SYM' to find the
	module that a variable is bound in

	* rep/lang/doc.jl (describe-value): fixed bug of not looking
	for the documentation of functions not yet autoloaded

	* rep/structures.jl (locate-binding): new function

	* rep/data/string-util.jl (string-replace): new function
	* rep/data.jl: autoload string-replace

	* rep/lang/doc.jl: store doc strings under keys `MODULE#SYMBOL'
	instead of just `SYMBOL'. (The old-style keys are still checked
	when searching for documentation.) Changed some function
	parameter lists to include a STRUCTURE parameter

	* rep/lang/compat-doc.jl: new file, a compatibility layer for
	the 'lisp-doc module in the last rep release

	* rep/util/repl.jl: `,describe' command scans the imported
	modules for the binding of the thing being queried

	* rep/vm/compiler/modules.jl: export current-module
	* rep/vm/compiler/rep.jl, rep/vm/compiler/basic.jl: changed for
	new rep.lang.doc function parameters

	* rep/util/repl.jl (repl-completions): new function

2000-09-02  John Harper  <john@dcs.warwick.ac.uk>

	* rep/util/gaol.jl (define-gaol-structure): new function, used
	to assign a module name to a gaol

	* rep/util/ispell.jl: use accept-process-input-1 so as not to
	call other process handlers asynchronously

2000-08-27  John Harper  <john@dcs.warwick.ac.uk>

	* rep/vm/compiler/inline.jl, rep/vm/compiler/basic.jl: now
	evaluate default values of #!optional and #!key parameters

	* rep/vm/disassembler.jl, rep/vm/bytecode-defs.jl:
	foo-arg-with-default is now foo-arg*, these now push a variable
	number of values

	* rep/data.jl (remove, remq): new functions

2000-08-25  John Harper  <john@dcs.warwick.ac.uk>

	* rep/vm/compiler/rep.jl (pass-1): recursively flatten `progn'
	forms (correctly now)

	* rep/vm/compiler/utils.jl (compiler-constant-p,
	compiler-constant-value): handle keyword symbols

2000-08-21  John Harper  <john@dcs.warwick.ac.uk>

	* rep/i18n/xgettext.jl (scan): scan bodies of define-structure
	and structure forms

2000-08-17  John Harper  <john@dcs.warwick.ac.uk>

	* rep/util/gaol.jl (gaol-define-vm): new function, installs a
	given virtual machine in the gaol

	* rep/vm/compiler/bindings.jl: added `(unused VARS...)'
	declaration to selectively turn off unused variable warnings

	* rep/lang/doc.jl, rep/vm/compiler/utils.jl,
	rep/vm/compiler/inline.jl, rep/vm/compiler/basic.jl: support
	default values in #!optional and #!key params

	* rep/vm/disassembler.jl, rep/vm/bytecode-defs.jl
	(optional-arg-with-default, keyword-arg-with-default): new
	instructions

	* rep/util/gaol.jl: added `intern' and `do'

2000-08-16  John Harper  <john@dcs.warwick.ac.uk>

	* rep/vm/compiler/utils.jl (test-function-call): don't warn
	about too many args if the function has #!key params

	* rep/vm/compiler/rep.jl (compile-condition-case): when
	creating an unused binding for `(condition-case nil ...)' mark
	it as referenced to avoid a compiler warning

	* rep/vm/compiler/utils.jl (remember-function): handle
	#!optional, #!rest and #!key
	(compiler-deprecated): new function

	* rep/vm/compiler/inline.jl (push-inline-args): handle
	#!optional and #!rest. Error out if #!key is encountered

	* rep/vm/compiler/basic.jl (compile-form-1): compile keyword
	symbols as constants
	(compile-lambda-spec): handle #!optional, #!rest and #!key,
	deprecated &optional and &rest

	* all lisp files: use #!optional and #!rest instead of
	deprecated &optional and &rest

2000-08-15  John Harper  <john@dcs.warwick.ac.uk>

	* scheme/data.jl (symbol?, string-ci>?, string-ci>=?): fixed
	these functions

	* scheme/data.jl: use standard rep cons accessors. R5RS says
	that ``it is an error to take the c[ad]r of the empty list''.
	But §1.3.2 notes that detection of ``is an error'' situations
	is not required

	* rep/vm/compiler/scheme.jl: use standard cons accessors;
	compile `list-ref' and `list-tail' using `nth' and `nthcdr'
	instructions
	* rep/vm/compiler/unscheme.jl: use `list-ref' and `list-tail'
	inliners from the scheme compiler

	* rep/vm/compiler/rep.jl: added inliner properties for cadddr

	* rep/vm/compiler/unscheme.jl, rep/vm/compiler/scheme.jl: when
	copying rep-compile-fun properties, also copy
	rep-compile-opcode if it's present

2000-08-13  John Harper  <john@dcs.warwick.ac.uk>

	* rep/vm/compiler/opt.jl: new patterns, `push 0; num-eq ->
	zerop', `zerop; not -> not-zero-p'

	* rep/vm/bytecodes.jl, disassembler.jl (not-zero-p): new
	instruction

	* rep/data/sort.jl, rep/io/file-handlers/tar.jl,
	rep/io/file-handlers/remote/utils.jl,
	rep/io/file-handlers/remote/rep.jl,
	rep/io/file-handlers/remote/rcp.jl,
	rep/io/file-handlers/remote/ftp.jl, rep/lang/doc.jl,
	rep/lang/define.jl, rep/lang/backquote.jl, rep/util/date.jl,
	rep/util/base64.jl, rep/vm/disassembler.jl, rep/vm/compiler.jl,
	rep/vm/compiler/utils.jl, rep/vm/compiler/src.jl,
	rep/vm/compiler/opt.jl, rep/vm/compiler/modules.jl,
	rep/vm/compiler/lap.jl, rep/vm/compiler/inline.jl,
	rep/vm/compiler/basic.jl, rep/www/cgi-get.jl: added `(declare
	(unsafe-for-call/cc))'

	* rep/system/environ.jl: rewritten to use tail recursion
	instead of side effects

	* rep/vm/compiler/bindings.jl: don't allocate variables to
	slots if they're modified after a function has been called.
	(Due to call/cc the function could return multiple times, but
	it would get the _same_ values for any slot-allocated bindings,
	even if they have since been modified). The
	`(unsafe-for-call/cc)' declaration can be used to prevent this
	(but it may lead to incrorrect results...)

	* rep/util/repl.jl (repl): install a low-level exception
	handler to catch interrupt signals

2000-08-12  John Harper  <john@dcs.warwick.ac.uk>

	* rep/vm/compiler/modules.jl (compile-structure-def): fixed
	compilation of non-top-level structure definitions

2000-08-11  John Harper  <john@dcs.warwick.ac.uk>

	* rep/lang/doc.jl (doc-file-set): pass 'no-lock flag to
	gdbm-open

	* rep/vm/compiler/rep.jl (compile-cond): fixed bug of not
	propagating return-follows information to body-less final
	conditions. This meant that things like `(define (test a) (and
	a (test a)))' wouldn't have had the tail call made into a jump

	This has a _huge_ effect on the prime benchmark, iterations per
	minute increases by 60%! For comparison:

		current rep	2580 (1.0)
		qscheme-0.3.3	1860 (.72)
		scheme48-0.53	835  (.32)	; in benchmark mode
		guile-0.4	314  (.12)	; with (debug-disable 'debug)

	300MHz mobile Pentium II; code as follows:

(define (prime n)
  (letrec ((primep (lambda (n primes)
                     (or (null primes)
                         (and (not (zerop (remainder n (car primes))))
                              (primep n (cdr primes)))))))
    (let loop ((i 2) (candidate 2) (primes '()))
      (cond ((not (primep candidate primes)) (loop i (+ 1 candidate) primes))
            ((= i n) candidate)
            (t (loop (+ 1 i) (+ 1 candidate) (cons candidate primes)))))))

(define (test)
  (let loop ((count 1))
    (prime 100)
    (format standard-output "%d\n" count)
    (loop (+ 1 count))))

	I need a new benchmark now..

2000-08-10  John Harper  <john@dcs.warwick.ac.uk>

	* rep/lang/doc.jl (describe-value): bytecode subrs no longer
	include arg spec

	* rep/vm/compiler.jl, rep/vm/compiler/utils.jl,
	rep/vm/compiler/unscheme.jl, rep/vm/compiler/src.jl,
	rep/vm/compiler/scheme.jl, rep/vm/compiler/rep.jl,
	rep/vm/compiler/opt.jl, rep/vm/compiler/no-lang.jl,
	rep/vm/compiler/modules.jl, rep/vm/compiler/lap.jl,
	rep/vm/compiler/inline.jl, rep/vm/compiler/bindings.jl,
	rep/vm/compiler/basic.jl:

	Many compiler improvements: first order closure analysis; stack
	allocation of uncaptured bindings; fixed `case' statements
	without else clauses

	* rep/vm/compiler/const.jl, rep/vm/compiler/asm.jl: deleted

	* rep/util/repl.jl: fixed ,compile-proc command

	* rep/vm/disassembler.jl, rep/vm/bytecodes.jl,
	rep/vm/bytecode-defs.jl, rep/vm/assembler.jl: various changes
	to the vm architecture. Bumped major version

2000-08-03  John Harper  <john@dcs.warwick.ac.uk>

	* rep/i18n/xgettext.jl: yanked the useful bits of
	src/rep-xgettext.jl into a library module to enable customized
	xgettext scripts to be written

	* rep/vm/assembler.jl: a higher-level assembler

	* rep/vm/disassembler.jl: split into two functions

	* rep/vm/bytecodes.jl, rep/vm/bytecode-defs.jl (bytecode-ref):
	new function

2000-08-02  John Harper  <john@dcs.warwick.ac.uk>

	* rep/module-system.jl (define-structures): new macro, for
	defining >1 structure from the same set of definitions

	* rep/vm/compiler/modules.jl (module-exports-p): handle
	first-class structures in imports list

2000-08-01  John Harper  <john@dcs.warwick.ac.uk>

	* rep/io/file-handlers/tar.jl,
	rep/io/file-handlers/remote/rep.jl,
	rep/io/file-handlers/remote/rcp.jl,
	rep/io/file-handlers/remote/ftp.jl, rep/util/base64.jl: don't
	use 0NN octal syntax

2000-07-31  John Harper  <john@dcs.warwick.ac.uk>

	* rep.jl: always define _

	* unscheme.jl, scheme.jl, scheme/syntax-funs.jl: export
	\#define as %define, then use this for `define' forms

	* rep/data/symbol-table.jl, rep/io/file-handlers.jl,
	rep/util/gaol.jl: use structure-define instead of structure-set

	* rep/user.jl: setq creates bindings in this structure

	* rep/vm/compiler/unscheme.jl, rep/vm/compiler/scheme.jl,
	rep/vm/compiler/rep.jl: use %define instruction

	* rep/vm/compiler/modules.jl (compile-structure-def): don't
	drop unknown configuration items

	* rep/vm/disassembler.jl, rep/vm/bytecode-defs.jl (%define):
	new instruction

	* rep/lang/interpreter.jl (#f, #t): set to '() and 't respectively

	* rep/lang/interpreter.jl, rep/lang/math.jl,
	rep/lang/define.jl, rep/lang/data.jl,
	rep/lang/module-system.jl: use %define to create definitions

	* rep/lang/module-system.jl: new clauses `(set-binds)' and
	`(export-all)' in module configuration language

2000-07-30  John Harper  <john@dcs.warwick.ac.uk>

	* dump.jl: deleted this file, it needs a lot of attention
	before being useful again..

	* unscheme.jl, scheme.jl, scheme/syntax-funs.jl,
	scheme/data.jl, unscheme/data.jl: various changes for distinct
	() object. This means that the scheme implementations no longer
	have to confuse 'nil and '()

	* rep/vm/compiler/const.jl (compile-constant): check for '()
	not 'nil when emitting `nil' instruction

	* rep/lang/interpreter.jl: (defconst `nil' ()) and (defconst t t),
	exporting both of them

	* rep/user.jl: call this structure `user', not `rep.user'

	* rep/vm/compiler/rep.jl (compile-list*): compile `list*' forms
	into a sequence of `cons' instructions
	* rep/vm/compiler/unscheme.jl, rep/vm/compiler/scheme.jl: use
	rep list* compiler

2000-07-29  John Harper  <john@dcs.warwick.ac.uk>

	* rep/vm/compiler/rep.jl (compile-apply): compiles `apply'
	calls

	* rep/vm/disassembler.jl, rep/vm/bytecode-defs.jl: new
	instruction `apply'. Bumped bytecode minor version

	* rep/vm/compiler.jl, rep/vm/compiler/unscheme.jl: support
	for unscheme language

	* unscheme.jl, unscheme/syntax.jl, unscheme/syntax-funs.jl,
	unscheme/misc.jl, unscheme/data.jl: _Another_ scheme
	implementation! This one intentionally ignores the Scheme
	standard where it helps the language fit the rep environment
	(see unscheme.jl for the details)

	* scheme/utils.jl: define and export #f and #t as themselves

	* scheme/syntax-funs.jl: don't depend on value of #f, just
	quote and return it where necessary

	* scheme/data.jl: no need for special `/'. Redefine symbol? to
	ignore #f and #t

2000-07-28  John Harper  <john@dcs.warwick.ac.uk>

	* rep/lang/define.jl (define-macro): new macro, similar to
	`define' but not quite so general

	* rep/util/repl.jl (repl): fixed bug when completing

	* scheme/misc.jl: export `load-file' as `load'

2000-07-27  John Harper  <john@dcs.warwick.ac.uk>

	* rep/util/repl.jl: core repl is now called for each line of
	input. Also functions to create repl state objects. Allows
	tricks like running a replicated repl on a remote system

	* rep/user.jl: handle --help option if seen

2000-07-25  John Harper  <john@dcs.warwick.ac.uk>

	* rep/util/base64.jl: more code borrowed from Jade that may be
	useful

	* rep/util/ispell.jl: ripped this code from Jade to provide a
	generally useful ispell interface

2000-07-24  John Harper  <john@dcs.warwick.ac.uk>

	* rep/vm/compiler/scheme.jl (compile-case): compile `case'
	forms, cut-n-pasted from the `rep' compiler

	* rep/vm/compiler/modules.jl (compiler-macroexpand-1): handle
	autoloading macros

2000-07-23  John Harper  <john@dcs.warwick.ac.uk>

	Wholesale reorganization of the lisp code, to support the new
	hierarchical module layout. Various other changes to support
	this. Also changed `case' to be a macro.

	* rep/user.jl: new location of user-startup code

	* rep/www/quote-url.jl, rep/www/fetch-url.jl: a couple of
	modules for doing www/url stuff

	* rep/vm/compiler/no-lang.jl: new compiler language module,
	supports the module configuration language, and nothing else

	* rep/util/autoloader.jl: new file, for doing generic
	autoloading of modules that provide arbitrary features

	* rep/data/objects.jl: new file, a macro for basic
	message-passing objects, with single inheritance of methods

	* rep/data/symbol-table.jl, rep/data/string-util.jl,
	rep/data/sort.jl, rep/data/ring.jl, rep/data/records.jl,
	rep/data/queues.jl: 
	* rep/io/file-handlers/tilde.jl, rep/io/file-handlers/tar.jl,
	rep/io/file-handlers/remote.jl: 
	* rep/io/file-handlers/remote/utils.jl,
	rep/io/file-handlers/remote/rep.jl,
	rep/io/file-handlers/remote/rcp.jl,
	rep/io/file-handlers/remote/ftp.jl: 
	* rep/lang/profiler.jl, rep/lang/doc.jl, rep/lang/define.jl,
	rep/lang/debugger.jl, rep/lang/backquote.jl: 
	* rep/mail/addr.jl: 
	* rep/system/pwd-prompt.jl, rep/system/environ.jl: 
	* rep/threads/utils.jl, rep/threads/mutex.jl: 
	* rep/util/repl.jl, rep/util/memoize.jl, rep/util/gaol.jl,
	rep/util/date.jl: 
	* rep/vm/disassembler.jl, rep/vm/compiler.jl,
	rep/vm/bytecodes.jl, rep/vm/bytecode-defs.jl: 
	* rep/vm/compiler/utils.jl, rep/vm/compiler/src.jl,
	rep/vm/compiler/scheme.jl, rep/vm/compiler/rep.jl,
	rep/vm/compiler/opt.jl, rep/vm/compiler/modules.jl,
	rep/vm/compiler/lap.jl, rep/vm/compiler/inline.jl,
	rep/vm/compiler/const.jl, rep/vm/compiler/bindings.jl,
	rep/vm/compiler/basic.jl, rep/vm/compiler/asm.jl: 
	* rep/www/cgi-get.jl: 
	* scheme/utils.jl, scheme/syntax.jl, scheme/syntax-funs.jl,
	scheme/misc.jl, scheme/data.jl: 

	New locations for these old files. Many have aliases so the old
	names still work

	* rep.jl, rep/system.jl, rep/structures.jl, rep/lang.jl,
	rep/lang/interpreter.jl, rep/lang/math.jl,
	rep/module-system.jl, rep/data.jl, rep/io/streams.jl,
	rep/io/files.jl, rep/io/file-handlers.jl: bootstrap code for
	the various modules in the new configuration

	* tilde.jl, threads.jl, tar-file-handler.jl, symbol-table.jl,
	string-util.jl, sort.jl, scheme-utils.jl, scheme-syntax.jl,
	scheme-syntax-funs.jl, scheme-misc.jl, scheme-data.jl, ring.jl,
	rep-repl.jl, rep-packages.jl, rep-autoload.jl, remote.jl,
	remote-utils.jl, remote-rep.jl, remote-rcp.jl, remote-ftp.jl,
	records.jl, queues.jl, pwd-prompt.jl, profiler.jl, mutex.jl,
	memoize.jl, mailaddr.jl, lisp-doc.jl, init.jl, gaol.jl,
	environ.jl, disassembler.jl, define.jl, debug.jl, date.jl,
	compiler.jl, compiler-utils.jl, compiler-src.jl,
	compiler-scheme.jl, compiler-rep.jl, compiler-opt.jl,
	compiler-modules.jl, compiler-lap.jl, compiler-inline.jl,
	compiler-const.jl, compiler-bindings.jl, compiler-basic.jl,
	compiler-asm.jl, cgi-get.jl, bytecodes.jl, bytecode-defs.jl,
	backquote.jl, autoload.jl: deleted or moved to a deeper
	position

2000-07-21  John Harper  <john@dcs.warwick.ac.uk>

	* rep-repl.jl, rep-packages.jl, init.jl, gaol.jl,
	symbol-table.jl: updated for removal of `%' from some function
	names

	* init.jl (define-structure-alias): new macro

	* compiler.jl, compiler-utils.jl, compiler-scheme.jl,
	compiler-rep.jl, compiler-opt.jl, compiler-modules.jl,
	compiler-inline.jl, compiler-basic.jl: reorganized some modules

	* compiler.jl (compile-directory): Recurse into subdirectories

2000-07-20  John Harper  <john@dcs.warwick.ac.uk>

	* version 0.12.4

	* rep-repl.jl (repl): fixed bug of not prompting for
	continuation lines when a whole form isn't read

2000-07-19  John Harper  <john@dcs.warwick.ac.uk>

	* compiler-rep.jl (trans-defvar): call make-variable-special on
	the symbol (but this is still broken..)

2000-07-18  John Harper  <john@dcs.warwick.ac.uk>

	* lisp-doc.jl (documentation): only try to deref SYMBOL if it's
	bound (otherwise interpreted code may fall over?)

	* gaol.jl: store all state in gaol, don't keep it locally then
	rebuild the gaol from that. Deprecated some old functions, new
	interface is basically gaol-define, gaol-define-special,
	gaol-define-file-handler. Also added gaol-open

	* compiler-modules.jl: signal errors when trying to reference
	unknown structures

2000-07-16  John Harper  <john@dcs.warwick.ac.uk>

	* gaol.jl (gaol-safe-functions): added more safe functions

2000-07-15  John Harper  <john@dcs.warwick.ac.uk>

	* gaol.jl (make-gaol): install a null virtual machine

2000-07-14  John Harper  <john@dcs.warwick.ac.uk>

	* compiler-utils.jl (declare-inline): handler for `(declare
	(inline NAMES...))' marking functions that should be inlined
	(remember-function): optional arg BODY, so that functions
	previously declared inline can be stored

	* compiler-rep.jl (do-pass-1): pass defun bodies to
	remember-function, in case they've been declared inline
	(do-pass-2): defsubst forms are compiled as defuns now

	* compiler-modules.jl (variable-stem): new function to extract
	the local name of a variable

	* compiler-basic.jl (compile-form-1): removed code to check for
	'compile-inline property. This was totally bogus after the
	module system arrived
	* compiler-inline.jl (compile-inline-function): deleted

	* init.jl (defsubst): just an alias for defun now

	* init.jl (throw): now in lisp
	(raise-exception): deleted, now in C

2000-07-12  John Harper  <john@dcs.warwick.ac.uk>

	* define.jl (define-scan-form): don't expand let-fluids forms
	since compiler handles them specially

	* version 0.12.3

2000-07-11  John Harper  <john@dcs.warwick.ac.uk>

	* define.jl (define-scan-form): expand macros one at a time,
	checking the results for things that shouldn't be expanded

	* compiler-modules.jl (compiler-macroexpand-1): set
	macro-environment to compiler-macroexpand-1, not
	compiler-macroexpand

	* init.jl (let): don't wrap named lets expansions in a progn
	block anymore, the misfeature being worked around is fixed now

2000-07-09  John Harper  <john@dcs.warwick.ac.uk>

	* lisp-doc.jl (doc-file-ref): pass `no-lock' flag to gdbm-open

	* rep-repl.jl (repl): only catch end-of-stream errors when
	reading, not when evaluating

	* init.jl (setcar, setcdr): no longer pseudonyms for rplaca and
	rplacd (they return the inserted value, not the cell)
	* compiler-rep.jl: removed code making setc[ad]r compile as rplac[ad]

2000-07-08  John Harper  <john@dcs.warwick.ac.uk>

	* compiler-modules.jl (compile-structure-def): compile bodies
	of non-top-level structures (so they can access their
	environment)

	* init.jl (catch, unwind-protect, condition-case): these are
	all now macros (in terms of call-with-catch,
	call-with-unwind-protect and call-with-error-handlers
	respectively. These functions are written in terms of the
	call-with-exception handler primitive). This has no effect on
	compiled code

	* rep-packages.jl, gaol.jl (call-with-catch,
	call-with-unwind-protect, call-with-error-handlers): added

2000-07-07  John Harper  <john@dcs.warwick.ac.uk>

	* rep.jl (rep): do the file-exists-p test when loading scheme
	scripts

	* mutex.jl, disassembler.jl, date.jl, cgi-get.jl, bytecodes.jl:
	use define-structure instead of structure

2000-07-05  John Harper  <john@dcs.warwick.ac.uk>

	* rep.jl: load-all "autoload" not "autoload.jl"

2000-07-03  John Harper  <john@dcs.warwick.ac.uk>

	* gaol.jl (gaol-safe-functions): added define-value

2000-06-29  John Harper  <john@dcs.warwick.ac.uk>

	* define.jl (define-scan-form): fix bug when extracting doc
	strings and interactive decls

2000-06-27  John Harper  <john@dcs.warwick.ac.uk>

	* profiler.jl: front-end for a basic profiler
	* rep-repl.jl: added `,profile FORM' command

2000-06-25  John Harper  <john@dcs.warwick.ac.uk>

	* ring.jl (ring->list): new function

2000-06-23  John Harper  <john@dcs.warwick.ac.uk>

	* ring.jl: encapsulate rings in datums, cleaned up the api
	(added ring-append, ring-ref, ring-replace. ring-ref counts
	from zero unlike the old get-from-ring), no longer uses macros
	for inlining

2000-06-22  John Harper  <john@dcs.warwick.ac.uk>

	* version 0.12.2

	* compiler-inline.jl (compile-tail-call): when modifying
	bindings in-place, remember to emit a `pop-all' instruction if
	the value stack is non-empty

	* init.jl (member-if): new function

2000-06-21  John Harper  <john@dcs.warwick.ac.uk>

	* compiler-rep.jl (compile-list): if (= #args 0) emit `push
	nil' instead of `list #0' (also fixes a bug of stack use not
	being incremented with zero args)

2000-06-19  John Harper  <john@dcs.warwick.ac.uk>

	* compiler-rep.jl (do-pass-2): don't evaluate constants, pass-1
	doesn't

	* init.jl (defconst): don't evaluate constants (the compiler
	doesn't)

	* dump.jl, disassembler.jl, compiler-utils.jl,
	bytecode-defs.jl: s/0x/#x/ and s/0[0-9]/#o[0-9]/

	* gaol.jl: can now create multiple gaols (though each has the
	same default contents). This allows gaolled code to defun to
	its heart's content without affecting anything else. New
	function make-gaol returns a gaol (a structure), gaol-eval and
	gaol-load optionally take a gaol as their second arg

	* tar-file-handler.jl: when reading files from (non-huge) tar
	archives unpack the entire contents. This unpacked version is
	kept around for a while to service subsequent reads to other
	files in the same archive (this is a huge win when reading
	compressed sawfish themes)

2000-06-18  John Harper  <john@dcs.warwick.ac.uk>

	* version 0.12.1

	* compiler-rep.jl (compile-declare): push `nil' onto the stack
	(since all forms are assumed to leave a value on the stack)

2000-06-16  John Harper  <john@dcs.warwick.ac.uk>

	* version 0.12

2000-06-14  John Harper  <john@dcs.warwick.ac.uk>

	* define.jl (define): strip leading progn's from expanded
	bodies of defines that expand to defuns (so that doc strings
	etc are visible)

2000-06-10  John Harper  <john@dcs.warwick.ac.uk>

	* compiler-opt.jl (peephole-optimizer): remove some zero
	additions and subtractions

2000-06-09  John Harper  <john@dcs.warwick.ac.uk>

	* init.jl: added some more doc strings

2000-06-08  John Harper  <john@dcs.warwick.ac.uk>

	* records.jl (record-printer): if the value returned from the
	discloser function is a string, print it without surrounding
	quotes

	* records.jl (define-record-type): removed the NAME argument,
	it's not very useful, and conflicts with the definition in
	SRFI 9 (http://srfi.schemers.org/srfi-9/)

2000-06-07  John Harper  <john@dcs.warwick.ac.uk>

	* compiler-basic.jl (compile-lambda): when adding doc strings,
	don't concatenate lambda-doc onto actual doc, add two separate
	items to the database

	* lisp-doc.jl (doc-file-ref, doc-file-set): functions to access
	doc files
	(add-documentation-params): store a parameter-list for a named
	function in the doc file

	* compiler-opt.jl (peephole-optimizer): when threading jmp
	instructions, ignore instructions that wouldn't change
	(fixes a non-termination case)

	* compiler-opt.jl (constant-optimizer): remember to update
	constant-index so that the resulting vector contains no unused
	entries

2000-06-05  John Harper  <john@dcs.warwick.ac.uk>

	* compiler-modules.jl (compile-top-level-structure,
	compile-top-level-define-structure): new exported functions
	* compiler-rep.jl: leave top-level structure definitions
	unexpanded in output

	* rep-repl.jl (,load-file): will now load more than one file

	* scheme.jl, scheme-utils.jl, scheme-syntax-funs.jl,
	scheme-misc.jl, scheme-data.jl, compiler-scheme.jl: prefix most
	exported non-r4rs symbols by `#' (not allowed in scheme
	identifiers)

	* compiler-modules.jl (compile-structure-ref): check
	open-modules for structure being referenced as well

	* scheme-data.jl (symbol?): (symbol? '()) => #f
	(string->symbol): copy the name if a symbol needs to be created
	and interned

	* define.jl (define-scan-form): don't mistake (let () ..) for a
	named let

2000-06-04  John Harper  <john@dcs.warwick.ac.uk>

	* rep-repl.jl (rl-completion-generator): fix from Ceri to
	prepend `^' to start of word, also quote the word being
	completed

	* define.jl (define-scan-form): don't expand `structure-ref'
	forms

	* compiler-rep.jl: merge `normal' top-level forms into progn
	statements in pass-1, which then get compiled in pass-2

	* compiler-modules.jl (compile-structure-def): leave `open' and
	`access' config statements as-is

	* compiler-basic.jl (macroexpand-pred): used to stop expanding
	macros when a form with a special compiler is found

	* compiler-modules.jl (parse-interface): fix typo

	* scheme.jl: no need to export %while anymore

	* compiler-utils.jl (compiler-constant-p,
	compiler-constant-value): anything that isn't a cons or a
	symbol is now treated as a (self-evaluating) constant, mainly
	to allow #f and #t to be constant-folded

	* compiler-scheme.jl: enabled constant folding support

	* compiler-modules.jl: pass-1 and pass-2 functions now take and
	return the complete list of forms, not just one at a time

	* compiler-scheme.jl, compiler-rep.jl (pass-1, pass-2): operate
	on the entire body in one go

2000-06-02  John Harper  <john@dcs.warwick.ac.uk>

	* init.jl (fluid-let): renamed as `let-fluids'. Updated all
	users

	* rep-repl.jl: removed *repl-in-struct* defvar, replaced by
	fluid repl-in-struct

2000-06-01  John Harper  <john@dcs.warwick.ac.uk>

	* rep-repl.jl (rl-completion-generator): new function,
	generates completions for readline (from Ceri Storey
	<cez@phi.uklinux.net>)

	* compiler-basic.jl (compile-form-1): don't call
	test-function-call if the form has a special handler

	* compiler-rep.jl: handle non-top-level declarations

	* compiler-bindings.jl: support (declare (bound VARS...)) and
	(declare (special VARS...)) to flag variable bindings that the
	compiler would otherwise be unaware of

	* remote-ftp.jl, disassembler.jl, compiler-utils.jl: added
	declarations to prevent warnings for jade-only functions

	* backquote.jl (backquote-listify): don't call `eval' to
	unquote constants, use a special purpose backquote-eval to
	avoid security breaches

	* scheme-syntax-funs.jl: new file, defines expand-FOO functions
	for each non-trivial Scheme syntax form. Since nothing is
	redefined here, doing this removes the need for the gratuitous
	rep# and hand-expanded macros
	* scheme-syntax.jl: most macros just call expand-FOO

	* init.jl (make-guardian): use a rest argument in the returned
	closure so that `(G nil)' can be distinguished from `(G)'

	* init.jl (call-after-load): new function, eval-after-load just
	calls this now

2000-05-31  John Harper  <john@dcs.warwick.ac.uk>

	* init.jl (with-object): new macro, uses call-with-object
	* compiler-rep.jl (with-object): flushed compiler for this
	special form
	* disassembler.jl, bytecode-defs.jl (bindobj): flushed this insn

	* init.jl (prog1): new macro, in terms of lambda

2000-05-30  John Harper  <john@dcs.warwick.ac.uk>

	* init.jl (while): new macro, basic tail-recursive definition

	* define.jl (define-scan-form): removed `while' from the list
	of special forms

2000-05-27  John Harper  <john@dcs.warwick.ac.uk>

	* scheme-misc.jl, records.jl, queues.jl: updated for datum
	printer interface

2000-05-26  John Harper  <john@dcs.warwick.ac.uk>

	* compiler-src.jl (coalesce-constants, mash-constants): new
	functions, in preparation for more constant optimizations

	* lisp-doc.jl (describe-lambda-list): new function

	* compiler-scheme.jl: list? no longer == listp

	* compiler-basic.jl (compile-lambda): add the argument spec to
	the front of any doc string

	* scheme-data.jl (boolean?): fixed
	(list?): no longer equivalent to rep's listp, scheme standard
	says this must only return #t if its last cdr is the empty list
	(string-ci>?): fixed

	* init.jl (lcm): handle 0...N args

2000-05-25  John Harper  <john@dcs.warwick.ac.uk>

	* compiler-basic.jl (compile-lambda-spec): if the spec contains
	special variables, don't encode it
	(compile-lambda): don't error out if special variables in spec

	* compiler-rep.jl: added special handlers for `defun' and
	`defmacro', otherwise non-top-level calls to these macros don't
	get compiled properly

	* rep-repl.jl: added `,time' command

	* lisp-doc.jl (describe-value): don't check for calls to
	jade-byte-code

	* init.jl (eval-after-load): don't use `&aux'

	* dump.jl: don't `set' lexical variables

	* disassembler.jl: understand new opcodes, new parameter list
	encoding

	* debug.jl: updated for new lexical environment structure (of
	interpreted code)

	* compiler.jl (compile-form): generate calls to `run-byte-code'
	instead of `jade-byte-code'

	* compiler-utils.jl (remember-function): don't `set' lexical
	variables
	(get-lambda-vars): ignore `&aux' keys

	* compiler-src.jl (fold-constants): use `compiler-symbol-value'
	instead of `eval' to dereference functions

	* compiler-rep.jl: don't compile calls to `eval'
	(compile-condition-case): changed this for the modified
	semantics of the `errorpro' instruction (doesn't require name
	of variable to bind, always binds the next lexical slot)

	* compiler-opt.jl: added some peephole patterns for changing
	simple constant add and subtract sequences into `inc' or `dec'
	instructions

	* compiler-inline.jl: removed all support for `&aux' keyword

	* compiler-bindings.jl (emit-binding): don't emit arg when
	binding lexically

	* compiler-basic.jl (compile-lambda): generate the new-style
	byte code subrs (with parameter spec encoded as a fixnum)

	* bytecode-defs.jl: deleted `eval', `bind' is now arg-less (and
	uses the old eval opcode)
	* bytecodes.jl (byte-insns-with-constants): removed `bind'

2000-05-23  John Harper  <john@dcs.warwick.ac.uk>

	* scheme-misc.jl (eof-object?): fixed to return #f or #t

	* compiler-scheme.jl: code and properties to piggyback the rep
	compiler for predicates that just needs boolean results translated

	* compiler-opt.jl: delete `test-scm[-f]; scm-test' pairs of
	instructions

	* bytecodes.jl, bytecode-defs.jl, disassembler.jl (test-scm,
	test-scm-f): new instructions, map from rep booleans to scheme
	booleans

	* rep.jl: option aliases: --call -> -f, --load -> -l, --quit -> -q
	New option --scheme,-s to load a file of Scheme code	

	* scheme.jl, scheme-misc.jl: export %load-suffixes

	* scheme-syntax.jl (delay): don't use `rep#lambda' in
	expansion, probably not available in caller's environment

	* scheme-misc.jl (write-char): use `rep#write', not `write'
	(load): removed this definition, must use the subr (so the file
	is loaded in the caller's environment..)

	* compiler-modules.jl (compile-module-body): remember to create
	a binding of `current-language'

2000-05-22  John Harper  <john@dcs.warwick.ac.uk>

	* scheme-syntax.jl (cond): now expands into an `if' chain, this
	is to enable simple handling of `(TEST => FUNCTION)' syntax
	(case): remember to add the key to the expansion

	* scheme-misc.jl (close-input-port, close-output-port): detect
	and ignore files that have already been closed

	* scheme-data.jl (char?): defined and exported
	(complex?): always returns #t not #f
	(string->number): defined using make-nil-predicate

	* memoize.jl (memoize-function): renamed as `memoize' and
	removed the code to work on symbol values

2000-05-17  John Harper  <john@dcs.warwick.ac.uk>

	* debug.jl: added `up' and `down' commands; catch errors during
	`print' commands

	* compiler-rep.jl (compile-fluid-let): re-enabled this, the
	segmentation faults it used to cause seem to have mysteriously
	disappeared

2000-05-16  John Harper  <john@dcs.warwick.ac.uk>

	* debug.jl (error-entry): make this work again

	* init.jl (default-error-handler): new function, stuffed into
	error-handler-function

	* rep.jl, rep-repl.jl: call default-error-handler or
	error-handler-function to print errors

2000-05-15  John Harper  <john@dcs.warwick.ac.uk>

	* gaol.jl: added some more safe functions

	* date.jl, remote-ftp.jl, remote-rep.jl, tar-file-handler.jl:
	use string->number to parse numbers, not read-from-string
	(otherwise e.g. 08 causes a read error)

	* scheme-data.jl (string->number, number->string): deleted, use
	built-in versions of these functions

	* debug.jl: adapted for new return from debug-frame-environment
	(but this doesn't work 100%?)

2000-05-14  John Harper  <john@dcs.warwick.ac.uk>

	* init.jl (and): fixed bug `(and 1 nil) => 1'

	* compiler-modules.jl (compile-module): added interactive spec

2000-05-13  John Harper  <john@dcs.warwick.ac.uk>

	* compiler-rep.jl: compile `=' using num-eq insn
	(compile-case): use memql and eql for comparisons instead of
	memq and eq

	* bytecode-defs.jl, disassembler.jl (memql, num-eq): new insns

	* scheme-data.jl (memv): defined by wrapping memql

2000-05-12  John Harper  <john@dcs.warwick.ac.uk>

	* lisp-doc.jl (apropos-output, apropos-function,
	apropos-variable, describe-variable, describe-variable-1,
	describe-function): deleted these functions, they're all
	useless since they call symbol-value (from the wrong structure)

	(describe-function-1): renamed describe-value, takes two args
	VALUE and NAME (optional), then describes the value to
	standard-output. Handles both functions and variables

	(documentation): added optional second arg VALUE, the value of
	the symbol in the caller's environment
	
	* rep-repl.jl: added `,describe' and `,apropos' commands,
	removed `,doc'

2000-05-11  John Harper  <john@dcs.warwick.ac.uk>

	* init.jl (or, and): implement base cases explicitly, (or) =>
	nil, (and) => t
	* scheme-syntax.jl (and): add base case (and) => #t

	* init.jl (structure, define-structure): INTERFACE is now
	optional

	* init.jl, compiler-modules.jl (%parse-interface,
	parse-interface): accept `()' as null interface

2000-04-30  John Harper  <john@dcs.warwick.ac.uk>

	* string-util.jl (mapconcat): new function

2000-04-28  John Harper  <john@dcs.warwick.ac.uk>

	* records.jl: detect and report unknown fields

2000-04-24  John Harper  <john@dcs.warwick.ac.uk>

	* rep-repl.jl: new commands `,compile' and `,compile-proc'

	* init.jl, scheme.jl, scheme-data.jl: added cons accessors c....r

	* compiler.jl: export compile-module
	(compile-function): ignore already compiled functions, don't
	signal an error. And fix the method of testing for compiledness

	* compiler-modules.jl (compile-module): new function, compile
	all non-compiled functions in a named structure

2000-04-23  John Harper  <john@dcs.warwick.ac.uk>

	* records.jl: implements record-like data structures. Based on
	the Scheme48 record interface

2000-04-22  John Harper  <john@dcs.warwick.ac.uk>

	* compiler.jl (compile-function): this now works properly since
	it respects the structure that the closure is made in

	* compiler-utils.jl (compiler-constant-p): don't check that the
	`quote' symbol is from the `rep' structure (kludge)

	* compiler-scheme.jl, compiler-rep.jl: at top-level, splice in
	`begin' and `progn' forms, allows macros to expand to blocks of
	top-level definitions

	* compiler-modules.jl: track the current language being
	compiled, also provides a means for telling the compiler which
	module is being compiled in

	* compiler-basic.jl (compile-lambda): removed the SEQUENCER
	arg, use the compiler-sequencer language property

	* compiler-utils.jl (compiler-constant-p,
	compiler-constant-value): accept all numeric types

	* compiler-const.jl (compile-constant): only emit fixnums using
	immediate push insns

2000-04-21  John Harper  <john@dcs.warwick.ac.uk>

	* queues.jl: new file, implement the scheme48 queue interface

	* init.jl (fluid-let): new macro

	* debug.jl: rewritten to use fluid instead of special variables

	* bytecode-defs.jl, disassembler.jl (fluid-ref, fluid-set,
	fluid-bind): new insns

	* compiler.jl, compiler-vars.jl, compiler-utils.jl,
	compiler-src.jl, compiler-scheme.jl, compiler-rep.jl,
	compiler-opt.jl, compiler-modules.jl, compiler-lap.jl,
	compiler-inline.jl, compiler-const.jl, compiler-bindings.jl,
	compiler-basic.jl: rewritten to use fluid instead of special
	variables

	* symbol-table.jl: new file, wrapper around anonymous
	structures for efficient symbol tables

	* init.jl (realp, rationalp, inexactp): new functions

2000-04-18  John Harper  <john@dcs.warwick.ac.uk>

	* compiler.jl, compiler-vars.jl, compiler-utils.jl,
	compiler-rep.jl, compiler-inline.jl: track the maximum depth of
	the binding stack while compiling forms, then embed this into
	the `stack' property of byte code forms/subrs

	* disassembler.jl: groks the new layout of the `stack' arg

2000-04-17  John Harper  <john@dcs.warwick.ac.uk>

	* scheme-misc.jl (input-port?, output-port?, peek-char):
	implemented properly now

	* init.jl (streamp): in lisp now

	* compiler-modules.jl (compiler-symbol-value): this now
	recognizes autoload values, loading them before returning

2000-04-16  John Harper  <john@dcs.warwick.ac.uk>

	* scheme-syntax.jl (lambda): now scans out leading internal
	defines into a letrec

	* compiler*.jl: track which lexical bindings have been modified
	and which have been captured by closures, then use this
	information to optimize tail recursion. Also renamed a load of
	compiler functions to get rid of needless `comp-' prefixes

	* define.jl, scheme-syntax.jl (define): now supports curried
	functions, e.g. (define ((plus a) b) (+ a b)), then (plus 1)
	evaluates to the function that adds one to its argument

2000-04-15  John Harper  <john@dcs.warwick.ac.uk>

	* gaol.jl: don't need to build trampoline code anymore, can
	just use %eval-in-structure

	* compiler-rep.jl (compile-save-environment): deleted

	* bytecode-defs.jl, disassembler.jl: removed `bindenv'
	instruction

	* gaol.jl: updated for special environment being stored with
	the structure

2000-04-14  John Harper  <john@dcs.warwick.ac.uk>

	* disassembler.jl, bytecode-defs.jl: removed `dset' bytecode

	* compiler-basic.jl (comp-compile-lambda): when noting the
	parameter bindings, reverse the list

	* bytecode-defs.jl: bumped major version to 10
	(unbindall-0, pop-all): new instructions
	* disassembler.jl: updated for new insns

	* scheme-syntax.jl (do): implemented using named let, not
	while, since the Scheme report requires that each iteration
	get new bindings for each variable

	* init.jl (do): implemented this iteration syntax from Scheme,
	expands to a named let

	* compiler-inline.jl (comp-do-tail-call): don't just setq the
	new values of the variables, create wholly new bindings (in
	case the previous bindings have been captured by any closures)

2000-04-12  John Harper  <john@dcs.warwick.ac.uk>

	* gaol.jl: updated for new set-file-handler-environment semantics

	* rep-repl.jl: added commands `,step' and `,expand'. `,help'
	now prints two columns

	* debug.jl: now works with the module system

	* init.jl, compiler-modules.jl: changed module definition
	syntax, the config section is now a single form or list of
	forms, instead of the kludge of extracting them from the head
	of the module body. This way no extra indentation is introduced
	for the body. Existing modules only need changing if they have
	more than one config form

	* scheme.jl, scheme-syntax.jl, scheme-misc.jl, scheme-data.jl:
	updated for new module configuration syntax

2000-04-11  John Harper  <john@dcs.warwick.ac.uk>

	* remote-rep.jl, remote-ftp.jl: export all interactive
	functions

	* init.jl (let): fixed bug of interpreting (let () ..) as a
	named let (due to (symbolp '()))

2000-04-10  John Harper  <john@dcs.warwick.ac.uk>

	* rep-packages.jl (rep-files-interface): added jade-only file
	operations (since they need to be in the `rep' structure)

	* init.jl (eval-and-print): deleted, probably evals in the
	wrong structure for most uses

2000-04-09  John Harper  <john@dcs.warwick.ac.uk>

	Changes to make sawmill work with the module system, and to
	make things in general work more smoothly

	* init.jl: set `*root-structure*' to rep
	(declare): macro to ignore declarations
	(defsubst): put the actual function body in the
	`compiler-inline' property

	* compiler.jl, compiler-vars.jl, compiler-utils.jl,
	compiler-rep.jl, compiler-modules.jl, compiler-inline.jl:
	various compiler fixes/improvements to make things work largely
	as they did before (!)

	Also now supports top-level declarations, currently only
	`(declare (in-module FOO))' to tell the compiler where to look
	for bindings outside any actual module definition

	* rep.jl: set `*root-structure*' to user

	* gaol.jl: removed support for redefining `require',
	miscellaneous fixes

	* define.jl: reverted to handling all let forms specially,
	macroexpanding them prevents the compiler doing some
	optimizations

	* threads.jl, string-util.jl, sort.jl, rep-repl.jl,
	rep-packages.jl, environ.jl, define.jl, debug.jl, backquote.jl:
	added `(in-module rep)' declaration

2000-04-07  John Harper  <john@dcs.warwick.ac.uk>

	Many changes to support the new module system:

	* init.jl: subsumes lisp.jl, defines all module syntax
	(define-interface, structure, define-structure, etc..),
	defconst now declares _lexically_ scoped constants

	* rep-packages.jl: defines the various interfaces that the rep
	package implements, plus other basic structures

	* rep-repl.jl: implements the default repl, borrows Scheme48's
	idea of using `,' to introduce meta-commands (e.g. to control
	and inspect the state of the module system)

	* rep.jl: use the new repl; try to work out when to `require'
	and when to `load' command line options

	* rep-autoload.jl, autoload.jl: split autoloading into two
	parts, rep-autoload contains decls for the `rep' module,
	autoload contains those for the default user module

	* gaol.jl: modularized; uses an anonymous structure to create
	the sandboxed environment

	* bytecodes.jl, bytecode-defs.jl: split into two modules, no
	longer exports op-FOO constants, instead a macro `(bytecode FOO)'

	* compiler.jl, compiler-vars.jl, compiler-utils.jl,
	compiler-src.jl, compiler-scheme.jl, compiler-rep.jl,
	compiler-opt.jl, compiler-modules.jl, compiler-lap.jl,
	compiler-inline.jl, compiler-const.jl, compiler-bindings.jl,
	compiler-basic.jl, compiler-asm.jl: the compiler has now been
	modularized; it also groks the module configuration forms, and
	can compile for whatever base language (rep, scheme, ..?) a
	module is actually using. Scheme support is currently minimal
	(working but sub-optimal code)

	* scheme.jl, scheme-utils.jl, scheme-syntax.jl, scheme-misc.jl,
	scheme-data.jl: support for interpreting scheme code, any
	modules with `(open scheme)' instead of `(open rep)' will find
	a minimal r4rs scheme environment (without macros)

	* tilde.jl, tar-file-handler.jl, remote.jl, remote-utils.jl,
	remote-rep.jl, remote-rcp.jl, remote-ftp.jl: updated to use new
	method of declaring file handlers (the define-file-handler
	function)

	* ring.jl, mutex.jl, memoize.jl, lisp-doc.jl, disassembler.jl,
	date.jl, cgi-get.jl: modularized

	* define.jl: macroexpand fully, then just scan through lambda
	bodies

2000-04-13  John Harper  <john@dcs.warwick.ac.uk>

        * version 0.11.3

2000-04-11  John Harper  <john@dcs.warwick.ac.uk>

        * init.jl (let): fixed bug of interpreting (let () ..) as a
        named let (due to (symbolp '()))

2000-04-09  John Harper  <john@dcs.warwick.ac.uk>

        * version 0.11.2

2000-03-29  John Harper  <john@dcs.warwick.ac.uk>

	* compiler.jl (compile-file): prevent top-level macro
	expansions being expanded again if we want to see them in their
	original form

	* lisp.jl (define-value): support non-constant variable forms..
	but for how long..?

	* lisp.jl (defmacro, defun, defconst, define-value): now macros
	* compiler.jl (comp-compile-defun, comp-compile-defmacro): deleted

2000-03-24  John Harper  <john@dcs.warwick.ac.uk>

	* remote-ftp.jl: some lisp-1 fixes

2000-03-21  John Harper  <john@dcs.warwick.ac.uk>

	* lisp.jl (call-with-current-continuation): just define-value
	to the value of call/cc instead of using a lambda

	* gaol.jl (gaol-safe-functions): added case

2000-03-20  John Harper  <john@dcs.warwick.ac.uk>

	* mutex.jl: fixed some stupid typos (by Damon Anderson
	<damon@get.topica.com>)

2000-03-14  John Harper  <john@dcs.warwick.ac.uk>

	* lisp.jl (prog2): now a macro
	* compiler.jl (comp-compile-prog2): deleted

	* lisp.jl (setq-default): now a macro
	* compiler.jl (comp-trans-setq-default): deleted

	* lisp.jl (dynamic-wind): defined in terms of call-with-barrier

	* lisp-doc.jl (describe-function-1): handle macros, improper
	parameter lists; some cosmetic improvements

2000-03-13  John Harper  <john@dcs.warwick.ac.uk>

	* compiler.jl (compile-file): only expand macros if the form
	wouldn't be compiled anyway
	(comp-trans-if, comp-trans-and, comp-trans-or): deleted
	(comp-compile-let): deleted

	* lisp.jl (let, let*): now defined as macros, `let' supports
	Scheme's named lets for iteration
	(if, and, or, function): defined as macros

	* define.jl: only expand macros when absolutely necessary;
	handle named lets; handle multi-action setq and setq-default
	forms

2000-03-12  John Harper  <john@dcs.warwick.ac.uk>

	* version 0.11.1

2000-03-11  John Harper  <john@dcs.warwick.ac.uk>

	* lisp.jl (load-all): added back the restriction of not loading
	from the current directory

	* compiler.jl (compile-file): copy permissions from source to
	dest file

2000-03-10  John Harper  <john@dcs.warwick.ac.uk>

	* compiler.jl: compile (null X) using `not', instead of `null'

2000-03-09  John Harper  <john@dcs.warwick.ac.uk>

	* compiler.jl: non-trivial changes to make the compiler
	eliminate intra-function tail recursion. Also fixed some bugs
	when handling defsubst's

	* compiler-opt.jl: modified `jmp X; ... Y: --> jmp X; Y:'
	pattern to handle `return' instructions as well as gotos, and
	to delete until the end of the instruction stream if no
	subsequence label. Also fixed bug stopping the optimization
	being applied

2000-03-08  John Harper  <john@dcs.warwick.ac.uk>

	* compiler.jl (comp-compile-case): don't dup before the default
	branch

2000-03-05  John Harper  <john@dcs.warwick.ac.uk>

	* version 0.11

2000-03-04  John Harper  <john@dcs.warwick.ac.uk>

	* string-util.jl: new file, some string functions (case
	manipulation)

	* dump.jl: replaced most instances of integerp by fixnump

2000-03-01  John Harper  <john@dcs.warwick.ac.uk>

	* dump.jl: dump strings correctly again (still doesn't handle
	non-fixnum numbers though)

	* lisp-doc.jl: use GDBM instead of SDBM (no data size limits)

2000-02-29  John Harper  <john@dcs.warwick.ac.uk>

	* define.jl: bug fixes -- handle interactive decls and doc
	strings

2000-02-28  John Harper  <john@dcs.warwick.ac.uk>

	* define.jl (define-parse): remember in `(define FOO BAR)' to
	scan BAR for internal definitions

2000-02-27  John Harper  <john@dcs.warwick.ac.uk>

	* gaol.jl: added a load more safe functions to the list. Also
	allow `tables' to be required

	* compiler.jl: misc fixes for math stuff. Also fixed
	compilation of transitive comparisons (no guarantee they would
	evaluate all arguments previously)

	* bytecodes.jl, disassembler.jl: deleted op-numeq and
	op-num-noteq. op-lsh changed to op-ash

2000-02-25  John Harper  <john@dcs.warwick.ac.uk>

	* lisp.jl (positivep, negativep, oddp, evenp, abs, %, modulo,
	lcm): new functions (some are just pseudonyms)

	* bytecodes.jl (op-quotient, op-floor, op-ceiling, op-truncate,
	op-round, op-exp, op-log, op-sin, op-cos, op-tan, op-sqrt,
	op-expt): new instructions
	* compiler.jl: generate code for math functions
	* diassembler.jl: grok the math functions

	* sort.jl, date.jl: use `quotient' instead of `/'

2000-02-20  John Harper  <john@dcs.warwick.ac.uk>

	* compiler.jl: remember that define-value defines lexical
	variables. When compiling files, don't read-and-macroexpand in
	both passes, just the first, storing the results for input to
	the second pass

2000-02-19  John Harper  <john@dcs.warwick.ac.uk>

	* threads.jl (with-threads-blocked): now autoloaded

	* gaol.jl (gaol-safe-functions): added define and
	with-internal-definitions

2000-02-17  John Harper  <john@dcs.warwick.ac.uk>

	* lisp.jl (load-all): remove the (broken) restiction on not
	loading from the current directory

	* lisp.jl (prin1-to-string, read-from-string, setcar, setcdr,
	string=, string<, caar, cadr, cadr, cdar, cdar, cddr, cddr,
	caddr, caddr, call-with-current-continuation): changed these
	from macros to functions

	* compiler.jl (caar, cadr, cadr, cdar, cdar, cddr, cddr, caddr,
	caddr, setcar, setcar, setcdr, setcdr, string=, string=,
	string<, string<): generate single instructions for these
	functions

	* remote-rep.jl: make this work again

2000-02-10  John Harper  <john@dcs.warwick.ac.uk>

	* gaol.jl: added macro-environment to safe specials

	* define.jl (with-internal-definitions): new macro, scans its
	body for internal defines
	(define-scan-form): fixed scanning `case' forms

2000-02-09  John Harper  <john@dcs.warwick.ac.uk>

	* lisp.jl (autoload-macro): new function

2000-02-08  John Harper  <john@dcs.warwick.ac.uk>

	* compiler.jl (comp-compile-case): fixed this, wasn't dup'ing
	the key before each comparison, only before the first

	* define.jl: now that macros can find the macro environment
	they were invoked through, it's possible to implement this
	properly, scanning out define's from all suitable forms
	automatically

	* compiler-opt.jl (comp-peephole-opt): fix typo in `jt X; nil
	--> jpt X' pattern

2000-02-06  John Harper  <john@dcs.warwick.ac.uk>

	* mutex.jl: new file, moved the mutexes from threads.jl
	* threads.jl (with-threads-blocked): new macro

	* disassembler.jl, compiler.jl, bytecodes.jl: new instructions
	op-permit, op-forbid

	* threads.jl: removed the thread functions, they're in C code
	now

2000-02-03  John Harper  <john@dcs.warwick.ac.uk>

	* compiler.jl (compile-file): write a newline character at the
	end of the output file

2000-02-01  John Harper  <john@dcs.warwick.ac.uk>

	* memoize.jl (memoize-function): use `equal' hash-tables to
	cache results

	* define.jl (lambda*): macro similar to lambda, but scans out
	internal definitions

	* compiler.jl (comp-constant-function-p,
	comp-constant-function-value): expand macros before testing

2000-01-31  John Harper  <john@dcs.warwick.ac.uk>

	* lisp-doc.jl (documentation): fix for macro objects

	* define.jl: new file, scheme-like `define' macro

	* compiler.jl: handle improper lists in lambda expressions
	(i.e. (foo . bar) == (foo &rest bar))

2000-01-30  John Harper  <john@dcs.warwick.ac.uk>

	* debug.jl: better support for debugging in lexical
	environments

	* compiler-opt.jl (comp-peephole-opt): added pattern `jt X; nil
	--> jpt X'

	* compiler.jl (compile-compiler): compile `sort.jl' as well
	(it's used by compiler-opt)

	* lisp-doc.jl (describe-function-1): dereference closures

	* threads.jl: first attempt at a (very basic) threading
	interface

2000-01-26  John Harper  <john@dcs.warwick.ac.uk>

	* lisp-doc.jl (describe-variable): remove reference to
	current-buffer (not used anyway)

2000-01-24  John Harper  <john@dcs.warwick.ac.uk>

	* compiler.jl (comp-compile-case): support the new `case'
	statement (similar to in scheme)

	* lisp.jl (when): expand to an if statement, not a cond. This
	makes `(when t)' behave consistently with `(if t)' (pointed out
	by Dave Pearson)

	* compiler-opt.jl (comp-peephole-opt): fix error when
	transforming `bind X; refn #0' --> `dup; bind X'

2000-01-23  John Harper  <john@dcs.warwick.ac.uk>

	* bytecodes.jl (op-return, op-unbindall): new instructions (for
	tail call elimination)
	* compiler.jl (compile-form): emit a return instruction at the
	end of each code string
	* compiler-opt.jl (comp-peephole-opt): new patterns to
	back-propagate return instructions, and remove unneeded unbind
	instructions
	* disassembler.jl: output the two new instructions

2000-01-22  John Harper  <john@dcs.warwick.ac.uk>

	* bytecodes.jl: new bytecode version 9.0
	(op-refn, op-setn): lexical address instructions
	(op-refg, op-setg): global lexical instructions
	(op-bindspec): create a special binding (op-bind _always_
	creates lexical bindings now)

	* compiler.jl: separately track lexical and special bindings,
	then generate code as required (i.e. use lexical addressing)

	* compiler-opt.jl (comp-peephole-opt): updated to grok the new
	instructions

	* disassembler.jl: updated for new instructions

2000-01-14  John Harper  <john@dcs.warwick.ac.uk>

	* gaol.jl: removed redefinition of make-timer, added it to list
	of safe functions (since we are a lisp-1)

2000-01-12  John Harper  <john@dcs.warwick.ac.uk>

	* memoize.jl (memoize-function): wrap a function with a cache
	(needs a hash-table implementation to be useful..)

	* tar-file-handler.jl: use a guardian to allow finalization of
	file handles

	* remote.jl (remote-register-file-handle): new function, uses a
	guardian and a function in the after-gc-hook to correctly
	finalize open remote files when they are garbage collected

	* remote-ftp.jl, remote-rep.jl: register file handles for
	finalization

	* lisp.jl (make-guardian): new function, a means for protecting
	objects from being deallocated when they have no references

src/2000-01-09  John Harper  <john@dcs.warwick.ac.uk>

	* version 0.10

2000-01-03  John Harper  <john@dcs.warwick.ac.uk>

	* compiler.jl (comp-compile-defun, comp-compile-defmacro):
	remember the functions being defined

1999-12-31  John Harper  <john@dcs.warwick.ac.uk>

	* tilde.jl: added provide decl

	* lisp.jl (featurep, provide, require): removed (in C again)
	(autoload): a function again

	* init.jl: require libraries instead of loading (in case
	they've been dumped)

	* dump.jl: updated for lisp-1 rep with closures

1999-12-22  John Harper  <john@dcs.warwick.ac.uk>

	* compiler.jl (comp-trans-setq, comp-trans-setq-default):
	signal an error if an odd number of arguments is given

1999-12-12  John Harper  <john@dcs.warwick.ac.uk>

	* version 0.9

	* disassembler.jl (disassemble): escape all control codes when
	printing, not just newlines

1999-12-11  John Harper  <john@dcs.warwick.ac.uk>

	* date.jl (parse-date): fix calculation of day-of-week

	* bytecodes. (op-caar, op-cadr, op-cdar, op-cddr, op-caddr,
	op-cadddr, op-caddddr, op-cadddddr, op-caddddddr,
	op-cadddddddr): new instructions
	* disassembler.jl, gaol.jl: added c..r instructions

	* compiler.jl: optimise constant index nth and nthcdr calls to
	single c...r instructions where possible

	* compiler-opt.jl (comp-peephole-opt): fixed optimisation
	looking for `const; const|dup...'
	(comp-peephole-opt): optimise pairs of car or cdr instructions
	to a single instruction

	* lisp.jl (caar, ..., cddr, caaar, ..., cdddr): new functions

1999-12-10  John Harper  <john@dcs.warwick.ac.uk>

	* rep.jl, debug.jl: use proper readline

	* lisp.jl (in-hook-p): new function
	(add-hook): if variable is unbound, make it special before
	setting it

1999-12-07  John Harper  <john@dcs.warwick.ac.uk>

	* disassembler.jl, compiler.jl, bytecodes.jl (op-enclose): new
	instruction

	* lisp.jl (unless): if the condition evaluates true, then
	return nil, not the value of the condition (this is the
	behaviour in cl and elisp)

1999-12-06  John Harper  <john@dcs.warwick.ac.uk>

	* lisp.jl (letrec): new macro, as in scheme, creates mutually
	recursive bindings

1999-12-05  John Harper  <john@dcs.warwick.ac.uk>

	* version 0.8.1

1999-11-29  John Harper  <john@dcs.warwick.ac.uk>

	* lisp-doc.jl, compiler.jl: fixed the documentation functions
	for unified namespace

1999-11-28  John Harper  <john@dcs.warwick.ac.uk>

	* version 0.8

1999-11-25  John Harper  <john@dcs.warwick.ac.uk>

	* tilde.jl, tar-file-handler.jl, sort.jl, rep.jl,
	remote-rep.jl, remote-rcp.jl, remote-ftp.jl, lisp.jl,
	lisp-doc.jl, gaol.jl, environ.jl, dump.jl, disassembler.jl,
	debug.jl, compiler.jl, compiler-opt.jl, cgi-get.jl,
	bytecodes.jl, backquote.jl, autoload.jl: updated for single
	namespace and scheme-like function semantics

1999-11-21  John Harper  <john@dcs.warwick.ac.uk>

	* gaol.jl (gaol-add-file-handler, gaol-replace-file-handler):
	new functions, allow access to be granted to file handlers
	without letting any operation be performed

1999-11-20  John Harper  <john@dcs.warwick.ac.uk>

	* lisp.jl (string-equal-p, string-less-p): deleted

	* compiler.jl (comp-test-funcall): check if a locally-bound
	function before warning that it's undefined

1999-11-18  John Harper  <john@dcs.warwick.ac.uk>

	* lisp.jl: unless it's already bound, make the _ function
	return it's sole argument (until redefined by gettext module)

1999-11-15  John Harper  <john@dcs.warwick.ac.uk>

	* gaol.jl: wrapped make-timer, rebuild function env after doing
	a safe require, rebuilding environment affects existing
	restricted environments

1999-11-11  John Harper  <john@dcs.warwick.ac.uk>

	* gaol.jl: new file, provides a restricted environment for
	untrusted code

1999-11-10  John Harper  <john@dcs.warwick.ac.uk>

	* disassembler.jl, compiler.jl, bytecodes.jl: handle lexically
	scoped functions (new opcodes and special forms). macrolet form
	is still unimplemented in compiled code

	* tar-file-handler.jl, remote-rep.jl, remote-ftp.jl: updated
	for lexical scoping

	* lisp.jl (features, featurep, provide, require): defined these
	in Lisp now (so they get enclosed)
	(function): this is now a special form

1999-11-01  John Harper  <john@dcs.warwick.ac.uk>

	* tar-file-handler.jl (tarfh-alternative-gnu-tar-programs): new
	variable, a list of alternative programs to check when looking
	for GNU tar

1999-10-24  John Harper  <john@dcs.warwick.ac.uk>

	* version 0.7

1999-10-17  John Harper  <john@dcs.warwick.ac.uk>

	* tar-file-handler.jl: read-only access to files stored in tar
	archives, access files like `foo.tar.gz#tar/bar'; still has
	some problems, but works well enough

1999-10-13  John Harper  <john@dcs.warwick.ac.uk>

	* rep.jl: don't add the current directory to the head of the
	load-path, it's already at the end of the path where it should be

	* lisp.jl (load-all): don't search in the current directory
	(since it's unpredictable)

	* compiler.jl: fix bug of `last' instruction being thought to
	require two arguments

1999-09-14  John Harper  <john@dcs.warwick.ac.uk>

	* version 0.6

	* environ.jl (unsetenv): new function

1999-09-12  John Harper  <john@dcs.warwick.ac.uk>

	* version 0.5

1999-08-31  John Harper  <john@dcs.warwick.ac.uk>

	* version 0.4

1999-08-27  John Harper  <john@dcs.warwick.ac.uk>

	* dump.jl: changed for new string data layout

1999-08-22  John Harper  <john@dcs.warwick.ac.uk>

	* version 0.3

1999-08-21  John Harper  <john@dcs.warwick.ac.uk>

	* compiler.jl (compile-batch): new command line option
	`--write-docs'
	(comp-compile-top-form): remember any declared variables that
	haven't already registered, change the error on finding an
	unregistered constant to a warning

1999-08-16  John Harper  <john@dcs.warwick.ac.uk>

	* version 0.2

1999-08-03  John Harper  <john@dcs.warwick.ac.uk>

	* version 0.1

1999-07-22  John Harper  <john@dcs.warwick.ac.uk>

	* rep.jl (rep): clear the cached input when an error occurs

	* debug.jl (debug-rep): implements a proper terminal-based
	debugger loop

1999-07-07  John Harper  <john@dcs.warwick.ac.uk>

	* remote-rep.jl (remote-rep-read-length): fix this for large
	numbers

1999-07-06  John Harper  <john@dcs.warwick.ac.uk>

	* remote-rep.jl, remote-ftp.jl (remote-rep-lookup-file,
	remote-ftp-lookup-file): new functions, chase symbolic links
	until the actual file is found

	* remote-rep.jl: new file, mostly copied from remote-ftp, but
	uses the rep-remote program (rsh'd onto the remote host) for
	all file access. Supports all file operations (unlike ftp)

	* remote-ftp.jl (remote-ftp-host-user-alist,
	remote-ftp-default-user): deleted
	* remote.jl (remote-host-user-alist, remote-default-user): new
	variables
	(remote-get-user): new function

1999-07-04  John Harper  <john@dcs.warwick.ac.uk>

	* tilde.jl, remote-ftp.jl: handle new operations read-symlink
	and make-symlink (actually, ftp doesn't do make-symlink)

	* compiler.jl (compile-file): preserve `#! ... !#' at start of
	file if present

1999-07-02  John Harper  <john@dcs.warwick.ac.uk>

	* remote-ftp.jl (remote-ftp-empty-cache): new command

1999-06-09  John Harper  <john@dcs.warwick.ac.uk>

	* rep.jl (rep): don't use `read' to read an entire form at
	once, instead use `read-line' to read strings until there's
	enough to parse a whole form

	* pwd-prompt.jl (pwd-prompt): fixed to actually delete the
	line-terminating newline, also print a newline before exiting

1999-06-06  John Harper  <john@dcs.warwick.ac.uk>

	* compiler.jl: generate an intermediate form between Lisp forms
	and bytecodes, a list of instructions and labels. Then run an
	optimisation pass (peephole) over the intermediate code before
	assembling it to bytecodes
	* compiler-opt.jl: new file, implements the low-level
	optimisations. Does peephole and constant-vector layout
	optimisations

	* bytecodes.jl: op-setq now pops the value from the stack.
	Deleted op-pushi-pair, replaced by op-pushi-neg and
	op-pushi-pair-pos, for pushing negative and positive values
	respectively
	* disassembler.jl: updated for new opcodes

	* pwd-prompt.jl: new file, implement pwd-prompt function for
	the console

1999-06-03  John Harper  <john@dcs.warwick.ac.uk>

	* rep.jl: loading a script implies --batch (but not when loaded
	via the -l option). Don't print the banner until immediately
	before entering the read-eval-print loop

1999-05-27  John Harper  <john@dcs.warwick.ac.uk>

	* cgi-get.jl (cgi-get-params): new file, process the
	QUERY_STRING from a CGI get command

1999-05-15  John Harper  <john@dcs.warwick.ac.uk>

	* date.jl (date-day-of-week): new function, given
	date/day/month, gives the day of week
	(parse-date): accept ISO 8601 calendar format

1999-04-28  John Harper  <john@dcs.warwick.ac.uk>

	* compiler.jl (compile-batch): new function

1999-04-19  John Harper  <john@dcs.warwick.ac.uk>

	* compiler.jl (compile-file): minor fix to error handling

1999-03-30  John Harper  <john@dcs.warwick.ac.uk>

	* remote-ftp.jl (remote-ftp-chmod): make errors give a warning
	since some (many?) ftpd's don't support it and it's probably
	mostly harmless

	* compiler.jl (comp-compile-lambda): minor fix

1999-03-17  John Harper  <john@dcs.warwick.ac.uk>

	* rep.jl (rep): don't catch 'quit

1999-03-14  John Harper  <john@dcs.warwick.ac.uk>

	* rep.jl: add the current directory to the load-path

1999-03-12  John Harper  <john@dcs.warwick.ac.uk>

	* rep.jl: any bare command-line arguments are passed to load

1999-03-10  John Harper  <john@dcs.warwick.ac.uk>

	* compiler.jl (compile-file): ensure that the temporary output
	file is deleted

1999-03-07  John Harper  <john@dcs.warwick.ac.uk>

	* compiler.jl (comp-compile-lambda): only put the doc-string in
	the bytecode vector if it wasn't written to the db

	* lisp-doc.jl (documentation): only try to get the value of the
	function or variable if it's actually bound

1999-03-03  John Harper  <john@dcs.warwick.ac.uk>

	* rep.jl: print a message if unknown command-line options are
	encountered

src/1999-02-28  John Harper  <john@dcs.warwick.ac.uk>

	* MAJOR CHANGES: separated all LISP interpreter specific parts
	into a separate library, librep (Read-Eval-Print)

1999-02-12  John Harper  <john@dcs.warwick.ac.uk>

        * tilde.jl: canonicalise the user-home-directory before
        comparing it against the original default-directory

1999-02-02  John Harper  <john@dcs.warwick.ac.uk>

	* compiler.jl (comp-push-label-addr): new function, replaces
	comp-get-label-addr
	(comp-write-raw-op): deleted this function

1999-02-01  John Harper  <john@dcs.warwick.ac.uk>

	* rm-mail-dir.jl (rm-mail-dir-auto-scan-hook): new hook

1999-01-31  John Harper  <john@dcs.warwick.ac.uk>

	* html-decode.jl: only underline links (anchors with href
	field). Add anchors to a list that's returned to the caller
	* html-display.jl (html-display-goto-anchor): new command
	* find-url.jl: support for anchors specified in URLs

	* bytecodes.jl: several pushi instructions
	* compiler.jl (comp-write-raw-op): new function
	(comp-compile-constant): use pushi instructions to compile
	integers where possible
	* disassembler.jl (disassemble): support pushi instructions

1999-01-28  John Harper  <john@dcs.warwick.ac.uk>

	* find-url.jl (find-file-as-url): new command

	* html-display.jl (html-display): if the given URL is nil, and
	the source buffer has a file name, set the URL to the file:
	version of the filename

	* html-decode.jl (html-decode): more bug fixes

1999-01-27  John Harper  <john@dcs.warwick.ac.uk>

	* mime-decode.jl (mime-encode-mmencode): new function, wrapper
	for the base64 and quoted-printable coders, if possible and
	desirable, then an external `mmencode' program is used to do
	the translation

	* find-url.jl, html-display.jl: fix which view to display in

1999-01-26  John Harper  <john@dcs.warwick.ac.uk>

	* rm-mime.jl: bind the `w' prefix in read-mail mode to the
	`html-display-map'

	* html-display.jl (html-display-current-link): search up the
	extent stack correctly
	(html-display-map): autoload'able

	* mime-decode.jl (mime-decode): handle `text/html' MIME parts
	by calling html-decode

	* html-decode.jl: more bug fixes

1999-01-25  John Harper  <john@dcs.warwick.ac.uk>

	* remote-ftp.jl (remote-ftp-close-all): new function
	(remote-ftp-close-host): made interactive

1999-01-24  John Harper  <john@dcs.warwick.ac.uk>

	* remote-ftp.jl: misc fixes to try and handle non-successful
	logins more gracefully; not 100% successful yet..

	* ispell.jl (ispell-kill-process): keep looping while
	accept-process-output times out, not while it doesn't!

	* html-display.jl (html-display-select): handle URL's that are
	specified relative to the root of the current server

1999-01-22  John Harper  <john@dcs.warwick.ac.uk>

	* html-decode.jl: parse <frameset> sections half-heartedly, and
	be slightly more clueful about unnested close tags

1999-01-21  John Harper  <john@dcs.warwick.ac.uk>

	* find-url.jl (find-url-file, find-url-ftp): detect if a file:
	URL contains HTML code, if so decode it

	* html-decode.jl (html-decode): bind html-decode-source and
	html-decode-point to the position of the next item to be
	parsed, called functions may then alter these
	(html-decode:script): skip <script> sections

1999-01-20  John Harper  <john@dcs.warwick.ac.uk>

	* find-url.jl (find-url-asynchronously): new variable, only
	find-url-http takes note of it, calling wget asynchronously
	when it's non-nil

	* html-display.jl (html-display): the OTHER-VIEW parameter may
	be the actual view to display in, or nil, or anything else to
	switch to the other view

1999-01-19  John Harper  <john@dcs.warwick.ac.uk>

	* html-display.jl (html-display): new function, a mode to tie
	find-url and html-decode to form a basic web-browser

	* find-url.jl (find-url-http): new function, uses wget to
	download the url, then if it's html data, html-display to view
	it

	* html-decode.jl: many bug fixes, implemented most list tags

1999-01-18  John Harper  <john@dcs.warwick.ac.uk>

	* html-decode.jl (html-decode): initial version of this module,
	a basic HTML to editor-buffer translator

1999-01-14  John Harper  <john@dcs.warwick.ac.uk>

	* mime-decode.jl (mime-display-part): use name of attachment
	(if given) as name of buffer
	(mime-decode-buffer): fix nil-decoder decoding

	* send-mail.jl (mail-setup): when putting an address in the BCC
	header for the mail-self-blind option, use user-mail-address,
	not (user-login-name)

	* mail-headers.jl (mail-compare-addresses): new function,
	compare two mail addresses

	* rm-misc.jl (rm-reply): when following-up a message, only put
	those address in the CC header that aren't in the To or BCC
	headers

	* mime-decode.jl (mime-decode): don't display parts whose
	bodies contain zero lines
	(mime-decode-insert-stub, mime-save-part): look in content-type
	param lists for file name, as well as in content-disposition
	(though content-disposition takes precedence)

1999-01-13  John Harper  <john@dcs.warwick.ac.uk>

	* keymap.jl (active-keymaps): dereference symbols in the list
	of keymaps
	(map-keymap): deref. symbol in the correct buffer
	(next-event, read-event, describe-key): miscellaneous fixes

1999-01-12  John Harper  <john@dcs.warwick.ac.uk>

	* dired.jl (dired-do-copy): only call summary-update when
	copying to the displayed directory

	* help.jl (describe-function): handle nil doc string

	* buffers.jl (find-file): expand the file name before doing
	anything with it, also if it's a directory, call
	directory-file-name on it

	* remote-ftp.jl: cache more than one directory listing, and
	expire cached directories after X minutes (default X=5).
	(remote-ftp-command): instead of just returning t if the
	command succeeded, signal a file-error if it failed; nothing
	really checked the return value anyway..
	(remote-ftp-open-session): if remote-ftp-login fails (i.e.
	signals an error), close the session before propagating the
	error

1999-01-11  John Harper  <john@dcs.warwick.ac.uk>

	* dired.jl (dired-do-copy, dired-do-rename): set default file
	name to name of source file

	* prompt.jl (prompt-for-file, prompt-for-directory): when
	setting prompt-default-value, call expand-file-name on it

1999-01-10  John Harper  <john@dcs.warwick.ac.uk>

	* edit.jl (save-excursion, save-restriction): use un-interned
	symbols to store temproary values

	* edit.jl (map-extents-at): macro mapping a function over all
	extents containing an arbitrary position

	* lisp-mode.jl (lisp-mode): fix mode-defun-header to match
	macros and defsubsts as well as functions

1999-01-07  John Harper  <john@dcs.warwick.ac.uk>

	* mime-decode.jl (mime-display-part): new function, decodes a
	MIME subpart to a temporary buffer
	* rm-mime.jl: bind C-RET to mime-display-part in read-mail mode

1999-01-07  John Harper  <john@dcs.warwick.ac.uk>

	* tex-mode.jl (tex-mode, latex-mode, plain-tex-mode): make sure
	that when text-mode-hook is called, the major-mode is set to
	its final value

1999-01-05  John Harper  <john@dcs.warwick.ac.uk>

	* ispell.jl: protect against multiple concurrent-readers

1998-12-21  John Harper  <john@dcs.warwick.ac.uk>

	* modes.jl (auto-mode-alist): made .sty suffix use tex-mode

	* diff.jl: some fixes for handling narrowed buffers

	* ispell.jl (ispell-idle-function): minor fix to identifying
	the region to scan (when the buffer is narrowed)

1998-12-16  John Harper  <john@dcs.warwick.ac.uk>

	* cvs.jl (cvs-add): new argument WITH-LOG, controlling whether
	or not to prompt for a log message before adding the file

1998-12-15  John Harper  <john@dcs.warwick.ac.uk>

	* mime-encode.jl: fix keymap autoloading problem

1998-12-09  John Harper  <john@dcs.warwick.ac.uk>

	* miranda.jl (miranda): take program arguments from variable
	miranda-program-args (not including file name)

1998-12-08  John Harper  <john@dcs.warwick.ac.uk>

	* rcs.jl (rcs-callback-with-description): install local keymap
	_after_ calling text-mode. This loses text-mode's bindings,
	should really install the rcs bindings as a minor-mode..

1998-12-04  John Harper  <john@dcs.warwick.ac.uk>

	* prompt.jl (prompt): only add result to prompt-history if it's
	a string (amongst other things)

1998-12-01  John Harper  <john@dcs.warwick.ac.uk>

	* latin-1.jl (insert-latin-1-character): new function, entry of
	latin 1 chars by name

	* tex-mode.jl (tex-mode, latex-mode, plain-tex-mode): fix
	documentation strings

1998-11-29  John Harper  <john@dcs.warwick.ac.uk>

	* loadkeys.jl (global-keymap): no longer buffer-local

	* replace.jl (query-replace): use overriding-local-keymap to
	install the keymap

1998-11-26  John Harper  <john@dcs.warwick.ac.uk>

	* mail-dir.jl (insert-mail-item): fix for when no name
	associated with address

	* tex-mode.jl (latex-mode, plain-tex-mode): added autoload tags

1998-11-25  John Harper  <john@dcs.warwick.ac.uk>

	* edit.jl (quoted-insert): new command, bound to C-q

	* keymap.jl (next-event): new function
	(read-event): new optional arg COOKED

1998-11-24  John Harper  <john@dcs.warwick.ac.uk>

	* help.jl (describe-function): once more run
	substitute-command-keys over the documentation

	* ispell.jl: in misspelt words, bind `C-c C-a' to add the word
	to the personal dictionary, and `C-c C-s' to accept the word
	for the rest of the Ispell session
	(ispell-add-word-for-session, ispell-save-dictionary): new
	commands

1998-11-24  John Harper  <john@dcs.warwick.ac.uk>

	* yacc-mode.jl, text-mode.jl, texinfo-mode.jl, tex-mode.jl,
	summary.jl, shell.jl, sh-mode.jl, send-mail.jl, replace.jl,
	read-mail.jl, rcs.jl, prompt.jl, perl-mode.jl, page-summary.jl,
	modes.jl, mime-encode.jl, mail-dir-summary.jl, loadkeys.jl,
	lisp.jl, lisp-mode.jl, keymap.jl, isearch.jl, info.jl, help.jl,
	gdb.jl, fill.jl, dired.jl, diff.jl, debug.jl, cvs.jl,
	c-mode.jl, asm-mode.jl, add-log.jl: updated for new key binding
	methods

	* ispell.jl (ispell-minor-mode): in the extents of misspelt
	words, bind `C-c RET' and `LMB-Click2' to a command calling the
	interactive ispell on the word

1998-11-23  John Harper  <john@dcs.warwick.ac.uk>

	* ispell.jl (ispell-strip-word): if a stripped prefix or suffix
	doesn't match, assume it's a literal string including a hyphen

1998-11-19  John Harper  <john@dcs.warwick.ac.uk>

	* rcs.jl (rcs-compare-revisions): when the new variable
	rcs-diff-options is set to the symbol `visual', use the
	diff-files command to visually display the differences

1998-11-18  John Harper  <john@dcs.warwick.ac.uk>

	* buffers.jl (insert-buffer): new command

1998-11-14  John Harper  <john@dcs.warwick.ac.uk>

	* c-mode.jl (c-indent-pos): don't recognize a semi-colon as
	terminating a statement unless (ignoring following whitespace)
	it's followed by eol or a comment

1998-11-11  John Harper  <john@dcs.warwick.ac.uk>

	* tex-shell.jl (tex-shell-program, tex-shell-program-args): new
	variables

1998-11-09  John Harper  <john@dcs.warwick.ac.uk>

	* tex-mode.jl (latex-mode, plain-tex-mode): added doc strings

	* page-summary.jl: new file, a command to summarise a buffer by
	the comments at the start of each page

1998-11-07  John Harper  <john@dcs.warwick.ac.uk>

	* sort.jl (sort): when merging lists ensure that equal keys
	retain their original order

1998-11-05  John Harper  <john@dcs.warwick.ac.uk>

	* gdb.jl (gdb-frame-face): new variable, the face used to
	highlight the source line of the current stack frame (instead
	of using the block)

1998-11-01  John Harper  <john@dcs.warwick.ac.uk>

	* buffers.jl (kill-buffer): call kill-buffer-hook with the
	current buffer as the buffer being killed, instead of passing
	it as an argument
	* server.jl, shell.jl: adapt to new calling method for
	kill-buffer-hook

1998-10-31  John Harper  <john@dcs.warwick.ac.uk>

	* tex-shell.jl (bibtex-file, tex-kill-job,
	tex-recenter-output-buffer, tex-print, tex-view,
	tex-show-print-queue): new commands

	* tex-mode.jl (plain-tex-mode): new function, just so there can
	be a plain-tex-mode-hook really

	* shell.jl (shell-kill-buffer-hook): new function, takes most
	of shell-mode-kill, but is put in the kill-buffer-hook so that
	it actually gets called when the buffer is killed..

1998-10-30  John Harper  <john@dcs.warwick.ac.uk>

	* prompt.jl (prompt-for-lisp): kludge to use lisp-complete-sexp
	for completion

	* lisp.jl: add two entries to the format-hooks-alist, `D' and
	`F' for file-name-directory and file-name-nondirectory
	respectively

	* modes.jl (auto-mode-alist): add latex-mode entry
	* tex-mode.jl (latex-mode): derivative of tex-mode, called when
	the buffer looks to contain LaTeX source

	* tex-shell.jl: initial (very basic) attempt at running TeX in
	a subshell

1998-10-29  John Harper  <john@dcs.warwick.ac.uk>

	* completion.jl (complete-at-point, show-completions): these
	replace the -buffer- completion commands. They use the list of
	completion generators completion-hooks to do the real work. The
	default generator is complete-from-buffer
	* lisp.jl (lisp-complete-sexp): this is now just a generator,
	put in the completion-hooks in Lisp buffers

	* prompt.jl (prompt-complete-function,
	prompt-list-completions-function): deleted. If
	prompt-completion-function is `t', call complete-at-point
	(before-prompt-hook): new hook

	* completion.jl (completion-insert): new function to handle
	inserting from a list of completions at the cursor
	(complete-from-buffer, show-buffer-completions): new commands
	* loadkeys.jl (global-keymap): bound complete-from-buffer to
	M-TAB and show-buffer-completions to M-?
	* lisp-mode.jl (lisp-complete-sexp): use completion-insert

	* modes.jl (forward-exp, backward-exp): handle negative COUNTs

	* read-mail.jl (rm-fix-status-info): set buffer-status-id in
	the summary buffer as well (if it exists)

	* completion.jl (completion-abbrev-function): new variable
	(completion-list): call the above hook on all completions, then
	only display the abbreviated versions

	* prompt.jl (prompt-abbreviate-filename): new function, put in
	the completion-abbrev-function when completing in the
	filesystem

1998-10-28  John Harper  <john@dcs.warwick.ac.uk>

	* buffers.jl (make-backup-file-name): new function, used by
	backup-file to find the name of the old version

1998-10-26  John Harper  <john@dcs.warwick.ac.uk>

	* dump.jl (dump-output-strings): output a zero in the new
	`next' field of the Lisp_String structure

1998-10-24  John Harper  <john@dcs.warwick.ac.uk>

	* completion.jl (completion-setup-view): when not creating a
	new view, ensure that the view chosen isn't currently selected

	* ispell.jl (ispell-strip-word): try again to fix this function

1998-10-23  John Harper  <john@dcs.warwick.ac.uk>

	* rm-mail-dir.jl (rm-mail-dir-scan-messages,
	rm-mail-dir-scanner): when invoked by C-k, if an address has no
	real name, prompt for one

1998-10-22  John Harper  <john@dcs.warwick.ac.uk>

	* mime-decode.jl (mime-decode-content-disp): check the length
	of the string before looking for a `;' character

1998-10-20  John Harper  <john@dcs.warwick.ac.uk>

	* rm-mime.jl (rm-mime-display-markers): command to redisplay
	the current message with markers for _all_ MIME parts, bound to
	"D" in read-mail mode

	* keymap.jl (lazy-bind-keys): macro to bind keys in a package
	that has possibly not been loaded

1998-10-19  John Harper  <john@dcs.warwick.ac.uk>

	* ispell.jl (ispell-strip-word): fixed for words consisting of
	a root and nothing else

1998-10-14  John Harper  <john@dcs.warwick.ac.uk>

	* read-mail.jl (rm-get-address-name): new function

1998-10-13  John Harper  <john@dcs.warwick.ac.uk>

	* mime-quoted-printable.jl (mime-encode-quoted-printable):
	implemented this function

	* modes.jl (mode-line-format): add a `%m' as the first
	character

1998-10-12  John Harper  <john@dcs.warwick.ac.uk>

	* rcs-hooks.jl (rcs-file-p): test if the file is a directory
	first

	* dired.jl (dired-create-directory): new command, bound to `+'
	(dired-execute-end): test whether the delete item is a file or
	a directory, then call delete-file or delete-directory
	appropriately

	* remote-ftp.jl (remote-ftp-handler): handle make-directory and
	delete-directory
	* tilde.jl (tilde-file-handler): handle make-directory and
	delete-directory

	* buffers.jl (kill-buffer): delete the buffer from the
	buffer-list even in minibuffer views now (for example, isearch
	uses with this variable)

1998-10-11  John Harper  <john@dcs.warwick.ac.uk>

	* rm-misc.jl (rm-reply): uses the rm-get-msg-header function
	instead of mail-get-header. This works with decoded MIME
	messages

	* send-mail.jl: bind `C-c C-m' to the mime-encode-keymap

	* send-mail.jl (mail-send-hook): defvar'd this hook

	* mime-encode.jl: initial attempt at creating MIME messages

	* mime-decode.jl: minor fixes
	(mime-current-part): new function

1998-10-09  John Harper  <john@dcs.warwick.ac.uk>

	* mime-decode.jl (mime-decode-mark-inlines): new variable

	* mime-decode.jl, rm-mime.jl: support for Content-Disposition
	header, other misc fixes

	* mime-quoted-printable.jl (mime-decode-quoted-printable): this
	function has now been implemented

1998-10-08  John Harper  <john@dcs.warwick.ac.uk>

	* rm-mime.jl, mime-quoted-printable.jl, mime-decode.jl,
	mime-base64.jl: initial support for decoding of MIME messages.
	The quoted-printable stuff is unimplemented; various shortcuts
	in mime-decode as well

	* read-mail.jl (rm-display-current-message, rm-proxy-folder):
	support for rendering messages to a temporary buffer for
	display (used for MIME for example)

	* rm-summary.jl (rm-summary-view): never return a buffer, only
	a view

	* compiler.jl (comp-trans-require): tranform to evaluate
	embedded require forms before compiling them

1998-10-07  John Harper  <john@dcs.warwick.ac.uk>

	* send-mail.jl (sendmail-send-message): when handling FCC
	headers, temporarily mangle ^From_ to >From_ while saving the
	message

1998-10-05  John Harper  <john@dcs.warwick.ac.uk>

	* read-mail.jl (rm-command-items): use rm-with-summary instead
	of just switching buffers

1998-10-04  John Harper  <john@dcs.warwick.ac.uk>

	* rm-summary.jl, rm-output.jl, rm-mail-dir.jl, read-mail.jl:
	support for marking messages then operating on the selected
	messages. Currently only the `C-k' and `s' commands do this

	* cvs.jl: use open-buffer to create buffers

	* summary.jl (summary-unmark-all): call the after-marking
	vector of each message unmarked
	(summary-unmark-item): call after-marking even if the message
	status didn't change

1998-10-02  John Harper  <john@dcs.warwick.ac.uk>

	* rcs.jl (rcs-call-callback): don't truncate the log message at
	the cursor position, use all the buffer (less any trailing
	newlines) 

	* buffers.jl (read-file-into-buffer): assume that the
	read-file-hook, if successful, sets default-directory
	* gzip.jl, dired-hooks.jl: the functions put in the
	read-file-hook now set the default-directory

1998-10-01  John Harper  <john@dcs.warwick.ac.uk>

	* rcs.jl (rcs-process, rcs-output-buffer): deleted these
	variables, all processes and buffers are created on demand (to
	help garbage collection)

1998-09-30  John Harper  <john@dcs.warwick.ac.uk>

	* html-style.jl: require maildefs (for user-mail-address)

	* remote-ftp.jl (remote-ftp-prompt-regexp): new variable

	* ispell.jl (ispell-region-1): fix some bugs in how the
	ispell-ignore-word-hook is used

	* compiler.jl (comp-fold-constants): does what it says, in a
	simple sort of way

1998-09-29  John Harper  <john@dcs.warwick.ac.uk>

	* windows.jl, minor-major.jl, ispell.jl, diff.jl: use `defface'
	macro to declare/define all faces

	* compiler.jl (comp-compile-cond): where a condition is a
	constant, force it to be either t or nil. When dead code is
	detected in conditionals, ignore it correctly
	(comp-trans-defvar): source transformation to make `defvar'
	work at other than the top-level

	* lisp.jl (defface): new macro
	* lisp-mode.jl: set indentation property of `defface'

1998-09-22  John Harper  <john@dcs.warwick.ac.uk>

	* sm-mail-dir.jl (expand-mail-aliases): attempts to expand
	local addresses in the address book, e.g. if I put "john" in a
	header, it looks for john@MY.DOMAIN, and if it exists, expands
	it with the real name

	* mail-dir.jl: minor fixes
	* mail-dir-summary.jl: miscellaneous minor fixes
	(mds-edit-field): used to move to or create new fields when
	editing records

	* help.jl (describe-function): don't pass the documentation
	through substitute-command-keys anymore

	* maildefs.jl (mail-domain-name): new variable

1998-09-21  John Harper  <john@dcs.warwick.ac.uk>

	* mail-dir.jl: aliases are now kept in the mail-address-list
	variable, they're records with :name and :net-alias fields.
	This involved changing a few function names..

	* mail-dir-summary.jl: removed the address/alias distinction
	and added an edit command, this dumps you to a buffer
	containing a pretty-printed copy of the record, you edit the
	record (i.e. adding any new fields or whatever) then commit the
	changes with C-c C-c

	* compiler.jl, dump.jl: only print the name of the source file
	in the header, not all the useless stuff I used to

	* compiler.jl, bytecodes.jl: op-set and op-fset are now more
	regular

	* summary.jl (summary-get-index): return nil if the item
	specified isn't actually displayed
	(summary-highlight-index): only delete the extent of the
	highlighted line
	(summary-update): call delete-all-extents
	(summary-update-item, summary-goto-item): only proceed if the
	item is actually displayed

	* read-mail.jl (rm-format-alist): moved the documentation of
	the default format conversions here (instead of
	rm-summary-format) 
	(rm-saved-flags): list of message properties that should be
	saved with the message (in the x-jade-flags-v1 header) when
	they're non-nil
	(rm-auto-delete-rules): deleted
	(rm-after-import-rules, rm-after-parse-rules): new variables
	(rm-set-flag, rm-clear-flag, rm-test-flag): deleted
	(rm-message-put, rm-message-get): replace the flag functions,
	now a alist of properties for each message
	(rm-status-alist): map non-nil message properties to strings to
	put into the staus line

	* rm-restrict.jl: add a load more standard functions as rules,
	basically all conditionals and most arithmetic operators
	(defrule): rule bodies may now have more than a single form
	(put, get): `rules' to access the messsage's plist
	(attribute): now just a synonym for `get'

	* rm-thread.jl (rm-sort-predicates): added a predicate `score',
	this sorts by the value of each message's `score' property

	* rm-summary.jl (rm-summary-print-item): if the message has a
	`summary-face' property use it as the face of the summary line

	* rm-misc.jl, rm-output.jl: use message properties not flags

	* mail-dir.jl: minor fixes for last set of changes

1998-09-18  John Harper  <john@dcs.warwick.ac.uk>

	* mail-dir.jl: made the database a lot more general. Each
	record is now a one-to-many mapping from keys to values.
	Currently used keys are :net (email addresses) and :name (real
	names)
	* mail-dir-summary.jl: fixed for the new database. Needs a lot
	of work to allow arbitrary fields to be manipulated

	* rm-restrict.jl: fixed a lot of confusion. The
	rm-rule-function property was being called rm-rule-symbol in a
	lot of places

1998-09-17  John Harper  <john@dcs.warwick.ac.uk>

	* read-mail.jl (rm-format-alist): the %D and %M formats don't
	do %02d formatting anymore, just %d

1998-09-13  John Harper  <john@dcs.warwick.ac.uk>

	* ispell.jl (ispell-ignore-word-hook): new hook, called
	immediately prior to spell-checking each word, if the hook
	returns t, don't check the word and assume it's ok

	* tex-mode.jl (tex-spell-ignore-word-hook): don't spell-check
	any words preceded by a backslash (i.e. TeX commands)

1998-09-12  John Harper  <john@dcs.warwick.ac.uk>

	* init.jl: load files for the window- and operating-system,
	the relevant name prefixed by "ws-" and "os-" respectively

	* ispell.jl (ispell-handle-failure-interactively): highlight
	the misspelt word in the buffer as well as in the list of
	options display

	* ws-x11.jl: new file, initialisation for X11, contains
	functions for the block-status, after-kill, and pre-yank-hook's
	* edit.jl: moved all X11 specific code to ws-x11.jl

	* edit.jl (mouse-select): only kill the block on a single
	click, if that click is _inside_ the marked region
	(mouse-select-drag): same as above, but only when the current
	mouse position is the same as the position of the first click

1998-09-10  John Harper  <john@dcs.warwick.ac.uk>

	* ispell.jl (ispell-highlight-misspellings): support for
	aborting if input arrives in the middle of spell-checking

1998-09-09  John Harper  <john@dcs.warwick.ac.uk>

	* ispell.jl (ispell-add-word-to-dictionary): new command
	(ispell-cleanup-before-exit): added to the before-exit hook,
	saves the dictionary and kills the process

1998-09-08  John Harper  <john@dcs.warwick.ac.uk>

	* ispell.jl (ispell-minor-mode): spell-checking in idle-time
	(ispell-set-dictionary): new command

	* ispell.jl: first attempt at interacting with Ispell,
	currently two commands `ispell-region' and `ispell-buffer'

1998-09-07  John Harper  <john@dcs.warwick.ac.uk>

	* info.jl (info-highlight-buffer): end highlighted menu entries
	only by ":" not by "."
	(info-keymap): bind "b" to start-of-buffer not
	goto-start-of-buffer

1998-09-06  John Harper  <john@dcs.warwick.ac.uk>

	* read-mail.jl (rm-format-alist): add a `%A' format, like `%a'
	but with five characters (all attributes) not three. For the
	`%a' make deleted higher precedence than unread

	* buffers.jl (find-file): if the buffer's name would be null,
	look for the name of the parent

	* dired.jl (dired-mode): moved the main parts of `dired' to
	this function. Calling `dired-mode' on a buffer whose
	buffer-file-name points to a directory puts it into Dired mode
	* dired-hooks.jl: use the read-, write-, and insert-file hooks
	instead of the find-file-hook. This allows the buffer to be
	reverted correctly. Inserting and writing to directories signal
	errors

1998-09-05  John Harper  <john@dcs.warwick.ac.uk>

	* gzip.jl (gzip-write-file): fix stupid bug
	(auto-compression-alist): add support for bzip2 compression

1998-09-04  John Harper  <john@dcs.warwick.ac.uk>

	* remote-ftp.jl: make "550" a failure, not a recoverable error

1998-09-02  John Harper  <john@dcs.warwick.ac.uk>

	* remote-ftp.jl: fixes to password handling while logging in:
	only caches passwords that are actually valid, has a sane
	method of retrying failed attempts, and allows the retrying
	process to be aborted properly

1998-09-01  John Harper  <john@dcs.warwick.ac.uk>

	* remote-ftp.jl (remote-ftp-command): now transparently
	reconnects when the server times out

	* diff.jl (diff-backup, diff-auto-save): when prompting, start
	with the name of the current file

1998-08-31  John Harper  <john@dcs.warwick.ac.uk>

	* diff.jl: new file, visual diff mode. Commands `diff',
	`diff-buffers', `diff-backup' and `diff-auto-save'.

	* replace.jl (query-replace, replace-all): put quotes around
	the search string when prompting for its replacement

	* help.jl (describe-function): run substitute-command-keys over
	the documentation string

1998-08-30  John Harper  <john@dcs.warwick.ac.uk>

	* info.jl (info-find-node): fix bug with files without indirect
	lists being reloaded all the time

	* prompt.jl (prompt): set the glyph-table of the title extent
	to the current glyph table (in case a different table is used
	for the prompt)

1998-08-29  John Harper  <john@dcs.warwick.ac.uk>

	* prompt.jl (prompt-start-of-line): new command, bound to `C-a'
	in prompts

	* windows.jl (enlarge-view): fix bug of not being able to
	enlarge minibuffer (unless more than two views are present)

	* prompt.jl: don't use set-status-message to display title.
	Instead insert the title at the beginning of the prompt,
	covered by a read-only extent (with prompt-title-face).
	Also enlarge the minibuffer to two lines temporarily if it's a
	single line (to avoid being clobbered by messages)

1998-08-28  John Harper  <john@dcs.warwick.ac.uk>

	* yacc-mode.jl: new major mode, uses indented-text for yacc
	grammar, and embeds minor-major c-modes for all C regions
	* modes.jl (auto-mode-alist): added yacc-mode

	* send-mail.jl (send-mail-find-header): avoid the read-only
	header-separator

	* minor-major.jl (minor-major-mode, delete-minor-major-mode):
	new file, allows major-modes to be set for _regions_ of the
	current buffer (uses extents and the `catch-variables'
	property)

1998-08-27  John Harper  <john@dcs.warwick.ac.uk>

	* buffer-summary.jl: don't print the minor-modes

	* modes.jl (mode-name, minor-mode-alist, mode-line-format): new
	variables
	(minor-mode-list, add-minor-mode, remove-minor-mode,
	minor-mode-installed-p): deleted

	* cvs.jl, edit.jl, fill.jl, rcs.jl: new method of putting minor
	mode names in mode-line

	* read-mail.jl: put message flags in mode-name, needs more work
	* rm-summary.jl: change mode-line message

	* rm-summary.jl (rm-summarize): set y-scroll-step-ratio to two
	in each summary buffer (scroll by half the window)

	* read-mail.jl (rm-auto-sort-key-alist): new variable

	* info.jl (info-locate-file): don't search the current directory
	(info-find-node): a couple of fixes in file selection

	* gzip.jl (auto-compression-mode): only display message when
	FORCE-ACTIVE isn't t

1998-08-26  John Harper  <john@dcs.warwick.ac.uk>

	* info.jl (info-menu-face, info-xref-face): new variables

	* maildefs.jl (mail-highlight-face): new variable

	* buffers.jl (buffer-read-only-p, set-buffer-read-only):
	implemented in lisp now

	* info.jl: highlights menus and links in underline-face

	* isearch.jl: highlights the selection in highlight-face

	* maildefs.jl (mail-highlighted-headers): changed
	documentation, made more general

	* print.jl (print-mode-alist): added more entries

	* prompt.jl (prompt): setq the glyph-table, don't use
	set-buffer-glyph-table

	* read-mail.jl: add extents for all mail-highlighted-headers

	* send-mail.jl: add a read-only extent covering the
	mail-header-separator string

	* summary.jl (summary-highlight-index): use an extent

	* windows.jl (underline-face, bold-face, italic-face): more
	default faces, bold and italic aren't supported yet

1998-08-19  John Harper  <john@dcs.warwick.ac.uk>

	* rm-mail-dir.jl (rm-mail-dir-scanner): rewritten. added
	parameters FOLDER (unused) and ALL-ADDRESSES. Only scan
	recipients when ALL-ADDRESSES is non-nil
	(rm-mail-dir-scan-current): prefix arg means scan all addresses

	* read-mail.jl (rm-format): new function, format a string using
	a message and the mail-local format specifiers

	* rm-misc.jl (rm-citation-format): format string for citation
	line in quoted messages

	* send-mail.jl (send-mail-mode): set paragraph-separate and
	paragraph-start to understand the yank-prefix and
	header-separator

1998-08-18  John Harper  <john@dcs.warwick.ac.uk>

	* pwd-prompt.jl (pwd-prompt): no need for dubious hacks
	anymore, use the prompt-glyph-table variable instead

	* prompt.jl (prompt-complete-function, prompt-list-completions-
	function): new variables. When non-nil these completely
	override the prompt-complete and prompt-list-completions
	functions
	(prompt-word-regexps): deleted this variable, a waste of space
	(prompt-glyph-table): new variable, the glyph table to use in
	prompt buffers
	(get-prompt-buffer, return-prompt-buffer): deleted

	* lisp-mode.jl (lisp-complete-sexp): new optional parameter
	ONLY-DISPLAY
	(lisp-show-sexp-completions): new function, bound to M-?

1998-08-17  John Harper  <john@dcs.warwick.ac.uk>

	* read-mail.jl (rm-open-mailbox): bind enable-local-variables
	to nil while calling find-file. Otherwise a mail message
	containing a trailing local variables section could cause
	problems..

1998-08-14  John Harper  <john@dcs.warwick.ac.uk>

	* completion.jl (completion-setup-view): if reusing an existing
	view, make sure that one directly above the minibuffer is used

1998-08-12  John Harper  <john@dcs.warwick.ac.uk>

	* dired.jl (dired-find-file, dired-find-file-other-view,
	dired-display-file): these now find all _selected_ files

1998-08-11  John Harper  <john@dcs.warwick.ac.uk>

	* miranda.jl (miranda): ensure that a local-file-name is passed
	to the subprocess

	* find-autoloads.jl (autoload-do-magic): allow macros to have
	autoload tags
	* rm-restrict.jl (defrule): added autoload tag

	* buffers.jl (kill-buffer): fix bug (taking the new current
	buffer from the buffer-list of the current view, not the view
	being altered)

	* rm-restrict.jl (sender-alias): new rule, tests if a message
	was sent by an address in a named alias

	* completion.jl (completion-column-extra): new variable,
	controls the column width in completion listings

1998-08-10  John Harper  <john@dcs.warwick.ac.uk>

	* completion.jl: new file, generalises the old code in
	prompt.jl for displaying completions
	* prompt.jl: use the new completion functions
	* lisp-mode.jl (lisp-complete-sexp): new command bound to M-TAB

	* read-mail.jl (rm-auto-delete-rules): new variable, a list of
	rules that are applied to newly-received messages. If any
	match, the message is marked as deleted

	* rm-restrict.jl (rm-apply-rules): new function, similar to
	rm-apply-rule but takes a list of rules to test

	* remote-ftp.jl (remote-ftp-handler): support for opening
	remote files with open-file. All access types are supported
	(read, write, append), a local copy is used so all operations
	on this copy should work

	* remote.jl (remote-file-handler): slight change to the
	conventions for working with remote file handles

1998-08-09  John Harper  <john@dcs.warwick.ac.uk>

	* help.jl (apropos-variable): quote the query string when
	displaying results

	* windows.jl (scroll-next-view): pass the other-view an
	argument `t' to stop it altering the size of any views

	* cvs.jl (cvs-add-change-log-entries): now prompt for the name
	of the ChangeLog file associated with each directory

1998-08-06  John Harper  <john@dcs.warwick.ac.uk>

	* dict.jl (dict-lookup): quote the word being queried

1998-08-02  John Harper  <john@dcs.warwick.ac.uk>

	* add-log.jl, buffer-summary.jl, buffers.jl, compile.jl,
	info.jl: miscellaneous changes for buffer-file-name returning
	nil if the buffer has no file, not the null string as before

1998-08-01  John Harper  <john@dcs.warwick.ac.uk>

	* buffers.jl (find-file): check that the file exists before
	testing it's timestamp
	(save-file): signal an error if the buffer has no file-name

1998-07-31  John Harper  <john@dcs.warwick.ac.uk>

	* shell.jl (shell-output-filter, shell-output-limit,
	shell-echos, shell-last-output): new variables
	(shell-filter): new function, the default output stream
	(shell-enter-line): uses telnet.jl's method: if at the end of
	the buffer, send everything after the position of the last
	output, otherwise resort to prompt-matching

	* telnet.jl: moved most of the funky output-filtering to
	shell.jl, password prompt grabbing is now done via the
	shell-output-filter variable. Also use the shell's send-line
	function exclusively

1998-07-17  John Harper  <john@dcs.warwick.ac.uk>

	* compiler.jl (comp-compile-lambda): if a list-style
	interactive decl. is found, see if it might be worth compiling
	it (if the function is in the `comp-top-level-compiled' list)

1998-07-10  John Harper  <john@dcs.warwick.ac.uk>

	* read-mail.jl (read-mail-folder): before adding the new folder
	to the rm-open-folders list, remove any folders that are no
	longer pertinent
	* rm-summary.jl (rm-configure-views): fix the code to ensure
	that the rm-open-folders list has the correct view for the
	folder being configured

	* dict.jl (dict-lookup): new file, a simple interface to the
	dict(1) client (that speaks the Dictionary Server Protocol)

1998-07-09  John Harper  <john@dcs.warwick.ac.uk>

	* thesaurus.jl (thesaurus-lookup-word, thesaurus-show-words):
	new file, two commands for accessing the "th" thesaurus front
	end

	* edit.jl (mouse-yank-at-point): new variable, when t (the
	default), yank-to-mouse doesn't move to the mouse position
	before yanking

1998-07-08  John Harper  <john@dcs.warwick.ac.uk>

	* sh-mode.jl (sh-get-basic-indent): skip blank lines

	* read-mail.jl (rm-append-inbox): be sure to return zero if no
	new messages exist, but no errors occurred (not nil as before)
	(rm-get-mail-for-box): be sure to return the number of
	messages, also make sure that all inboxes are used

	* maildefs.jl (mail-find-inboxes): expand inbox names relative
	to mail-folder-dir if they're not absolute

1998-07-07  John Harper  <john@dcs.warwick.ac.uk>

	* edit.jl (insert-block): renamed as yank-block; now sets
	yank-last-item so that yank-next works as would be expected
	(yank-get-string): removed NOT-BLOCK parameter; under X11 only
	returns the selection if it's not owned by us (so no yanking
	unkilled blocks anymore)
	(yank, yank-rectangle): removed DONT-YANK-BLOCK arg
	(yank-next): should work correctly when yank-last-item is nil
	* loadkeys.jl: bound RMB-Click1 to copy-block-as-kill

	* edit.jl (paragraph-start): new variable, finer control over
	paragraph definition
	(forward-paragraph): use paragraph start
	* c-mode.jl, lisp-mode.jl, perl-mode.jl, sh-mode.jl,
	tex-mode.jl, texinfo-mode.jl: set paragraph-start and
	paragraph-separate to sensible values

	* dired.jl (dired-directory-files): new variable, defines how
	the list of files is created
	(dired): new optional arg, the value of the above variable

1998-07-06  John Harper  <john@dcs.warwick.ac.uk>

	* modes.jl (auto-mode-alist): added sh-mode entries

1998-07-04  John Harper  <john@dcs.warwick.ac.uk>

	* disassembler.jl (disassemble): fixed for bytecode objects
	that have less than six elements

	* modes.jl (mode-comment-header): new variable. Provides a
	simple method of defining how one-line comments are introduced
	in a file
	* asm-mode.jl, lisp-mode.jl, texinfo-mode.jl, tex-mode.jl: use
	mode-comment-header

	* cvs.jl: add autoload tags for most commands

	* rcs.jl (rcs-mode): replaces both the rcs-controlled-buffer
	and rcs-current-info variables in one fell swoop

	* perl-mode.jl: new file. Inherits a lot of code (and the
	related problems?) from c-mode
	* c-mode.jl: recognize $ and @ characters in symbols to help
	perl-mode, improve comment handling
	* modes.jl (auto-mode-alist, interpreter-mode-alist): added
	regexps for perl-mode

	* compile.jl (compile-push-directory-regexp,
	compile-push-directory-expand): make this work properly (match
	the `make[X]:' at the start of the line, not just `make:')

	* help.jl, find-autoloads.jl, dump.jl, compiler.jl: change
	miscellaneous `X-dir' variables to `X-directory' (jade-dir,
	lisp-lib-dir, ..)

1998-07-01  John Harper  <john@dcs.warwick.ac.uk>

	* modes.jl (defun-at-point): check for null mode-defun-header

	* add-log.jl (change-log-date-format,
	change-log-date-match-format): new variables, controls how the
	dates in ChangeLog separators are constructed and compared

Mon Jun 29 09:55:55 1998  John Harper  <john@dcs.warwick.ac.uk>

	* cvs.jl (cvs-add-change-log-entries): new function, adds
	empty change log entries for all selected files

	* add-log.jl (add-change-log-entry): added two optional args
	FILE-LIST and FUNCTION-LIST. These define the header of the
	inserted entry. When called interactively they default to the
	basename of the current file, and the name of the current
	function definition

Thu Jun 25 00:50:35 1998  John Harper  <john@dcs.warwick.ac.uk>

	* loadkeys.jl: use find-matching-bracket as a command, not
	called as a function

	* help.jl (apropos-output): new function, used by
	apropos-function and apropos-variable to format the list of
	symbols and their documentation

Mon Jun 22 09:22:53 1998  John Harper  <john@dcs.warwick.ac.uk>

	* read-mail.jl (rm-add-mailbox, rm-subtract-mailbox,
	rm-replace-all-mailboxes): check for null mailbox argument
	(rm-append-save-and-delete-file): new function
	(rm-append-inbox): cleaned up. Also will append .newmail-FOO
	files that it finds lying around from previous attempts

	* rm-thread.jl (rm-thread-folder, rm-sort-folder): handle case
	of an empty folder without signalling an error, just do very
	little

	* mail-headers.jl (mail-parse-date): correctly handle two-digit
	years again

Sun Jun 21 01:17:47 1998  John Harper  <john@dcs.warwick.ac.uk>

	* find-url.jl (find-url-ftp): implemented by rewriting the url
	as a remote filename, then calling find-file
	(find-mailto-url): renamed as find-url-mailto for consistency
	(find-url-external-command): redirect all standard streams to
	/dev/null to allow the shell process to exit cleanly

	* sh-mode.jl (sh-indent-line): act on "else" and "elif" tokens

	* gzip.jl (auto-compression-alist, auto-compression-mode):
	generalised this code, also allow it to be explicitly enabled
	and disabled

	* info.jl: minor changes for modified gzip.jl

Sat Jun 20 16:15:41 1998  John Harper  <john@dcs.warwick.ac.uk>

	* rm-restrict.jl (rm-apply-rule): new function, allows a rule
	to be applied to a single specified message

	* rm-thread.jl (rm-sort-folder): allow sort keys to specify
	order of sorting. Misc. other fixes
	* read-mail.jl (rm-install-messages): if a sort key is defined
	for the folder, use it

	* rm-output.jl (rm-auto-archive-alist, rm-auto-archive-folder,
	rm-archive-folder): support for saving messages by matching
	rules, both interactively, and pre-defined
	* read-mail.jl, rm-summary.jl: bind "a" to rm-archive-folder
	and "A" to rm-auto-archive-folder. Change binding of
	rm-sort-folder to "G"

Fri Jun 19 16:51:54 1998  John Harper  <john@dcs.warwick.ac.uk>

	* remote-ftp.jl (remote-ftp-output-filter): only display hash
	characters when remote-ftp-display-progress is t

Wed Jun 17 17:11:10 1998  John Harper  <john@dcs.warwick.ac.uk>

	* isearch.jl (isearch-push-match): small fix

Tue Jun 16 12:02:50 1998  John Harper  <john@dcs.warwick.ac.uk>

	* buffers.jl (save-file-as, insert-file): change messages
	slightly

Sun Jun 14 11:58:46 1998  John Harper  <john@dcs.warwick.ac.uk>

	* remote-ftp.jl (remote-ftp-bad-msgs): added invalid command
	message
	(remote-ftp-invalidate-directory): wholesale invalidation of
	the directory cache. Called by most commands

	* remote-ftp.jl (remote-ftp-ls-format): new variable

	* remote.jl (remote-file-regexp): only allow sensible
	characters in user and host names

	* remote-ftp.jl (remote-ftp-host-user-alist): map host names to
	default users
	(remote-ftp-default-user): username to use when unspecified
	(remote-ftp-get-user): new function
	(remote-ftp-output-filter): display raw hash marks
	(remote-ftp-get-file-details): use `ls -la' not `dir'

	* remote-ftp.jl: fix remote file copying

Sat Jun 13 11:10:50 1998  John Harper  <john@dcs.warwick.ac.uk>

	* remote-ftp.jl (remote-ftp-passwd-alist,
	remote-ftp-get-passwd, remote-ftp-add-passwd): password caching
	(remote-ftp-bad-msgs): attempt to differentiate between success
	and soft-failures
	(remote-ftp-chmod): attempts to use the `chmod' command
	(remote-ftp-file-modes): parse mode string to permission bits
	(remote-ftp-display-progress): when t, use hash marks
	(remote-ftp-transfer-type): allow binary or ascii transfers;
	should allow this to be set by file extension

Fri Jun 12 17:34:16 1998  John Harper  <john@dcs.warwick.ac.uk>

	* prompt.jl (prompt-next-history, prompt-previous-history):
	check for (null prompt-history)

	* pwd-prompt.jl (pwd-prompt): bind prompt-history to nil to
	prevent passwords being stored

	* remote-ftp.jl (remote-ftp-max-sessions,
	remote-ftp-anon-users, remote-ftp-anon-passwd): new variables

	* remote-ftp.jl: new file, an FTP backend for accessing remote
	files; seems to work quite well

	* remote-rcp.jl: new file, split from remote.jl. Doesn't work
	very well

	* mail-headers.jl (mail-parse-date): made a lot more agreeable
	in what it will parse

	* debug.jl (debug-error-entry): always print backtrace

Wed Jun 10 08:49:52 1998  John Harper  <john@dcs.warwick.ac.uk>

	* isearch.jl: many changes. Now uses the minibuffer, highlights
	the current match, and doesn't use a recursive edit

	* remote.jl: initial attempt at providing remote file access.
	Currently just a framework and a pathetic example of using rcp
	to implement a backend

	* cvs.jl (cvs-buffer, cvs-output-buffer): deleted, now we
	create buffers as required
	(cvs-buffer, cvs-output-buffer): new functions, find or create
	the two buffers used by cvs-mode
	(cvs-default-directory): working directory, needed since there
	may or may not be a *cvs* buffer

	* shell.jl (shell-mode-kill): uses kill-all-local-variables to
	clean up after itself

	* gdb.jl: install our own callback function that does some
	cleanup at process exit. Allows *gdb* to be reclaimed. Also set
	buffer-status-id to a meaningful string

	* buffers.jl (default-directory): set its permanent-local
	property

	* rm-misc.jl (rm-forward): fix post-send actions

Mon Jun  8 09:50:29 1998  John Harper  <john@dcs.warwick.ac.uk>

	* fill.jl (fill-area): another attempt at fixing this function,
	I think I may have it now

	* print.jl (print-build-shell-command): ensure that a local
	file name is used when printing to a file

	* edit.jl (yank-next): initially insert the second most
	recently yanked item, not the first

	* loadkeys.jl (numeric-arg, negative-arg, universal-arg):
	progagate the last-command variable

	* c-mode.jl (c-mode): adjust mode-defun-header slightly

	* help.jl: deleted the help-buffer variable, find and
	initialise the buffer dynamically to help gc

	* buffers.jl (kill-current-buffer): new function

	* mail-dir-summary.jl (mds-alias-buffer, mds-address-buffer):
	deleted these variables; allow the buffers to be gc'd

	* prompt.jl (y-or-n-p): use the original value of keymap-path
	plus the special bindings

	* buffers.jl (rename-buffer): new command

Sun Jun  7 14:57:12 1998  John Harper  <john@dcs.warwick.ac.uk>

	* edit.jl (mouse-select-drag): preserve type of block when
	dragging status lines

	* compiler.jl: added source transform to handle setq-default
	special form

	* modes.jl (mode-symbol-regexp, mode-defun-header,
	mode-defun-footer): new buffer-local variables
	(forward-exp, backward-exp): don't call goto explicitly, use
	the `@' interactive flag
	(symbol-at-point, defun-at-point): new functions, give the
	current symbol or function-name respectively
	(start-of-defun, end-of-defun, mark-defun): new functions
	* loadkeys.jl: C-M-a to start-of-defun, C-M-e to end-of-defun,
	C-M-h to mark-defun
	* c-mode.jl, lisp-mode.jl: define the new variables

	* windows.jl (expand-view): fixed

	* help.jl (describe-function, describe-variable): use the value
	from symbol-at-point as the starting value of the prompt

	* prompt.jl (prompt-for-symbol, prompt-for-lisp,
	prompt-for-function, prompt-for-variable, prompt-for-command):
	all now take an extra optional argument, the initial contents
	of the prompt

	* tilde.jl: use setq-default when fixing default-directory

Sat Jun  6 16:11:57 1998  John Harper  <john@dcs.warwick.ac.uk>

	* windows.jl (goto-next-view): next-view now returns inactive
	minibuffer views, so check for this
	(scroll-next-view): use other-view instead of next-view, should
	really be called scroll-other-view
	(enlarge-view): allow minibuffer views to be sized, now the
	bottom _two_ views resize into the view above them

	* edit.jl (mouse-pos): add a check with posp
	(goto-mouse): return nil or t a la translate-pos-to-view
	(mouse-select): handle selecting a status line
	(mouse-select-drag): allow dragging status line to resize views

Fri Jun  5 10:21:32 1998  John Harper  <john@dcs.warwick.ac.uk>

	* rm-restrict.jl (rm-rule-symbol): made into a macro

	* compiler.jl (compile-file): ensure that the output file ends
	in .jlc; expand all top level uses of macros. Also change how
	eval-when-compile works (a default macro definition for it)

	* rm-restrict.jl (defrule): now fully expands the rule. This
	allows files of defrule forms to be compiled down to bytecode
	(rm-defrule): renamed as define-rule

	* disassembler.jl (disassemble): fix disassembly of nested
	bytecode objects

	* info.jl: deleted the info-buffer variable, all state is now
	local to the *Info* buffer. This allows multiple info sessions
	to run concurrently, and for all buffers to be gc'd (the info
	function with a prefix arg creates a new info buffer)

	* compile.jl (compile-buffer): deleted this global variable,
	allows *compilation* buffers to be garbage collected

Thu Jun  4 14:53:30 1998  John Harper  <john@dcs.warwick.ac.uk>

	* prompt.jl (prompt-complete): pass prompt-list-fold-case along
	to complete-string

	* buffers.jl, bytecodes.jl, compiler.jl, disassembler.jl,
	environ.jl, keymap.jl, lisp-mode.jl, lisp.jl, prompt.jl,
	server.jl, tags.jl: excise all traces of the return function
	and the OP_RETURN instruction

	* sh-mode.jl: new major mode, for bourne shell files

	* modes.jl (interpreter-mode-regexp, interpreter-mode-alist,
	normal-mode): choose modes by #! string

	* cvs.jl (cvs-find-file, cvs-find-file-other-view): now handle
	more than one selected file

Wed Jun  3 09:19:34 1998  John Harper  <john@dcs.warwick.ac.uk>

	* modes.jl (normal-mode): given an interactive decl

	* rm-summary.jl (rm-summary-print-item): reference
	rm-summary-format in the message's buffer

	* read-mail.jl: more minor fixes

Tue Jun  2 09:06:16 1998  John Harper  <john@dcs.warwick.ac.uk>

	* read-mail.jl, rm-misc.jl, rm-output.jl, rm-summary.jl,
	rm-thread.jl: more assorted fixes and enhancements

	* lisp.jl (assoc-regexp): abstracted from get-auto-mode, a
	function to associate with regexps

	* init.jl: -no-rc option to prevent loading of .jaderc and
	site-init files
	* Makefile.in: use -no-rc option

	* rm-mail-dir.jl: use new hook name

Mon Jun  1 11:26:39 1998  John Harper  <john@dcs.warwick.ac.uk>

	* mail-headers.jl (mail-parse-address): some reorganisation to
	allow parsing of address without domains
	(mail-format-address): allow nil NAME
	(mail-insert-address-list): new function

	* rm-misc.jl (rm-reply): use message's header cache where
	possible

	* rm-restrict.jl (rm-rule:attribute): quote the symbol argument

	* read-mail.jl (rm-append-inbox, rm-rebuild-folder): fixed

	* read-mail.jl (rm-open-mailbox, rm-close-mailbox,
	rm-subtract-mailbox, rm-subtract-all-mailboxes): new functions.
	Also lots of other fixes, it seems to work quite well now

	* rm-mail-dir.jl: don't bind to `+' anymore (used to add a
	mailbox), instead use `Ctrl-k'

	* rm-restrict.jl (subject): new rule. Also some fixes

	* rm-summary.jl (rm-summary-view): fixed to _always_ return a
	view or a buffer

	* rm-thread.jl: fix the `date' sort key

	* read-mail.jl (rm-open-mailboxes): list of buffers, this stops
	buffers being gc'd while they're still in use (references to
	buffers are by marks, which are `weak' references)

	* rm-restrict.jl: minor changes, renamed rule functions from
	`rm-rule-X' to `rm-rule:X', added a `(body REGEXP)' rule to
	search the body of the message

Sun May 31 12:06:02 1998  John Harper  <john@dcs.warwick.ac.uk>

	* read-mail.jl: more work. pretty much works. getting new mail
	doesn't though..
	* rm-misc.jl, rm-output.jl, rm-summary.jl, rm-thread.jl:
	updated for new read-mail. Mostly untested

	* rm-restrict.jl: allow rules to be defined interactively

	* prompt.jl (prompt-validate-symbol): fixed

	* lisp.jl (identity): new function

	* read-mail.jl: massive changes, there is now a layer between
	mailbox files and messages: folders. Each folder can contain
	multiple mailboxes and be restricted to only contain messages
	meeting a specified restriction rule

	* rm-summary.jl (rm-with-folder, rm-in-folder): moved here from
	read-mail.jl. All rm-X.jl files need updating for the new
	read-mail

Sat May 30 12:28:09 1998  John Harper  <john@dcs.warwick.ac.uk>

	* buffers.jl (find-file-read-only): added DONT-ACTIVATE option,
	like find-file has

	* rm-restrict.jl (rm-filter-by-rule): function to apply a rule

Fri May 29 15:17:38 1998  John Harper  <john@dcs.warwick.ac.uk>

	* html-style.jl (html-style-default, html-style-current,
	html-style-alist, html-style-set-style, html-style-add-style):
	support for multiple styles

Thu May 28 18:02:48 1998  John Harper  <john@dcs.warwick.ac.uk>

	* mail-headers.jl (mail-timezone-alist): moved to maildefs.jl
	* maildefs.jl (mail-month-alist): added full names, as well as
	abbreviations

	* rm-restrict.jl (rm-parse-date, rm-rule-sent-date): support
	for relative dates (i.e. "2 days ago" and so on)

Tue May 26 13:15:11 1998  John Harper  <john@dcs.warwick.ac.uk>

	* rm-restrict.jl: new file, rule-based message selection

	* mail-headers.jl (mail-parse-date): initialise values to
	sensible defaults

	* mail-headers.jl (mail-parse-date): fix epoch-time calculation

Mon May 25 17:12:39 1998  John Harper  <john@dcs.warwick.ac.uk>

	* rm-output.jl (rm-output-message): call 'rm-after-import-hook

	* rm-thread.jl (rm-auto-thread-new-messages): new variable

	* lisp.jl (if, and, or): deleted, they're now special forms
	* compiler.jl (if, and, or): source code transformations to
	compile these special forms

	* compiler.jl, lisp.jl: support for eval-when-compile
	construct, though I'm not sure if it has the correct semantics
	at anything but the top-level?

	* read-mail.jl, rm-summary.jl: removed all of the mail summary
	code to rm-summary.jl. read-mail.jl still has a few calls to it
	though (but only if a summary exists). Deletion marks are now
	stored along with all the other message attributes
	* rm-misc.jl, rm-output.jl, rm-mail-dir.jl: minor updates to
	work with separate summary

	* rm-thread.jl (rm-inter-thread-sort-key,
	rm-intra-thread-sort-key): control over how threads are sorted

	* compiler.jl (comp-compile-top-form): when compiling defvars,
	if the value is a list but not a constant, compile it to
	bytecode

	* mail-headers.jl (mail-parse-date): resolve timezone
	specifications to the difference in minutes they specify
	(currently I've ignored the single letter `military' zones).
	Also calculate the time since the epoch (actually create
	(DAYS . SECONDS) to avoid overflow)
	(mail-get-actual-subject); function to strip re: prefixes from
	a subject string

	* maildefs.jl (mail-re-regexp): regexp defining how we strip
	re: prefixes, moved from rm-misc.jl

	* read-mail.jl (rm-keymap, rm-summary-keymap): bind Ctrl-s to
	sort the folder, and Ctrl-t to toggle threading
	(rm-get-actual-subject): new function
	(rm-invalidate-summary-cache): new function

	* rm-misc.jl (rm-Re-regexp): moved to maildefs.jl
	(rm-reply): use mail-get-actual-subject

	* rm-thread.jl (rm-thread-using-subject): new variable, when t
	use subjects to group messages as well as id's
	(rm-sort-predicates): alist of (KEY . PREDICATE) for sorting
	folder order
	(rm-threaded-folder): new variable, t when folder is threaded
	(rm-thread-folder): misc. fixes, use subjects, sort thread
	lists, use rm-fix-msg-lists
	(rm-fix-msg-lists): function to install a list of messages
	preserving the current message
	(rm-toggle-threading): new command, toggles between threaded
	and sorted by location display
	(rm-sort-folder): new command, sorts display order by key

Sun May 24 13:18:54 1998  John Harper  <john@dcs.warwick.ac.uk>

	* read-mail.jl (rm-move-forwards, rm-move-backwards): changed
	from macros to functions; also they reuse all cons cells

	* rm-thread.jl: initial attempt at message threading, needs a
	lot of work

	* read-mail.jl (rm-get-message-id, rm-get-in-reply-to,
	rm-get-references): new functions to use the header cache

	* help.jl (substitute-command-keys): new function, replace
	strings in mode documentation with keymap descriptions. Mostly
	compatible with Emacs method of doing this
	(describe-mode): pass the doc string through the
	substitute-command-keys function

	* modes.jl (mode-alist): renamed as auto-mode-alist
	(default-major-mode): new variable, defines the major mode of
	buffers that otherwise wouldn't have one
	(get-mode): renamed get-auto-mode
	(init-mode): renamed normal-mode, simplified the semantics

	* asm-mode.jl, buffer-menu.jl, buffer-summary.jl, c-mode.jl,
	cvs.jl, debug.jl, dired.jl, gdb.jl, info.jl, lisp-mode.jl,
	read-mail.jl, send-mail.jl, shell.jl, tex-mode.jl,
	texinfo-mode.jl, text-mode.jl: rewrote major mode documentation
	to include keymap formatting directives

	* keymap.jl (map-keymap-recursively): variable controlling
	whether map-keymap notices sub-keymaps (t by default)
	(substitute-key-definition): new command, change key bindings
	to a particular command so that they invoke a different command

Sat May 23 11:30:19 1998  John Harper  <john@dcs.warwick.ac.uk>

	* asm-mode.jl, buffer-menu.jl, buffer-summary.jl, c-mode.jl,
	compile.jl, cvs.jl, debug.jl, dired.jl, fill.jl, gdb.jl,
	help.jl, info.jl, isearch.jl, keymap.jl, lisp-mode.jl,
	loadkeys.jl, mail-dir-summary.jl, prompt.jl, rcs.jl,
	read-mail.jl, replace.jl, send-mail.jl, shell.jl, summary.jl,
	telnet.jl, tex-mode.jl, texinfo-mode.jl, text-mode.jl: use new
	names of make-keytab and make-keylist (make-keymap and
	make-sparse-keymap). Also use new method for inheriting
	bindings

	* keymap.jl: updated for new key binding structure (uses cons
	cells instead of a vector)

Fri May 22 10:15:28 1998  John Harper  <john@dcs.warwick.ac.uk>

	* cvs.jl, dired.jl, gdb.jl, help.jl, isearch.jl, keymap.jl,
	loadkeys.jl, rcs.jl, send-mail.jl, tex-mode.jl,
	texinfo-mode.jl: altered uses of next-keymap-path to take
	account that it's now a function not a variable

	* keymap.jl (map-keymap): new function, allows a function to be
	mapped (recursively) over all existing key bindings
	(print-keymap): defined in terms of map-keymap
	(where-is): new command, searches the key binding hierarchy for
	a specified command (using map-keymap)
	* help.jl: bind where-is to `Ctrl-h w'

	* c-mode.jl: lots of minor fixes, hopefully correcting a lot of
	mis-indentation; some problems still exist

Wed May 20 17:34:48 1998  John Harper  <john@dcs.warwick.ac.uk>

	* buffer-summary.jl: removed bs-buffer variable, now find or
	create *buffers* buffer dynamically. This helps garbage
	collection

Sun May 17 19:51:41 1998  John Harper  <john@dcs.warwick.ac.uk>

	* rm-misc.jl (rm-forward): new method of deleting trailing
	blank lines, this one seems to work

	* send-mail.jl (send-mail-show-output): new variable, when t
	output from sendmail is always displayed. Replaces
	sendmail-debug

Sat May 16 23:39:14 1998  John Harper  <john@dcs.warwick.ac.uk>

	* mail-dir.jl (mail-dir-auto-expand-aliases): deleted; the user
	has to put the function in the mail-send-hook manually now
	(add-mail-alias, add-mail-address): protect against adding null
	addresses

	* mail-headers.jl (mail-insert-list): be more intelligent when
	finding the depth to indent continuation lines to--either the
	column following the name of the header, or the current
	indentation if inserting in a continuation line

	* sm-mail-dir.jl: bind `Ctrl-c Ctrl-x' to expand any mail
	aliases in the message's headers (in send-mail mode)
	(sm-mail-dir-expand-aliases): this now seems to work, and is
	called expand-mail-aliases. It's not added to mail-send-hook,
	but is suitable for use in this hook. Given an interactive
	decl. so can now be called as a command

	* edit.jl (save-restriction): when restoring the original
	restriction, unrestrict the buffer if there was no original
	restriction or it's now invalid

Fri May  8 13:03:43 1998  John Harper  <john@dcs.warwick.ac.uk>

	* windows.jl (other-view): only enlarge an existing view when
	the desired size is less than its current size

	* cvs.jl (cvs-show-output-buffer): only call shrink-view-if-..
	when the real current buffer isn't the *cvs* buffer to avoid an
	annoying effect

Wed May  6 16:23:46 1998  John Harper  <john@dcs.warwick.ac.uk>

	* rcs.jl, rcs-hooks.jl, dired.jl, dired-hooks.jl: use autoload
	mechanism to load -hooks files, rcs-mode also autoloads its
	main keymap

	* cvs.jl (cvs-keymap): now autoloaded

	* lisp.jl (autoload-variable): new function
	* find-autoloads.jl: ignores defmacro, but understands defvar

Tue May  5 10:28:10 1998  John Harper  <john@dcs.warwick.ac.uk>

	* html-style.jl (html-style-header): optional NO-HEADING arg
	suppresses the initial heading

	* cvs.jl (cvs-option-alist): remove default options, should be
	up to the user

	* cvs.jl (cvs-update-file-list): split the completion function
	out into cvs-update-finished, this function takes a single
	argument, the _value_ of the hook to call. This is required
	due to the asynchronicity in relation to the caller of
	cvs-update..

Mon May  4 12:12:22 1998  John Harper  <john@dcs.warwick.ac.uk>

	* cvs.jl (cvs-update-file-list): call cvs-after-update-hook on
	completion
	(cvs-undo-modification): ensure that buffers aren't reloaded
	until _after_ the update has completed

	* info.jl: use the buffer-status-id to display the current node
	name, not the mode-name

Sun May  3 12:22:27 1998  John Harper  <john@dcs.warwick.ac.uk>

	* read-mail.jl (rm-next-page, rm-previous-page): detect top and
	bottom of buffer properly, not just when the cursor is at the
	top or the bottom

	* buffer-summary.jl: use the standard read-only/modified
	symbols (as in the status line). Removed the `-' synonym for
	the `%' command

	* init.jl, compiler.jl: don't use version-and-build-string
	anymore, but use build-id-string instead

Thu Apr 30 10:43:36 1998  John Harper  <john@dcs.warwick.ac.uk>

	* buffer-summary.jl (bs-print-item): substitute `Fundamental'
	for `Generic'

	* help.jl (lisp-documentation-file): name of the file
	containing the Lisp library's documentation strings
	(add-documentation, get-documentation): use the
	lisp-documentation-file for Lisp documentation

	* dired.jl (dired-do-copy, dired-do-rename): new commands

	* summary.jl (summary-update, summary-update-item): mark the
	buffer as unmodified before calling the after-update vector
	(summary-command-items): new function, copied from part of
	cvs-command-get-files. This returns a list of items for a
	command to manipulate in some way
	* cvs.jl (cvs-command-get-files): call summary-command-items

	* cvs.jl (cvs-option-alist): added -v option to status
	(cvs-keymap): bindings of `t' and `T'
	(cvs-tag, cvs-tag-directory): new commands

Wed Apr 29 09:39:40 1998  John Harper  <john@dcs.warwick.ac.uk>

	* maildefs.jl (mail-summary-lines): renamed as
	mail-summary-percent, now defines the percentage of the window,
	not the number of lines
	* read-mail.jl (rm-configure-views): changed for above switch

	* read-mail.jl (rm-summary-format-alist): new conversions `b',
	`n' and `N'.
	(rm-status-format): format string for part of status line
	(read-mail-folder): don't expand folder name so much
	(rm-fix-status-info): cache status line formatted text
	(rm-invalidate-status-cache): for above

	* info.jl (info-read-dir): use insert-file instead of
	read-file-into-buffer. This doesn't set the buffer's file-name.
	Also set the file-name to nil, and the buffer as unmodified.
	(info-prompt): rename list-fun to info-list-fun since it's a
	dynamic variable
	(info-list-menu-items): search from the restriction start, not
	the cursor position

Tue Apr 28 16:05:44 1998  John Harper  <john@dcs.warwick.ac.uk>

	* read-mail.jl: use the new buffer-status-id variable to
	display current message number with the buffer name

	* cvs.jl (cvs-undo-modification): use cvs-revert-filenames
	instead of doing it inline

Mon Apr 27 10:21:09 1998  John Harper  <john@dcs.warwick.ac.uk>

	* buffers.jl (buffer-file-modtime): has permanent-local
	property

	* cvs.jl (cvs-commit-callback, cvs-revert-filenames): files
	should revert after being committed now

Sun Apr 26 13:39:17 1998  John Harper  <john@dcs.warwick.ac.uk>

	* buffers.jl: call (window-list), instead of variable
	window-list
	* loadkeys.jl, loadmenus.jl, server.jl: use make- and
	delete-window instead of open- and close-window
	* windows.jl (window-list, window-closed-hook, open-window,
	open-window-on-display, close-window): deleted

	* buffers.jl (mildly-special-buffer): deleted this variable
	(kill-buffer): don't destroy-buffer, just remove it from all
	buffer-list's. Moved remove-buffer into this function
	(bury-buffer): use mapc, and fixed to handle views as well as
	windows
	(add-buffer): moved here from windows.jl
	(rotate-buffers-forward, rotate-buffers-backward): deleted
	(find-file): check if the file being opened has changed, if
	it's already buffered
	(check-changes, save-some-buffers): don't look for
	special-ness, but whether the buffer has no file-name
	* windows.jl (add-buffer, remove-buffer): deleted
	* loadkeys.jl: remove references to rotate-buffers-forward and
	rotate-buffer-backward 

	* modes.jl (kill-mode): renamed as fundamental-mode, since this
	is what it really does, given an interactive decl

	* compile.jl (compile-parse-errors): fix line numbers being out
	by one

	* buffer-menu.jl, compile.jl, compiler.jl, cvs.jl, debug.jl,
	disassembler.jl, gdb.jl, help.jl, info.jl, init.jl, keymap.jl,
	miranda.jl, prompt.jl, rcs.jl, read-mail.jl, send-mail.jl,
	shell.jl, summary.jl, telnet.jl: various fixes for loss of
	buffer-special functions, etc.

	* buffers.jl (open-buffer): always call add-buffer, not just
	when having to create the buffer

	* windows.jl (add-buffer, remove-buffer): rewritten using mapc
	instead of iteration. add-buffer won't add the buffer if it's
	already in the view's list

	* cvs.jl (cvs-buffer): variable pointing to the summary buffer
	(cvs-update-file-list): install a temporary minor mode whilst
	updating (the mode's called cvs-update)
	(cvs-buffer-p): macro to test if the current buffer is the
	summary buffer
	(cvs-summary-select-other-view): fixed

Sat Apr 25 14:38:38 1998  John Harper  <john@dcs.warwick.ac.uk>

	* cvs.jl (cvs-command): handle the `*cvs*' buffer not existing

Fri Apr 24 14:02:50 1998  John Harper  <john@dcs.warwick.ac.uk>

	* cvs.jl: support for calling CVS commands asychronously,
	currently, cvs-update, cvs-log, cvs-status,
	cvs-commit-callback and cvs-diff-cvs take advantage of this

Thu Apr 23 12:02:57 1998  John Harper  <john@dcs.warwick.ac.uk>

	* cvs.jl (cvs-summary-clean): implemented this command

Wed Apr 22 17:22:48 1998  John Harper  <john@dcs.warwick.ac.uk>

	* windows.jl (open-view, close-view): deleted, replaced by
	split-view and delete-view in views.c
	(close-other-views): renamed delete-other-views
	* buffer-menu.jl, buffer-summary.jl, loadkeys.jl, prompt.jl,
	read-mail.jl: replace open-view by split-view, and close-view
	by delete-view, etc

Tue Apr 21 11:48:59 1998  John Harper  <john@dcs.warwick.ac.uk>

	* cvs.jl (cvs-diff-backup, cvs-undo-modification): implemented
	these commands

	* compile.jl (compile-parse-errors, next-error): rewrote most
	of these functions. Now tracks changes of directory while
	compiling (see compile-{push,pop}-directory-regexp variables,
	by default set up for GNU make)

	* cvs.jl (cvs-command): use (message ... t) instead of (format
	t ...) to display calling CVS message

Mon Apr 20 00:20:06 1998  John Harper  <john@dcs.warwick.ac.uk>

	* cvs.jl (cvs-commit-directory): new command, bound to `C'

	* cvs.jl (cvs-summary-mode): defined this function to provide
	the mode's documentation
	(cvs-command-get-files): in the summary buffer, when no files
	are marked, select prefix-arg files, not just one

	* find-url.jl (find-url-alist): deleted the http: method since
	it's covered by the default action

Sun Apr 19 15:30:07 1998  John Harper  <john@dcs.warwick.ac.uk>

	* cvs.jl, autoload.jl: a rudimentary CVS mode, inspired by
	pcl-cvs.el. Most important shortcoming is lack of control over
	which revisions are manipulated

	* dired.jl, summary.jl (dired-mark-if): moved from dired.jl to
	summary.jl, and renamed as summary-mark-if

Sat Apr 18 00:19:49 1998  John Harper  <john@dcs.warwick.ac.uk>

	* buffers.jl (revert-buffer): attempt to leave the cursor in
	its original position (by saving the surrounding lines, then
	searching for them). Also added a new optional argument, FORCE,
	which prevents confirmation from the user being asked for

	* rcs.jl (rcs-command): when REREAD-BUFFER is t, use
	revert-buffer to achieve this

	* Makefile.in: use JADELISPLIB and JADEDOCFILE to allow proper
	compilation of Lisp files before they've been installed

Fri Apr 17 14:18:22 1998  John Harper  <john@dcs.warwick.ac.uk>

	* tilde.jl (tilde-file-handler): handle the expand-file-name
	operation separately now, simplify the stuff after the tilde
	expression

Wed Apr  8 11:59:44 1998  John Harper  <john@dcs.warwick.ac.uk>

	* pwd-prompt.jl (pwd-prompt): use unwind-protect to ensure that
	the old glyph table is re-established

	* telnet.jl (telnet-grab-passwords): variable controlling
	whether to scan for password prompts, and if so, for how long
	after the start of the session
	(rlogin-program): new variable
	(telnet): new optional arg, USE-RLOGIN
	(rlogin): new command
	(telnet-filter): don't try to be clever when telnet-echos is
	non-nil
	(telnet-send-line): when telnet-echos is non-nil, delete input
	immediately after it's sent

Tue Apr  7 10:20:02 1998  John Harper  <john@dcs.warwick.ac.uk>

	* telnet.jl (telnet): specifying a port number now works

	* telnet.jl (telnet): spawns a telnet session in a buffer

	* pwd-prompt.jl (pwd-prompt): prompts for a string
	confidentially. Does this by hacking (literally) prompt.jl to
	use a special glyph table

	* find-url.jl (find-url-telnet, find-url-mailto): new functions

	* compiler.jl (compile-file): slightly modified comment
	prefixed to compiled files

	* loadkeys.c: bound "Ctrl-x Ctrl-Meta-f" to find-url

	* shell.jl (shell-command-on-area): don't popup *shell-output*
	buffer if it's totally empty

	* find-url.jl (find-url): new file, new command, it allows urls
	to be followed. By default, http urls are redirected to
	netscape, and file ones are loaded into the editor. ftp and
	telnet (and others?) are still to be implemented

Sun Apr  5 20:13:42 1998  John Harper  <john@dcs.warwick.ac.uk>

	* buffers.jl (save-some-buffers): print a message if no
	modified buffers exist on entry

	* compiler.jl (comp-get-lambda-vars): made into a macro; now
	uses filter instead of a combination of mapcar and delq

	* compiler.jl (comp-compile-funcall): open code constant lambda
	expressions; this isn't going to be useful with existing code,
	but it might be in the future (and it's painless..)

Sat Apr  4 19:39:28 1998  John Harper  <john@dcs.warwick.ac.uk>

	* file-subst.jl: provide file-subst
	* html-style.jl: require file-subst

	* edit.jl (mouse-select-drag-block, mouse-select-drag-rect):
	new functions, calling mouse-select-drag, but not until they've
	set or cleared the rect-blocks flag
	* loadkeys.jl: bound Ctrl-Mouse events to mark rectangles

Fri Apr  3 12:38:54 1998  John Harper  <john@dcs.warwick.ac.uk>

	* fill.jl (fill-area): hopefully fixed the bug erroneously
	leaving single words on the last line of the buffer

Thu Apr  2 10:28:19 1998  John Harper  <john@dcs.warwick.ac.uk>

	* rm-misc.jl (rm-forward): fix deletion of trailing blank lines

Wed Apr  1 00:47:04 1998  John Harper  <john@dcs.warwick.ac.uk>

	* html-style.jl: simplified the default style a lot

	* compiler.jl (comp-compile-mapc): for mapc calls whose
	function argument is a constant lambda expression, do the
	looping in byte code and open-code the function call. All other
	mapc calls use the mapc opcode as before

	* html-style.jl: new file, code to work with file-subst.jl to
	create web pages to a common style

Tue Mar 31 00:42:31 1998  John Harper  <john@dcs.warwick.ac.uk>

	* tilde.jl: new file; a file-handler to expand a tilde (~) at
	the start of a file name. Understands both ~/ and ~USER/

	* shell.jl: fix TERMCAP entry

	* read-mail.jl, rm-misc.jl, rm-output.jl: more fixes to
	ensuring correct separation between messages

	* loadmenus.jl: change for new operating-system variable; I
	don't know why I keep this file...

	* lisp.jl (file-name=): no longer a primitive, this now works
	by comparing canonical file names

	* init.jl: minor changes to order of loadup; also catch all
	errors when executing site-local and user config files

	* info.jl (info-find-node): fixed some bugs

	* help.jl (get-documentation, add-documentation): new
	functions, these replace the old get-doc-string and
	add-doc-string primitives

	* file-subst.jl: new file, provides a method of generating
	arbitrary text files from input templates. Allows the full
	expressiveness of Lisp to be used in expansions. I use this to
	build all my web pages using the same style

	* environ.jl (getenv, setenv): new file, these functions used
	to be primitives, now they use the process-environment variable

	* edit.jl: use (eq window-system 'x11) to test for X

	* dired.jl: added `% d' and `% m' commands. Also cleaned up
	some code. Needs more commands

	* compiler.jl: support for comp-transform property in
	functions, basically a method for specifying a source code
	transformation (i.e. macro) to compile the form

	* buffer-summary.jl (bs-print-item): handle oversized fields
	more elegantly

	* add-log.jl, buffers.jl, compile.jl, compiler.jl, dired.jl,
	dump.jl, find-autoloads.jl, gdb.jl, gzip.jl, info.jl,
	mail-dir.jl, maildefs.jl, miranda.jl, print.jl, prompt.jl,
	rcs-hooks.jl, rcs.jl, read-mail.jl, rm-output.jl, send-mail.jl,
	shell.jl, tags.jl: changes for new file handling (mainly to
	support file names relative to the current buffer; includes
	replacing uses of the file-name-concat function by
	expand-file-name, and ensuring that subprocesses get given
	local-file-name's)

Mon Mar 23 09:29:30 1998  John Harper  <john@dcs.warwick.ac.uk>

	* read-mail.jl, rm-misc.jl, rm-output.jl: was checking if
	number of lines in buffer is zero to see if the file's
	empty---there's always at least one line (doh!)

	* read-mail.jl (rm-append-inbox): set rm-current-msg-index to
	zero if we're adding the first message in the folder

Fri Mar 20 13:49:28 1998  John Harper  <john@dcs.warwick.ac.uk>

	* dired.jl (dired-print): changed the output format slightly
	(dired-delete, dired-execute-end): don't confirm deletion one
	file at a time; record all files to be deleted, then use
	map-y-or-n-p

Thu Mar 19 09:55:21 1998  John Harper  <john@dcs.warwick.ac.uk>

	* info.jl (info-prompt): fix validation function not
	constructing the list of options
	(info-menu): when searching for entered menu name, search case
	insensitively

	* mail-headers.jl (mail-parse-atom): a few minor fixes to allow
	null strings, comments and addresses to be recognised

Mon Mar 16 15:48:28 1998  John Harper  <john@dcs.warwick.ac.uk>

	* read-mail.jl, rm-misc.jl, rm-output.jl: miscellaneous fixes
	to make the message at the end of the file be handled better;
	also changed how the \n\n separator is inserted between
	messages

	* compiler.jl, disassembler.jl, bytecodes.jl (op-filter,
	op-macrop, op-bytecodep): new opcodes

	* buffers.jl (save-some-buffers): rewritten using map-y-or-n-p
	and filter

	* prompt.jl (map-y-or-n-p): new function, apply y-or-n-p to a
	list of inputs

Sat Mar 14 16:06:25 1998  John Harper  <john@dcs.warwick.ac.uk>

	* read-mail.jl (rm-summary-print-item): use the all-new and
	enhanced format function to do all dirty work

	* summary.jl (summary-mark-item, summary-mark-delete): when
	called interactively these now use the prefix arg to find how
	many items to mark. Also s-mark-delete just calls s-mark-item

	* summary.jl (summary-assoc-item-function): new variable
	(summary-unmark-all): new command, bound to "U"
	(summary-execute): always ignore the `mark' symbol, also ensure
	that any skipped symbols are preserved in the list of those
	pending
	(summary-mark-line, summary-map-marked-items): new functions
	for working with marked items

	* dired.jl (dired-print): works with broken symlinks

Fri Mar 13 15:03:55 1998  John Harper  <john@dcs.warwick.ac.uk>

	* summary.jl (summary-next-item, summary-previous-item): handle
	cursor not being on an item gracefully

	* dired.jl (dired-functions, dired-cursor-column): add an
	after-move vector to put the cursor in column
	dired-cursor-column; by default the first character of the file
	name

	* dired.jl, dired-hooks.jl: first attempt at a dired program
	* init.jl: load dired-hooks

	* buffers.jl (find-file-hook): renamed as after-read-file-hook.
	There's now a new hook find-file-hook that can take over almost
	all find-file functionality
	* rcs-hooks.jl: use after-read-file-hook, not find-file-hook

	* rcs.jl, rcs-hooks.jl (rcs-set-default-branch): new command,
	bound to "Ctrl-x v b", sets the default branch of the file to
	either the currently checked out revision, or the highest (with
	a prefix arg)

Thu Mar 12 20:23:28 1998  John Harper  <john@dcs.warwick.ac.uk>

	* mail-headers.jl (mail-quote-phrase, mail-format-address): now
	does proper quoting of phrases when necessary

	* mail-dir-summary.jl (mds-alias-functions,
	mds-address-functions): bind the mds-compose-mail-to-item
	function to the select tag (i.e. pressing RET)
	(mds-compose-mail-to-item): make ITEM an argument, but infer
	the IN-CC arg from current-prefix-arg

Wed Mar 11 09:30:52 1998  John Harper  <john@dcs.warwick.ac.uk>

	* maildefs.jl (mail-atom-re): fixed this to be [almost] exactly
	what RFC-822 specifies. It's now defined exclusively instead of
	inclusively (how foolish..)

	* mail-headers.jl (mail-parse-address): build the various
	regexps each call, this works even when mail-atom-re changes
	behind our back

Tue Mar 10 20:24:28 1998  John Harper  <john@dcs.warwick.ac.uk>

	* shell.jl (shell-mode-kill, shell-start-process): when a
	shell-process exists, check that it's in use before complaining

	* tags.jl (find-tag, visit-tags-file): new file, new commands.
	Currently only supports etags generated TAGS files
	loadkeys.jl (global-keymap): find-tag bound to M-.

Mon Mar  9 09:32:33 1998  John Harper  <john@dcs.warwick.ac.uk>

	* read-mail.jl (rm-current-message-end): renamed as
	rm-message-end, with the message as an optional arg
	* rm-output.jl (rm-output, rm-output-message): some minor fixes

	* read-mail.jl (rm-summary-format, rm-summary-functions):
	variables to define the structure of summary lines
	(rm-saved-cache-tags): message cache tags whose contents should
	persist across calls to the mail reader
	(rm-kill-subject): new command (bound to `k') that deletes all
	messages with the same subject as the current message
	(rm-pipe-message): new command, calls shell-command-on-area for
	the current message (bound to `|')
	(rm-msg-): changed the format of the message structure, now
	very little info is stored explicitly, everything parsed from
	message headers is stored in the rm-msg-cache slot
	(rm-cached-form): macro to execute a form whose value may
	previously have been cached for the message in question
	(rm-tag-cached-p, rm-invalidate-tag): cache utilities
	(rm-current-message-end): no longer uses the position of the
	next message, instead uses the new rm-msg-total-lines field
	(rm-update-flags): as well as the X-Jade-Flags-v1 header, also
	outputs X-Jade-Cache-v1 containing persistent items in the
	message's cache
	(rm-get-msg-header): wrapper for mail-get-header, but on an
	arbitrary message
	(rm-get-senders, rm-get-recipients, rm-get-subject,
	rm-get-date-vector): wrappers to rm-get-msg-header, but working
	through the cache
	(rm-create-summary): call hook read-mail-summary-mode-hook
	immediately before calling summary-mode
	(rm-summary-print-item, rm-summary-format-item): functions for
	formatting summary lines, the line is cached (non-persistently)
	(rm-invalidate-summary): function to remove the cached summary
	line

	* rm-mail-dir.jl (rm-mail-dir-scanner): use rm-get-recipients
	and rm-get-senders when scanning for new addresses

	* mail-dir-summary.jl (mds-sort-list): command (bound to `s')
	to sort the mail directory lists

	* summary.jl (after-marking): ensure that this function tag is
	called _before_ the updating takes place
	(summary-mark-delete): optional arg can specify item

	* maildefs.jl (mail-month-alist): alist of RFC-822 month
	abbrevs to numeric indices (Jan=1, ...)

	* mail-headers.jl: new file, moved all of the functions that
	deal with mail headers to this file
	(mail-parse-address, mail-parse-date): new functions

	* modes.jl, prompt.jl, rectangle.jl: reversed order of NOCASEP
	and START in calls to string-match

Fri Mar  6 10:51:58 1998  John Harper  <john@dcs.warwick.ac.uk>

	* compiler.jl (comp-defuns, comp-defvars): these are always
	used now, even if we're not compiling a file (mainly use
	comp-defuns as a cache of previously seen functions)
	(comp-compile-funcall): open-code funcall forms with op-call

	* sort.jl (sort): new file, new function, sorts a list

	* summary.jl (summary-mode): install a _copy_ of the functions
	vector in the buffer, this allows for easier modification later

Wed Mar  4 14:02:40 1998  John Harper  <john@dcs.warwick.ac.uk>

	* edit.jl (goto-mouse): new function, abstracted from
	mouse-select, this finds the position and view under the mouse
	and moves to them
	(mouse-select-drag): when dragging words, find the start of the
	word as well as the end

Tue Mar  3 11:53:40 1998  John Harper  <john@dcs.warwick.ac.uk>

	* edit.jl (kill-ring-size): variable controlling size of kill
	ring, set to 8 by default
	(kill-string): examines relative cursor positions to decide
	whether to prepend of append additive kills
	(yank, yank-rectangle, yank-next): more or less totally
	rewritten, may even work properly now? Uses a truly gruesome
	hack to make undo take some of the load
	(yank-to-mouse): uses mouse-select to find the mouse position,
	this means that view switches work correctly

	* edit.jl (next-line, previous-line): new commands for moving
	up and down lines, preserving the original column position
	* loadkeys.jl: bind Ctrl-n and Down, and Ctrl-p and Up, to
	next-line and previous-line respectively

	* windows.jl (open-window-on-display): calls set-current-window
	on the new window, this allows things like "jadeclient -X -f
	read-mail" to work as you would expect

	* buffer.jl (maybe-save-buffer): fixed

	* compiler.jl (comp-max-inline-depth): variable controlling
	maximum nesting of open-coded functions
	(comp-batch-compile): var controlling whether to print messages
	to stdout, or to a buffer
	(comp-inline-env): alist of functions to open-code
	(comp-defuns): alist of seen functions, and the number of args
	they require
	(comp-defvars): list of defvar'd variables
	(comp-bindings): lexical environment of current form
	(comp-inline-depth): current inlining nesting
	(comp-message, comp-error, comp-warning): rewritten
	(comp-remember-fun, comp-remember-var): functions for recording
	global variables and functions
	(comp-test-varref, comp-test-funcall): functions to emit
	warnings if something looks suspicious
	(compile-file): initial-pass now scans for all top-level
	definitions: defun, defsubst, defvar, and defconst.
	(comp-get-lambda-vars): return the symbols that will be bound
	by a particular lambda list
	(comp-compile-inline-lambda): open-codes a function call, used
	both for constant lambda expressions as the first element of
	function applications, and for inlining defsubst declared
	functions
	(comp-compile-inline-function): defsubst puts this into the
	compile-fun property of all inline functions

	* lisp.jl (defsubst): new macro, define an inline defun
	* lisp-mode.jl: Add intentation hint for defsubst
	* dump.jl: Support (untested as yet) for defsubst functions

	* add-log.jl, buffers.jl, compile.jl, debug.jl, dump.jl,
	edit.jl, info.jl, isearch.jl, lisp.jl, prompt.jl, rcs.jl,
	read-mail.jl, replace.jl, rm-misc.jl, tex-mode.jl,
	texinfo-mode.jl, windows.jl: Minor fixes for bugs found via
	compiler warning, mainly adding defvars for special variables

	* server.jl (server-find-file): chooses the view to open the
	file in, rather than the window

Mon Mar  2 17:15:35 1998  John Harper  <john@dcs.warwick.ac.uk>

	* windows.jl (open-window-on-display): new command, is to
	make-window-on-display as open-window is to make-window

Sun Mar  1 11:29:09 1998  John Harper  <john@dcs.warwick.ac.uk>

	* read-mail.jl (rm-summary-keymap): quote rm-followup

	* rm-misc.jl (rm-really-burst-message): call replace-last-match
	instead of the non-existant replace-regexp
	(rm-reply): only append msg-id to list of references when
	making new list of references if msg-id is non-nil

Fri Feb 27 12:26:14 1998  John Harper  <john@dcs.warwick.ac.uk>

	* edit.jl (goto-view-line): new function, bound to Meta-r.
	Moves the cursor to the start of a line displayed in the
	current view (similar to C-l, but moving the cursor, not the
	display)
	* loadkeys.jl: bound M-r as described above

	* edit.jl (backward-char, backward-tab, backward-line,
	forward-word, backward-word, forward-paragraph,
	backward-paragraph, forward-page, backward-page): removed the
	hacky MOVE argument, replaced by the new @ interactive flag
	(word-start, mouse-pos): added interactive declarations
	(goto-start-of-buffer, goto-end-of-buffer): removed
	(top-of-buffer, end-of-buffer): don't call goto and
	set-auto-mark explicitly, just use the interactive flags
	(save-excursion, save-restriction): use ,@ instead of ,
	* loadkeys.jl (global-keymap): changed M-> and M-< bindings

Wed Feb 25 10:07:41 1998  John Harper  <john@dcs.warwick.ac.uk>

	* rcs.jl (rcs-init-file): don't check out zero length files, if
	the file actually is zero bytes in the repository we'll go into
	an infinite loop

	* c-mode.jl, xc.jl: integrated the XC code with the standard C
	mode. Of course, there's still a lot of improvements to be made
	and bugs to be fixed..

	* keymap.jl (read-event): rewritten to use the minibuffer to
	display the prompt, this means that the cursor also appears in
	the minibuffer. Also, easier to handle cleanup
	(describe-key): handle chained bindings better

	* rcs.jl (rcs-display-diffs): renamed as rcs-compare-revisions,
	when called interactively with a prefix arg, the revisions will
	be prompted for
	(rcs-display-log-args): new variable, a list of arguments to
	pass to rlog
	(rcs-down-history, rcs-up-history): fixed these functions

Tue Feb 24 12:14:09 1998  John Harper  <john@dcs.warwick.ac.uk>

	* rcs.jl (rcs-make-backup-files): variable controlling whether
	or not to make backup files if the file's controlled by RCS
	(rcs-only-lock-seen-files): variable controlling whether to
	lock when checking out files whose revision is different from
	the currently viewed revision
	(rcs-revision): local variable containing the revision of the
	buffer, or nil
	(rcs-version): function renamed as rcs-find-version
	(rcs-init-file): when called on a file that doesn't exist, or
	is zero bytes in size, check out the current version
	(rcs-verify-buffer, rcs-register-buffer, rcs-check-in-buffer,
	rcs-lock-buffer, rcs-view-revision, rcs-revert-buffer): removed
	the BUFFER argument, all now operate on the current buffer

	* read-mail.jl (rm-display-current-message): when highlighting
	headers ensure that any continuation lines are also included

	* maildefs.jl (mail-display-summary): slightly changed
	semantics -- set to `bottom' means display summary at bottom of
	display, otherwise non-nil means display at top, nil means
	don't display (as before)

	* read-mail.jl (rm-configure-views): new function to set up the
	window configuration, two views mail and summary

	* summary.jl (summary-highlight-index): highlight to the end of
	the line or the right edge of the display, whichever is greater

Sun Feb 22 15:51:24 1998  John Harper  <john@dcs.warwick.ac.uk>

	* dump.jl: enable constant "put" forms to be dumped

Thu Feb 19 00:02:49 1998  John Harper  <john@dcs.warwick.ac.uk>

	* lisp-mode.jl (lisp-forward-sexp, lisp-backward-sexp): treat
	the three characters ` , @ as single quote (i.e. step over them
	when they occur at the start of a sexp)

	* backquote.jl: don't use (` X), (, X) and (,@ X), the Lisp
	reader now parses the usual syntax

	* edit.jl (save-restriction): changed to use normal backquote
	syntax
	(save-cursor): renamed save-excursion since it does actually
	save the current buffer as well as the cursor, this is close
	enough to the usual definition of save-excursion for me

	* rm-output.jl, text-mode.jl: change calls to save-cursor to
	call save-excursion

Wed Feb 18 23:20:34 1998  John Harper  <john@dcs.warwick.ac.uk>

	* backquote.jl: new file, provides pseudo-backquote operation.
	This file was taken from GNU Emacs 19.34 (originally by Rick
	Sladkey), with very minor modifications

	* edit.jl (auto-mark): now made buffer-local, i.e. each buffer
	gets its own auto-mark
	(goto-mark): added optional arg DONT-SET-AUTO which can inhibit
	setting the auto-mark before moving
	(save-restriction, save-cursor): now implemented using
	backquote, both have been improved, save-restriction now uses
	marks, both check that the buffer is still resident before
	reinstalling it
	(mouse-pos): new function
	(mouse-select): updated for line wrapping redisplay

	* buffers.jl (goto-mark, set-auto-mark,
	swap-cursor-and-auto-mark): moved to edit.jl

	* bookmarks.jl (set-bookmark, goto-bookmark, kill-bookmark,
	kill-all-bookmarks, list-bookmarks): new file, provides named
	bookmarks

	* windows.jl (shrink-view-if-larger-than-buffer): handle line
	wrapping redisplay

	* rm-misc.jl (rm-reply): accept null subject lines gracefully
	(rm-forward): minor changes, also don't put empty lines between
	the forwarded message and its delimiters

	* loadkeys.jl: removed mark-1, mark-2 and mark-3, and the key
	bindings to set and goto them

	* isearch.jl (isearch-accept): call set-auto-mark to do it's
	stuff instead of faking it

	* init.jl: load backquote on startup

	* help.jl (describe-function): updated for compiled bytecode
	objects

	* fill.jl (unfill-paragraph): new command, changes all newlines
	withing the current paragraph(s) to spaces

Mon Feb 16 20:29:06 1998  John Harper  <john@dcs.warwick.ac.uk>

	* replace.jl (replace-last-match): fixed; I was deleting the
	matched text before expanding it (doh!)

Thu Feb 12 18:51:44 1998  John Harper  <john@dcs.warwick.ac.uk>

	* dump.jl (dump-batch): options --enable-inline-strings and
	--disable-inline-strings
	(dump-defvar, dump-defconst): set the property
	variable-documentation not just documentation (which is wrong)

	* help.jl (documentation): fix for subr built-in variables

Sun Feb  8 14:46:12 1998  John Harper  <john@dcs.warwick.ac.uk>

	* windows.jl (scroll-next-view): new command, bound to
	"Ctrl-Meta-v", scrolls the next view in the window
	* loadkeys.jl (global-keymap): binding for above

	* rcs.jl (rcs-goto-buffer): display the RCS output buffer in a
	separate view, and call shrink-view-if-larger-than-buffer

Thu Feb  5 17:32:21 1998  John Harper  <john@dcs.warwick.ac.uk>

	* windows.jl (other-view): new interpretation of the LINES
	optional argument. If LINES is given then it always specifies
	the size of the returned view (even if the view already
	exists). If LINES is the symbol t, then the size of an already
	existing view is never changed. If LINES is nil the size of the
	returned view and the size of the current view are roughly
	equal.
	(enlarge-view, shrink-view): new functions to add or remove
	lines from the current view, shrink-view just calls
	enlarge-view with a negative argument
	(shrink-view-if-larger-than-buffer): new function to reduce the
	size of the current view to the number of lines in its buffer
	* loadkeys.jl (ctrl-x-keymap): "Ctrl-x ^" bound to
	enlarge-view, "Ctrl-x -" bound to shrink-view-if-larger...

	* read-mail.jl (rm-summary-select-item,
	rm-summary-execute-end): both call other-view with LINES set to
	t to prevent view resizing

	* shell.jl (shell-command-on-area): when displaying a new
	buffer, shrink the view to the buffer's size

	* help.jl (help-wrapper): macro to replace the help-setup
	function. This handles shrinking the view to the size of the
	final buffer, and leaving the cursor in the original view, not
	that of the help-buffer
	* help.jl, keymap.jl: all calls to help-setup translated to use
	help-wrapper

Wed Feb  4 13:00:03 1998  John Harper  <john@dcs.warwick.ac.uk>

	* read-mail.jl (rm-delete-current-message): was sometimes
	leaving a blank line at the start of mailboxes

Mon Feb  2 00:04:01 1998  John Harper  <john@dcs.warwick.ac.uk>

	* buffers.jl (auto-save-function): use message to display the
	message not format

Sat Jan 24 17:11:56 1998  John Harper  <john@dcs.warwick.ac.uk>

	* keymap.jl (print-keymap): was initialising the array index
	variable one to high (and thereby accessing past the end of the
	array)

	* buffers.jl, gzip.jl, read-mail.jl, send-mail.jl: updated for
	new function names, write-buffer-contents, read-file-contents
	and insert-file-contents.

	* buffers.jl (find-file): absorbs all functionality of
	open-file, and gets a new optional arg DONT-ACTIVATE which can
	be used to prevent the new buffer being installed in the
	current view.
	(open-file): deleted
	(open-file-hook): renamed as find-file-hook

	* dump.jl: new file, provides dumping of compiled Lisp files to
	an assembler file that can be assembled and linked into a
	special "jaded" executable. Only forms that are ``constant''
	are dumped, the rest get put in a FILE.jld file that cmd_load
	knows when to look for

	* lisp.jl (autoload): when the executable contains dumped data,
	don't add autoload definitions for any files that were dumped
	(since they may overwrite the constant definitions), instead
	load the file there and then (unless it's already been loaded)

	* add-log.jl, buffers.jl, find-autoloads, gdb.jl, rcs-hooks.jl,
	rcs.jl, server.jl: use find-file instead of open-file

	* compiler.jl, gzip.jl, mail-dir.jl, rm-output.jl,
	send-mail.jl: use open-file and close-file instead of open and
	close

	* init.jl: now load autoloads.jl after loading windows.jl and
	buffers.jl (I can't remember why!?) Also cleaned up how the
	command-line-args are used, if a function is called via the -f
	option it's guaranteed that the next argument will be the car
	of the list

	* debugrc.jl: now catches all errors and prints them before
	resuming operation. On catching end-of-stream though it quits

	* text-mode.jl (indented-text-mode): explicitly give
	fill-prefix a buffer-local value, in case fill.jl hasn't made
	it automatically buffer-local yet

Tue Jan 20 14:28:45 1998  John Harper  <john@dcs.warwick.ac.uk>

	* mail-dir-summary.jl (mds-compose-mail-to-item): command
	(bound to "m") that composes a new mail message with the
	current item as the recipient (by default in the To: field,
	prefix arg means put it in the CC: header)

Mon Jan 19 18:22:52 1998  John Harper  <john@dcs.warwick.ac.uk>

	* compiler.jl (comp-compile-top-form): use defun and defmacro
	again now they can handle bytecode objects

Sun Jan 18 21:59:02 1998  John Harper  <john@dcs.warwick.ac.uk>

	* add-log.jl (changelog-mode): explicitly create buffer-local
	values of fill-prefix and fill-prefix-width, in case fill.jl is
	not yet loaded

	* lisp-mode.jl (lisp-backward-sexp): if an expression is
	preceded by #, move onto it.

	* disassembler.jl: only one entry point now: `disassemble',
	this handles single forms and function/macro definitions.
	Now by default it outputs to the buffer *disassembly*, and
	heads the text with some information about the byte code

	* compiler.jl: modifications for byte code subrs. Instead of
	compiling functions and macros to a lambda list, we compile
	them to a byte code object. Also don't print newlines between
	output forms

	* debug.jl: bind to print-escape, not print-escape-newlines

Thu Jan 15 12:38:46 1998  John Harper  <john@dcs.warwick.ac.uk>

	* edit.jl (paragraph-regexp): renamed as paragraph-separate,
	this is now a regexp that matches the beginning of a line that
	separates two paragraphs
	(page-regexp): renamed as page-start
	(forward-paragraph, backward-paragraph): totally rewritten,
	these work properly now. As with all other forward- and
	backward- functions, forward-paragraph find the character
	following the end of the paragraph, backward-paragraph finds
	the character at the start of the paragraph
	(mark-paragraph): renamed as paragraph-edges, this function now
	finds the beginning and end of the current COUNT paragraphs.
	Marks them as a block when called interactively.
	(transpose-paragraphs): does what you'd expect, bound to `Ctrl-x
	Ctrl-Meta-t'.
	(save-cursor): now uses a mark to store the position

	* fill.jl: renamed from fill-mode.jl, this file has been almost
	completely rewritten
	(fill-break-re): regexp defining where it's permissable to
	break lines (by default: space, tab, newline or form-feed)
	(fill-mode-active): what used to be fill-mode-p
	(fill-prefix, fill-prefix-width): variable defining the fill
	prefix of the buffer. A string or a function, see its
	documentation for details.
	(set-fill-prefix): new command (bound to `Ctrl-x .') that
	saves from the start of the line to the cursor as the fill
	prefix for the buffer
	(fill-area): new function to fill an arbitrary region of text.
	Handles a prefix at the beginning of each line
	(fill-paragraph): now calls fill-area
	(fill-check-line): rewritten (this is for auto-fill mode)
	(center-line, center-paragraph): moved from text-mode.jl,
	untested

	* tex-mode.jl (tex-mode): set paragraph-separate to include
	"$$" as well as the normal blank lines. Also configures the
	generic expression handling code to handle TeX syntax a bit
	better ($..$ as delimiters, comments, don't have an escape
	character.

	* text-mode.jl (text-mode-init): don't include underscores and
	hyphens in word syntax.
	(indented-text-mode): set fill-prefix to text-mode-fill-prefix
	(text-mode-fill-prefix): function to handle fill prefix as
	indentation of the previous line.
	(center-line, center-paragraph): moved to fill.jl

	* loadkeys.jl (global-keymap): `Meta-h' bound to paragraph
	edges
	(ctrl-x-keymap): `Ctrl-x Ctrl-Meta-t' bound to
	transpose-paragraphs, `Ctrl-x .' bound to set-fill-prefix
	
	* lisp.jl (function, return): new macros

	* summary.jl (summary-update-item): don't use save-cursor anymore,
	now that uses marks it screws things up

	* compiler.jl (comp-inc-stack): rewritten as a macro, and given
	an optional argument N.
	(comp-compile-constant): checks if FORM is nil or t, and uses
	the special opcodes if it is

	* add-log.jl, asm-mode.jl, buffer-menu.jl, buffers.jl,
	c-mode.jl, edit.jl, gdb.jl, lisp-mode.jl, modes.jl,
	read-mail.jl, rm-misc.jl, send-mail.jl, shell.jl, summary.jl,
	tex-mode.jl, texinfo-mode.jl, text-mode.jl, xc.jl: change calls
	to eval-hook to use call-hook instead Note that read-file-hook,
	write-file-hook, insert-file-hook, auto-save-hook,
	read-mail-delete-message-hook, mail-yank-hooks are all "or"
	style hooks

Wed Jan 14 18:02:21 1998  John Harper  <john@dcs.warwick.ac.uk>

	* bytecodes.jl, disassembler.jl: opcode changes for new
	exception handling
	* compiler.jl (comp-get-label-addr): returns the pc of a
	previously-set label
	(comp-compile-catch, comp-compile-unwind-protect,
	comp-compile-error-protect): modified for new exception
	handling mechanisms. error-protect renamed as condition-case.

	* isearch.jl, lisp-mode.jl, read-mail.jl, xc.jl: changed
	error-protect to condition-case

Tue Jan 13 00:03:25 1998  John Harper  <john@dcs.warwick.ac.uk>

	* add-log.jl (changelog-mode): new major mode
	* modes.jl (mode-alist): added changelog-mode

Mon Jan 12 12:48:41 1998  John Harper  <john@dcs.warwick.ac.uk>

	* bytecodes.jl, compiler.jl, disassembler.jl (op-max, op-min):
	new instructions

	* mail-dir.jl: new file, provides an email directory, both of
	addresses to names, and aliases to addresses

	* mail-dir-summary.jl (list-mail-addresses, list-mail-aliases):
	new file, uses summary-mode to display the email directory
	information. Also allows interactive editing of the directory.

	* rm-mail-dir.jl: hooks to interface the mail-dir with
	read-mail mode. Adds a new command `+' when reading mail that
	allows the address of the sender to be added to the directory.
	Also has facilities for doing this (semi-) automatically

	* sm-mail-dir.jl: hooks for send-mail mode. Two new commands,
	`Ctrl-c a' inserts an address from the directory (in the style
	defined by mail-address-style); `Ctrl-c Ctrl-a' inserts an
	alias definition. Also has support (untested as yet) for
	expanding aliases automatically prior to a message being sent

Sun Jan 11 13:21:55 1998  John Harper  <john@dcs.warwick.ac.uk>

	* maildefs.jl (mail-format-address): function to create a string
	with name and address parts, formatted according to
	mail-address-style.
	* send-mail.jl (sendmail-send-message): use mail-format-address

	* lisp.jl (eval-after-load): new function, adds entries to
	after-load-alist (see `load' command)

	* buffers.jl: reorganised this file so that similar functions
	are grouped together
	(save-and-quit): optional arg NO-QUERY, when t don't bother
	asking whether any unsaved files should be saved.
	(before-exit-hook): hook called by save-and-quit before exiting.
	(split-line-indent): deleted this function
	(goto-line): moved to edit.jl

	* prompt.jl (prompt-from-list): new optional arg DONT-VALIDATE;
	when t no validation function is installed, and hence strings
	that aren't in the supplied list may be entered.

Fri Jan  9 11:09:51 1998  John Harper  <john@dcs.warwick.ac.uk>

	* replace.jl (query-replace-rest): still invoked the
	replace-regexp function which has been deleted.
	(query-replace-keymap): bound Ctrl-g to quit
	(replace-string, replace-all, query-replace): minor doc-string
	changes

Thu Jan  8 15:48:32 1998  John Harper  <john@dcs.warwick.ac.uk>

	* compile.jl: general clean-up. Removed the compile-command,
	compile-default-command dichotomy, instead compile-command is
	left global (any attempt to set it in a "Local Variables:"
	section will make a local value). Also made the grep command
	prompt for the whole command string, not just the arguments;
	grep-buffer has been made to work again.

Sun Jan  4 23:48:31 1998  John Harper  <john@dcs.warwick.ac.uk>

	* modes.jl (add-minor-mode): changed the optional arg NO-KEYMAP
	to be the argument KEYMAP--the keymap of the minor mode being
	installed.
	(remove-minor-mode): new optional arg KEYMAP--the keymap to be
	removed along with the minor mode
	(minor-mode-keymap): this variable removed
	(minor-mode-installed): renamed as minor-mode-installed-p

	* edit.jl (overwrite-mode): changes for new minor mode style,
	also changed the variable overwrite-mode-p to
	overwrite-mode-active

	* rcs.jl (rcs-init-file): updated for new minor mode
	conventions

Sat Jan  3 21:03:48 1998  John Harper  <john@dcs.warwick.ac.uk>

	* keymaps.jl (km-print-list): when recognising
	next-keymap-path being set, check that the thing it's being
	set to is a list, before adding it to the list of maps to print

	* gdb.jl (gdb-output-filter, gdb-redisplay-frame): put the
	cursor at the indentation position of the line, not at the end.

Sun Dec 21 02:51:44 1997  John Harper  <john@dcs.warwick.ac.uk>

	* buffers.jl, info.jl: fix timestamp usage (now a cons cell)

	* buffers.jl (revert-buffer): delete the auto save file
	_before_ loading the original, to remove the annoying `auto
	save is newer..' message

Sat Dec 20 00:16:47 1997  John Harper  <john@dcs.warwick.ac.uk>

	* bytecodes.jl, compiler.jl, disassembler.jl (op-pos,
	op-posp): new opcodes, for `pos' and `posp' respectively

	* lisp.jl (pos-col, pos-line): new macros

	* buffers.jl (auto-save-file-newer-p, file-newer-than-file-p):
	both use the new function time-later-p to compare time stamps

Wed Dec 17 12:34:26 1997  John Harper  <john@dcs.warwick.ac.uk>

	* modes.jl (init-mode): fixed '-*-X-*-' not being recognised

Tue Dec 16 12:01:45 1997  John Harper  <john@dcs.warwick.ac.uk>

	* lisp.jl (or, and): new macros, in place of the old special
	forms of the same name
	(prin1-to-string, read-from-string): both defined as macros
	instead of functions

	* compiler.jl (comp-compile-cond): optimise case where the
	last condition list has no action associated with it--just
	fall out the bottom with the condition itself as the value
	(comp-compile-or, comp-compile-and): deleted

Mon Dec 15 10:49:06 1997  John Harper  <john@dcs.warwick.ac.uk>

	* compiler.jl (comp-compile-while): now puts conditional branch
	at the top of the loop to reduce the number of branches
	executed, uses the new opcode jpt
	* bytecodes.jl (op-jpt, op-jpn): new opcodes, jump-and-pop-if-t
	and jump-and-pop-if-nil
	* disassembler.jl (dis-opcode-vector): added entries for the
	above two opcodes

Sun Dec 14 15:47:25 1997  John Harper  <john@dcs.warwick.ac.uk>

	* Makefile: now compiles the Lisp files in two runs; the first
	uses the compiler to bootstrap itself, the second uses the
	compiled compiler to build everything else
	* compiler.jl (compile-compiler): small function to aid the
	above process

	* rectangle.jl (insert-rectangle, copy-rectangle,
	delete-rectangle, cut-rectangle): new file, replacing
	src/editrect.c. The functions have slightly different names,
	but not much has changed
	* edit.jl: change all calls to X-rect to be X-rectangle

	* Many changes to almost all files, adapting to the changes
	mentioned under the same date in src/ChangeLog. There's sure
	to be some fallout still to be fixed.

	* edit.jl (backward-char, backward-tab, backward-line,
	split-line, goto-start-of-buffer, goto-end-of-buffer,
	top-of-buffer, bottom-of-buffer): new functions
	(left-char, right-char): new macros

	* init.jl: now uses version-string when printing the startup
	banner

	* replace.jl (replace-last-match): function that replaces the
	most recently matched regular expression with the expansion of
	its argument
	(replace-string): replaces one string with another at a
	specified position

Wed Nov 26 00:34:32 1997  John Harper  <john@dcs.warwick.ac.uk>

	* maildefs.jl (mail-default-headers): Added an "X-Mailer"
	line
	(mail-summary-lines): reduced to eight
	(mail-parse-list, mail-parse-group, mail-parse-atom): the
	second and third functions are new, split off from
	mail-parse-list. It's now possible to read "groups" of
	expressions---things not separated by commas. A new optional
	arg to mail-parse-list controls this
	(mail-get-header): option to read a list of groups, not a list
	of comma-separated expressions
	(mail-insert-list): option to suppress comma-separators

	* send-mail.jl (mail-setup): now puts the subject immediately
	after the recipients. Also inserts the REFERENCES arg as a
	list of groups

	* rm-misc.jl (rm-reply): read and generate the "References:"
	header

Tue Nov 25 12:01:51 1997  John Harper  <john@dcs.warwick.ac.uk>

	* edit.jl (delete-blank-lines): rewritten to be compatible
	with Emacs' command of the same name, remove the infinite
	loop bug as well

	* summary.jl: new optional action `current'; if this is
	provided by the back-end it should return the index of the
	currently selected item

	* read-mail.jl (rm-display-current-message): new optional arg
	no-summary-update; controls whether or not to update the
	current summary item
	(rm-delete-messages): fixed some bugs, also now tracks how
	many messages have been moved through, so that when it has
	finished the current message is as close as possible to the
	current message on entry
	(rm-summary-current-item, rm-summary-functions): provide a
	`current' action

Fri Nov 21 12:27:10 1997  John Harper  <john@dcs.warwick.ac.uk>

	* compiler.jl: change '%' to use op-rem and 'mod' to use op-mod
	(comp-compile-transitive-relation): new function to compile
	>, >=, <, and <=. Needed since these functions can now take
	more than two arguments	

	* disassembler.jl: Update for op-mod/op-rem stuff

	* compiler.jl (compile-file): emit a validate-byte-code form
	* bytecodes.jl (bytecode-major, bytecode-minor): define
	instruction set described

Thu Nov 20 19:07:24 1997  John Harper  <john@dcs.warwick.ac.uk>

	* info.jl (info-find-node, info-read-dir): fixed a couple of
	minor bugs

Wed Nov 19 10:32:03 1997  John Harper  <john@dcs.warwick.ac.uk>

	* miranda.jl (miranda): new command; runs a Miranda session in
	the other view, prompting for the script to use beforehand.

	* summary.jl (summary-add-pending-op): now dispatches the
	function vector `after-marking'
	(summary-mark-delete): doesn't dispatch `after-marking' since
	the above change takes care of it
	(summary-quit): only bury the current buffer if the function
	vector `on-quit' doesn't exist; otherwise the `on-quit'
	function must handle everything

	* buffer-summary.jl (bs-quit): new function, bound to the
	summary's `on-quit' vector
	(buffer-summary): don't use goto-buffer to install the
	summary, to avoid the buffer-list being modified just use
	set-current-buffer
	(bs-select-item, bs-select-two-views): don't bury-buffer the
	summary, just call bs-quit
	(bs-mark-save): don't call summary-next-item, it's now called
	indirectly by add-pending-op (and the `after-marking' vector)

	* buffers.jl (open-buffer): new optional arg ALWAYS-CREATE.
	When t, an already-existing buffer is never returned.

	* compiler.jl (comp-warning): call add-buffer, if necessary,
	to add the compiler output buffer to each views list of buffers
	* gdb.jl, info.jl, rcs.jl, send-mail.jl, shell.jl: use
	open-buffer not make-buffer to create buffers; ensuring they're
	in the buffer-lists of all views.

	* prompt.jl (prompt-for-file): new optional arg HISTORY-LIST

	* maildefs.jl (prompt-for-folder): new function to prompt for
	a mail folder; uses its own history list and fills in defaults
	sensibly.

	* read-mail.jl (rm-next-undeleted-message,
	rm-previous-undeleted-message): commands to remove some of the
	overloading on rm-next-message and rm-previous-message
	(rm-next-message, rm-previous-message): the arg
	DONT-SKIP-DELETED has had the DONT- removed, and therefore the
	meaning reversed
	(rm-keymap): bind "s" to rm-output
	(read-mail-folder): use prompt-for-folder
	(rm-command-with-folder, rm-command-in-folder): macros to call
	a command in the folder buffer, used by rm-summary-keymap

	* rm-output.jl (rm-output): new command to save the next COUNT
	messages to another folder. Special action is taken if the
	destination folder is currently in a buffer; even more special
	action occurs if this buffer has read-mail-mode as its major
	mode (the new messages are added to the buffer's list of
	message structures). This hasn't really been tested yet.
	
Sun Nov 16 01:27:32 1997  John Harper  <john@dcs.warwick.ac.uk>

	* edit.jl (mouse-select): now handles views properly, i.e.
	activate the view that the mouse was clicked in

Thu Nov  6 15:37:27 1997  John Harper  <john@dcs.warwick.ac.uk>

	* print.jl (print-buffer, print-buffer-to-file,
	print-buffer-to-printer, print-area, print-area-to-file,
	print-area-to-printer): commands to print text, by default
	using the GNU `enscript' command.

	* prompt.jl (prompt-for-string): START arg wasn't being used
	correctly.

Mon Nov  3 01:33:51 1997  John Harper  <john@dcs.warwick.ac.uk>

	* edit.jl (mouse-select, mouse-double-select,
	mouse-select-drag): implement dragged selections
	* (global-keymap): new left mouse button bindings for
	drag-select

	* edit.jl (mark-block): does no extra refresh, it's not
	necessary anymore
	(mark-page): forces non-rectangular blocks

Sun Nov  2 11:01:25 1997  John Harper  <john@dcs.warwick.ac.uk>

	* read-mail.jl (rm-delete-messages): if we can't display the
	old current message; try to display the last message in the
	folder

Sat Nov  1 12:54:05 1997  John Harper  <john@dcs.warwick.ac.uk>

	* read-mail.jl (rm-build-message-struct, rm-update-flags):
	flags are now remembered via the "X-Jade-Flags-v1" header
	(rm-display-current-message): looks for a header matching the
	`mail-highlighted-headers' regexp, and highlights it
	* maildefs.jl (mail-highlighted-headers): regexp matching
	headers to highlight
	* rm-misc.jl (rm-reply, rm-forward): the callback functions to
	set the necessary flags work properly now

	* shell.jl (shell-command-on-area): new arg DELETEP which is
	passed to call-process-area. When INSERTP and DELETEP are both
	t output replaces the input region
	(shell-command-on-buffer): new command, similar to
	shell-command-on-area, but over the whole buffer.

	* loadkeys.jl (ctrl-x-keymap): bound `shell-command-on-buffer'
	to `Ctrl-x |'

Tue Oct 28 15:09:17 1997  John Harper  <john@dcs.warwick.ac.uk>

	* shell.jl (shell-command, shell-comand-on-area): commands to
	run shell commands in a user-friendly manner

	* loadkeys.jl (global-keymap): `M-!' and `M-|' bound to
	shell-command and shell-command-on-area respectively

	* rcs.jl (rcs-command): now directs error output to the *rcs*
	buffer no matter what the OUTPUT-STREAM parameter is

Sun Oct 19 19:20:49 1997  John Harper  <john@dcs.warwick.ac.uk>

	* loadkeys.jl: Bound sensible commands to "Insert" 
	(overwrite-mode), "Home", "End", "Prior" and "Next".

	* tex-mode.jl: `Ctrl-c Ctrl-c m' now inserts "\emph{}", fixed
	some bugs in tex-insert-end and tex-insert-braces

Thu Oct 16 15:33:35 1997  John Harper  <john@dcs.warwick.ac.uk>

	* rm-misc.jl (rm-reply): now looks for a "Reply-To" header as
	it should, and ensures that the initialised message is marked
	as being unmodifed

Wed Oct 15 23:15:43 1997  John Harper  <john@dcs.warwick.ac.uk>

	* send-mail.jl (mail-setup, send-mail-signature): now
	inserts "\n-- \n" before signatures as it should do, instead
	of "\n--\n"

	* read-mail.jl (rm-enforce-msg-separator): now assumes that
	the cursor is at the position to insert at

	* rm-misc.jl (rm-burst-message, rm-really-burst-message): now
	works properly, and handles both RFC-934 _and_ RFC-1153
	encapsulation schemes; seems to work ok..

	* prompt.jl (prompt-validate-from-list): ensures that the
	symbol `t' is returned, not just any old t value

Tue Oct 14 00:53:27 1997  John Harper  <john@dcs.warwick.ac.uk>

	* summary.jl (summary-update-item): now calls after-update
	function after doing its stuff

	* rm-misc.jl (rm-forward): now quotes "^-" properly
	(rm-burst-message): new command to unburst digests, should
	also handle sensibly forwarded messages

	* read-mail.jl (rm-enforce-msg-separator): new function to
	ensure "\n\n" exists when inserting new messages. Minor other
	fixes.

Sun Oct 12 21:06:30 1997  John Harper  <john@dcs.warwick.ac.uk>

	* modes.jl (generic-forward-exp, generic-backward-exp): two
	functions to provide expression handling for many common types
	of code. Installed by default in mode-forward-exp and
	mode-backward-exp.

Wed Oct  8 11:56:17 1997  John Harper  <john@dcs.warwick.ac.uk>

	* tex-mode.jl: initial revision; a simple mode for editing TeX
	and LaTeX. Derived from texinfo.jl with the bonus that
	tex-insert-braces works properly with negative args.

	* modes.jl (mode-alist): added tex-mode, some other minor
	changes

Tue Oct  7 12:10:23 1997  John Harper  <john@dcs.warwick.ac.uk>

	* rcs.jl (rcs-initial-comment): new variable controlling if an
	initial description of a registered file is prompted for
	(rcs-command): new optional argument OUTPUT-STREAM
	(rcs-register-buffer, rcs-check-in-buffer, rcs-lock-buffer):
	now allow the revision number to be specified (by typing 
	`Ctrl-u' before calling the command.)
	(rcs-view-revision): new command to display an arbitrary
	revision of the current buffer. Since stdout and stderr are
	linked when getting output from processes, this includes some
	unsightly header information.. (for now)

	* rcs-hooks.jl (rcs-keymap): moved here from rcs.jl so that the
	`Ctrl-x v ...' bindings work from startup

	* loadkeys.jl (global-keymap): `Ctrl-l' now bound to
	center-display not centre-display

	* prompt.jl (prompt-list-fold-case): new variable controlling
	whether or not prompt-complete-from-list and
	prompt-validate-from-list ignore case

	* info.jl (info-find-node): set info-file-name here; this
	seems to fix the weird history problem.
	(info-prompt): let prompt-list-fold-case be t

Sun Oct  5 22:04:56 1997  John Harper  <john@dcs.warwick.ac.uk>

	* read-mail.jl (rm-after-marking): won't move to the next
	message when it doesn't exist

Fri Oct  3 11:28:34 1997  John Harper  <john@dcs.warwick.ac.uk>

	* rm-misc.jl (rm-default-yank-function): fixed [yet] again,
	hopefully it now deletes only _blank_ trailing lines.. 

Thu Oct  2 00:06:54 1997  John Harper  <john@dcs.warwick.ac.uk>

	* read-mail.jl: don't search for mail-message-start in
	case-folding mode, this isn't a good idea

	* prompt.jl (prompt-complete-symbol): now regexp-quote's the
	word to be completed, this allows things like "let*" to work
	properly.

Wed Oct  1 17:04:00 1997  John Harper  <john@dcs.warwick.ac.uk>

	* summary.jl (summary-highlight-index): allows the
	highlighting of a single item (via the block marks).
	(after-update): new action

	* read-mail.jl: uses summary-highlight to mark the current
	message, not the "->" insertion.

	* send-mail.jl (send-mail-signature): now works properly when
	a signature already exists

	* read-mail.jl (rm-coalesce-visible-headers): when working on
	the headers end the restriction at the blank line following
	the last header. This prevents us hitting the end of the
	buffer when parsing the last header

	* rm-misc.jl (rm-default-yank-function): now properly deletes
	all trailing blank lines (not just empty lines)

	* summary.jl: added some more actions, after-marking,
	after-move, and on-quit. Removed the summary-after-execute
	hook since it was redundant.

	* buffer-summary.jl: defines an after-marking action that
	simply moves to the next item in the display

	* read-mail.jl: uses the after-marking action to move to the
	next message. If the current message was the one just marked,
	and rm-move-after-deleting is t select this message as well.
	Unfortunately this stops Ctrl-d moving backwards, have to fix
	this at some point

Sun Sep 28 13:58:33 1997  John Harper  <john@dcs.warwick.ac.uk>

	* buffer-summary.jl (bs-mark-save): advances to next item
	explicitly	

	* info.jl (info-prompt): don't define prompt-word-regexps,
	they should be okay by default

	* prompt.jl: now does history recall, three history lists by
	default: files, symbols and others. Also some more support
	for default values, stored at history item -1. Alsi fixed M-?
	command, and bound it to M-/ as well

	* summary.jl (summary-unmark-item): new optional arg
	MOVE-AFTER-P; whether or not to move to the next item
	(summary-update-item): don't trash cursor position anymore
	(summary-mark-delete): move to the next item explicitly

	* read-mail.jl (rm-message-count): variable storing the number
	of messages in the folder
	(rm-keymap): fixed `d' and `Ctrl-d' bindings, added `N' and 
	`P' bindings for moving through deleted messages, added `u'
	binding to unmark deleted messages
	(rm-last-folder): stores name of last read folder. Used when
	prompting for folders by read-mail-folder
	(rm-fix-status-info): function to set the minor-mode-names
	list to something describing the status of the current
	message; this isn't always updated when it should be yet
	(rm-summary-keymap): added `N' and `P' bindings, removed `d', 
	`DEL' and `Ctrl-d' bindings; handled by summary.jl

	* send-mail.jl (mail-setup): promoted to be a command. Now
	displays the mail buffer while asking if it's okay to lose its
	contents. Calls the text-mode-hook to enable auto-fill or
	whatever
	* loadkeys.jl (ctrl-x-keymap): bound `x' to mail-setup

	* rcs.jl (rcs-callback-with-description): Made the mode line
	description a lot shorter so that it fits in the window. Also
	invoke text-mode

	* rm-misc.jl (rm-forward): new argument ALL-HEADERS-P, takes
	it value from the raw prefix argument. Controls whether all
	headers or just those that are visible are included. Also now
	leaves the cursor in the ^To: field when no recipients are
	specified

	* read-mail.jl (rm-summary-keymap): calls rm-forward with the
	prefix-arg

	* fill-mode.jl (fill-paragraph): first attempt at this. Not
	particularly robust yet
	* loadkeys.jl (global-keymap): `Meta-q' bound to
	fill-paragraph

	* edit.jl (forward-word): doesn't trash its POS argument
	anymore.

Sat Sep 27 17:19:54 1997  John Harper  <john@dcs.warwick.ac.uk>

	* debug.jl (debug-entry): let print-escape-newlines be t

	* edit.jl (capitalize-word): works more intuitively when COUNT
	is positive now.

Fri Sep 26 15:21:52 1997  John Harper  <john@dcs.warwick.ac.uk>

	* read-mail.jl (rm-auto-next-message, rm-move-after-deleting):
	two new configuration variables
	(rm-next-page, rm-previous-page): commands for paging
	(rm-mark-message-deletion): switches message afterwards

	* read-mail.jl: Added reply, followup and forward commands.
	Removed the rm-always-with-X macros; now includes each command
	in the summary buffer that needs to run in the folder with
	rm-with-folder.
	(rm-in-folder): new macro
	(rm-summary-buffer): don't set mildly-special buffer, instead
	destroy-buffer it manually on exit

	* send-mail.jl (mail-setup): Many fixes. Changed a lot of mail-
 	symbol prefixes to send-mail-.
	Removed mail-buffer-in-use variable, inferred from whether the
	buffer is read-only

	* maildefs.jl (mail-yank-hooks, mail-reply-prefix,
 	mail-fill-column): new variables
	(mail-parse-list): returns the list in the order the items
 	actually occur
	(mail-find-header): can optionally specify the position to start
 	searching
	(mail-get-header): when LISTP is t, will look for multiple headers
 	of the same name
	(mail-insert-list): inserts a list of strings (separated by
 	commas), filled to the mail-fill-column. New lines are indented a
 	la RFC-822
	
	* edit.jl (forward-page,backward-page): don't move the cursor
 	by default; only when optional third arg is non-nil
	(capitalize-word): now has a COUNT arg -- which word to change
	(transpose-lines): new command
	(delete-blank-lines): new command

	* loadkeys.jl (ctrl-x-keymap): "Ctrl-o" bound to
 	delete-blank-lines, "Ctrl-t" bound to transpose-lines
	
Thu Sep 25 11:25:22 1997  John Harper  <john@dcs.warwick.ac.uk>

	* buffers.jl (fix-local-variables): fixed

	* maildefs.jl, read-mail.jl: try to be more intelligent when
	locating files

Wed Sep 24 11:13:28 1997  John Harper  <john@dcs.warwick.ac.uk>

	* maildefs.jl (mail-default-folder, mail-spool-files,
	movemail-program): new configuration variables. Note that
	movemail-program defaults to undefined.
	(mail-find-inboxes): returns a list of possible spool files
	for a particular mail folder

	* read-mail.jl: lots of new features; including the ability to
	read mail from spool files :-)  Lots of other things that were
	needed before the thing is usable.

	* buffers.jl (goto-buffer): new optional argument VIEW,
	defining the view whose buffer should be changed

	* add-log.jl (add-change-log-entry): now surrounds the mail
	address with angled brackets

	* edit.jl (after-kill-hook): called after changing the
 	kill-ring. Used under X11 to install the current-kill as the
 	primary selection
	(yank): won't yank the current selection if it's owned by Jade

Tue Sep 23 10:38:29 1997  John Harper  (john@dcs.warwick.ac.uk)

	* edit.jl (page-regexp, forward-page, backward-page,
	mark-page, restrict-to-page): page handling code. Pages are
	delimited by ^L
	* loadkeys.jl (ctrl-x-keymap): `Ctrl-p' is mark-page,
	`[' is backward-page, ']' is forward-page

	* edit.jl (save-cursor): macro to preserve the current cursor
	position
	* lisp-mode.jl: added indentation hint for save-cursor

	* add-log.jl (change-log-address, change-log-name): removed
	these two variables, they're replaced by user-mail-address and
	(user-full-name) respectively

Mon Sep 22 17:56:06 1997  John Harper  (john@gem.dcs.warwick.ac.uk)

	* loadkeys.jl (ctrl-x-n-keymap): new keymap, hooked to `Ctrl-x
	n'. Three commands "n" restrict to the current block, "w"
	unrestrict, and "p" restrict to a page (unimplemented) 

Mon Sep 22 00:13:43 1997  John Harper  (john@orcrist)

	* read-mail.jl: changed the way summaries are used. Now a
	summary buffer always exists for each mail buffer, but maybe
	not displayed. Also unified some of the summary/mail buffer
	commands

	* maildefs.jl (mail-display-summary): new option; displays a
	summary as soon as a mail buffer is entered

	* compiler.jl: Correctly handles macros defined after they're
	used. The compiler now does two passes through each file it
	compiles --- the first builds the macro environment, the
	second does the actual compilation

Sun Sep 21 00:34:39 1997  John Harper  (john@orcrist)

	* send-mail.jl: new file provides means to send mail messages.
	Currently only via sendmail(8) but hooks allow customisation.

	* maildefs.jl: central definition of all mail configuration
	variables, both for reading and sending, and a few mail
	utility functions. I've tried to keep the configuration
	options as compatible with Emacs as possible.

	* read-mail.jl: moved configuration parameters to maildefs.jl
	Also added a `replied' attribute to the message structure;
	it's set when the message contains a ^Replied: header; how can
	this be made compatible with VM?

	* windows.jl (close-view, close-other-views): make sure that
	the minibuffer view isn't closed

	* edit.jl (save-restriction): new macro, preserves the current
	buffer's restriction
	* lisp-mode.jl: Added indentation hint for save-restriction

Sat Sep 20 00:22:52 1997  John Harper  (john@orcrist)

	* c-mode.jl, lisp-mode.jl: minor changes for new regexp code

	* gdb.jl (gdb-redisplay-frame): doesn't redisplay the frame in
	the current view when it's a buffer running gdb; uses the
	other-view instead

	* read-mail.jl (mail-header-name): this variable is defined in
	both read-mail.jl and send-mail.jl

	* read-mail.jl: a couple of fixes for the new regexp code,
	also fixed the rm-summary-update-current function

Fri Sep 19 00:49:09 1997  John Harper  <john@dcs.warwick.ac.uk>

	* info.jl: a couple of minor fixes for the new regexp code

Wed Sep 17 00:33:16 1997  John Harper  (john@orcrist)

	* read-mail.jl: added support for deleting messages; also now
	handles an empty folder

	* summary.jl: added `execute-start' and `execute-end' function
	vectors that surround the guts of summary-execute.

Tue Sep 16 01:55:37 1997  John Harper  (john@orcrist)

	* summary.jl: removed `n' and `p' keybindings, leave them for
	customisation by the deriving summary modes
	(summary-update, summary-update-item): print the newline
	themselves now.
	* summary.jl: various other stuff

	* read-mail.jl: works a lot better now, the summary buffer
	works properly, tracking the mail buffer..

	* buffer-summary.jl (bs-print-item): doesn't print newline

Sun Sep 14 00:21:53 1997  John Harper  (john@orcrist)

	* windows.jl (other-view): new optional argument LINES, how
	many lines to give a newly created view. Does nothing in the
	case that the other view already exists.

	* buffer-summary.jl (buffer-summary-mode): new function that
	only contains a documentation string, for the mode.

Sat Sep 13 18:25:13 1997  John Harper  (john@orcrist)

	* summary.jl: new file provides a generic menu system.
	Somewhat like the buffer-menu, it can be customised to suit
	whatever is being represented underneath. For example it will
	be able to provide the summary view of the mail reader

	* buffer-summary.jl: new file, replicates what buffer-menu.jl
	does, but using summary.jl for all the complex stuff.

	* read-mail.jl: first go at a basic mail reader. Currently it
	just parsers BSD style mailboxes, doesn't manipulate them at
	all.

Sun Sep  7 16:17:39 1997  John Harper  (john@orcrist)

	* buffers.jl (read-file-into-buffer): now clears the buffer
	before doing anything

	* info.jl: much updated. Now uses the restriction feature,
	which in turn allows compressed files to be read. May also be
	less brain-damaged on Info files without tag tables.

Sat Sep  6 13:34:23 1997  John Harper  (john@orcrist)

	* gdb.jl: Now displays source code in a different view of the
	current window; not a different window

	* rcs.jl (rcs-command): when rereading the buffer try to
	preserve the current cursor position (in a particularly
	non-bullet-proof manner)

	* rcs.jl (rcs-down-history, rcs-up-history): functions (bound
	to Meta-p and Meta-n respectively) used in the RCS callback
	buffer to recall the previously entered descriptions

	* All files are now under RCS control except for autoload.jl

Fri Sep  5 20:22:12 1997  John Harper  (john@orcrist)

	* rcs.jl (rcs-version): fixed version numbers containing zeros
	not being recognized (regexp [1-9] not [0-9]!)

	* rcs-hooks.jl: new file, contains the function installed in
	the open-file-hook to recognize RCS controlled files. This
	loads rcs.jl when the first is found.

	* rcs.jl (rcs-file-p): moved to rcs-hooks.jl

Thu Sep  4 00:13:55 1997  John Harper  (john@orcrist)

	* ring.jl (set-ring-head): was setting the next free position,
	not the previously accessed slot

	* prompt.jl: now displays messages in the status line after
	the title message

Wed Sep  3 20:39:34 1997  John Harper  (john@orcrist)

	* bytecodes.jl, compiler.jl, disassembler.jl: Moved all byte
	code definitions from the compiler to bytecodes.jl. Also many
	of the opcodes have been renamed. op-setq and op-set
	(previously op-vsetc and op-vset) now leave the set value on
	the stack.

Tue Sep  2 23:43:49 1997  John Harper  (john@orcrist)

	* compiler.jl: uses the new bind-{buffer,view,window} opcodes
	when compiling with-{buffer,view,window} special forms.
	Also modified compilation of unwind-protect to use the new
	binding mechanism

	* disassembler.jl: updated for new opcodes

Mon Sep  1 21:54:24 1997  John Harper  (john@orcrist)

	* lisp.jl (if, when, unless): new macros, defined in terms of
	cond.

	* compiler.jl: fine-tuned the comp-compile-cond function; this
	now produces exactly the same code as the specialist if, when
	and unless functions. This is why they're now macros

Sun Aug 31 10:49:45 1997  John Harper  (john@orcrist)

	* buffer-menu.jl: now understands multiple views; defines
	the commands `1', `2', and `o' accordingly. Still displays
	itself in the current view, no matter what that is.

	* compiler.jl (op-viewp, op-swap-view, op-current-view,
	op-swap2): new opcodes. `swap2' makes the top of the stack
	be beneath the next two stack values. `swap-buffer' now
	takes two arguments the buffer and the current view, and
	leaves them both on the stack. This is incompatible with
	old code!
	(comp-top-level-compiled): added `with-view' to the list
	(comp-compile-with-form): meta function to compile
	`with-window' and `with-view'.
	(comp-compile-with-buffer): uses new form of swap-buffer.

	* disassembler.jl (dis-opcode-vector): added new instructions.

	* edit.jl (forward-word, word-start): tries to handle hitting
	the start of the buffer more gracefully.

	* edit.jl (x11-block-status-function): new function, added to
	the `block-status-hook' when in X11. It sets up the current
	block as the current primary selection when necessary.

	* edit.jl (kill-ring, kill-string, killed-string): the new
	variable `kill-ring' is a ring-buffer (see ring.jl) holding
	killed text.
	(yank, yank-rectangle, yank-next): now use the kill-ring; 
	`yank-next' allows the contents of the kill-ring to be cycled
	through (but not with rectangles yet).

	* help.jl (help-setup): switches to the `other-view'

	* info.jl (info-prompt): uses the new minibuffer `prompt'
	instead of `prompt2'

	* init.jl: '(load prompt)' removed; the prompt functions are
	now autoloaded.

	* lisp-mode.jl: added hints for `with-view'

	* loadkeys.jl ("Meta-y"): bound to `yank-next'
	("Ctrl-x 0", "Ctrl-x 1", "Ctrl-x 2", "Ctrl-x o"): now work
	with views
	("Ctrl-x 4 ..."): now works in the `other-view'

	* ring.jl (make-ring, ring-capacity, ring-size, add-to-ring,
	get-from-ring, set-ring-head): New file, provides a ring-
	buffer type.

	* prompt.jl (prompt2): renamed as `prompt' and made to work
	with in the minibuffer view. Completions in a separate view.
	(prompt, prompt-for-directory, prompt-for-buffer,
	prompt-for-symbol, prompt-for-lisp, prompt-for-function,
	prompt-for-variable, prompt-for-command, prompt-for-string,
	prompt-for-number): all autoloaded now

	* prompt.jl (yes-or-no-p, y-or-n-p): moved here from ask.jl,
	both autoloaded anyway so makes no difference.

	* windows.jl (open-view, close-view, close-other-views,
	in-other-view, goto-other-view, other-view, goto-next-view):
	new functions to provide some level of interface to views.
	open and close should be used instead of make and destroy.
        (add-buffer, remove-buffer): now cycles through every view in
	every window, since `buffer-list' is now view-local.

Mon Aug 25 00:42:24 1997  John Harper  (john@orcrist)

	* rcs.jl: New file providing a particularly simple interface
	to RCS. Do (require 'rcs) to install it.

Sun Aug 24 20:43:30 1997  John Harper  (john@orcrist)

	* buffers.jl (read-file-into-buffer): new function, split off
	from open file to handle initialisation when loading a file.
	(revert-buffer): calls read-file-into-buffer

	* edit.jl (toggle-buffer-read-only): new function
	(toggle-read-only-function): new hook

	* buffers.jl (maybe-save-buffer): new function, asks whether or
	not to save a buffer if it contains unsaved modifications.

Sun Jun 25 12:01:01 1995  John Harper  (jsh@orcrist)

	* gzip.jl (gzip-uncompress): Checks if a file exists before
	attempting to expand it -- this allows non-existent files with
	names ending in .gz or .Z to be edited properly.

Tue Mar 21 16:33:04 1995  John Harper  (jsh@orcrist)

	* help.jl (help-prompt-keymap): Got rid of the incorrect
	`Ctrl-i' binding.

Mon Mar 20 19:29:01 1995  John Harper  (jsh@orcrist)

	* text-mode.jl (word-count-area): New function to count the
	number of words in a region of text, bound to `Meta-=' in the
	text-mode-keymap.

Fri Jan 13 18:07:56 1995  John Harper  (jsh@orcrist)

	* info.jl (info-parse-menu-line): Now ignores spaces between
	the name of the node and the `::' in a menu line.

Thu Jan 12 16:19:21 1995  John Harper  (jsh@orcrist)

	* c-mode.jl (c-backslash-area): General fixes.

	* edit.jl (just-spaces): Doesn't miss the space at the
	beginning of a line anymore.

Wed Jan 11 14:42:58 1995  John Harper  (jsh@orcrist)

	* info.jl (info-visit-file): Command to prompt for a file then
	load it into Info.

Thu Jan  5 00:03:37 1995  John Harper  (jsh@orcrist)

	* loadkeys.jl: `Ctrl-x Ctrl-q' is now the key sequence to
	toggle read-only-ness

Mon Jan  2 15:32:32 1995  John Harper  (jsh@orcrist)

	* loadmenus.jl: Changed the ``Print Keymap'' item to call the
	describe-keymap command

Tue Dec 27 15:08:14 1994  John Harper  (jsh@orcrist)

	* xc.jl (xc-indent-pos): Doesn't recognize do_... as a `do while'
	statement anymore.	

Sat Dec 24 15:10:38 1994  John Harper  (jsh@orcrist)

	* c-mode.jl (c-backward-exp): Hopefully I've fixed the infinite
	loop which used to happen when the start of some files was reached.

Wed Dec 21 00:18:28 1994  John Harper  (jsh@orcrist)

	* c-mode.jl (c-backward-exp): Doesn't get confused when it
	finds punctuation in the middle of an expression.

	* buffer-menu.jl: The key table now binds `LMB-Off' to `nop' to
	avoid it getting caught by the unbound-key-hook thing (and
	being really annoying).	

	* edit.jl (nop): New command, does absolutely nothing.

Tue Dec 13 20:56:11 1994  John Harper  (jsh@orcrist)

	* c-mode.jl (c-mode-ctrl-c-keymap): Now this binds `c-backslash-area'
	to `Ctrl-c Ctrl-\' as it should have done before

Sat Nov 26 18:00:55 1994  John Harper  (jsh@orcrist)

	* fill-mode.jl: `RET' is also made to check whether the line
	needs to be broken, as well as `SPC'.

	* xc.jl (xc-indent-pos): Fixed the regexp used to match goto
	labels, it now checks the character after the colon to be
	white space of eol.

Sun Nov 13 19:49:54 1994  John Harper  (jsh@orcrist)

	* compile.jl (compile): unless an argument is given the command is
	*always* prompted for. Whatever the command is that is eventually
	executed is, it's stored in the `compile-command' variable.

	* buffers.jl (revert-buffer): doesn't ask if you want to revert
	to the most recent auto-save; use `recover-file' to do that!

	* xc.jl (xc-indent-pos): now indents `{' properly (I fixed a
	couple of typos -- `exp-ind' for `exp-pos')

Tue Nov  8 09:22:19 1994  John Harper  (jsh@orcrist)

	* lisp.jl (require): this can now be called interactively --
	it prompts for its first argument (the feature symbol).

Mon Nov  7 17:47:43 1994  John Harper  (jsh@orcrist)

	* buffer-menu.jl (bm-list-buffers): now prints the mode name
	properly; i.e. chains through the list of minor mode names,
	printing each in turn.

	* fill-mode.jl (fill-mode-spc): takes account of the glyph
	position of the cursor, not the char position. Also the hack to
	auto indent indented-text-mode buffers properly works even if
	the previous line wasn't indented at all.

Thu Oct 27 23:24:42 1994  John Harper  (jsh@orcrist)

	* asm-mode.jl: removed the `.' command. Also `RET' deletes
	any trailing TAB or SPC characters from the end of the line it
	breaks.

Wed Oct 26 17:51:47 1994  John Harper  (jsh@orcrist)

	* gdb.jl (gdb): changed `kill-all-buffer-variables' to
	`kill-all-local-variables' -- now it works!

Sun Oct 23 20:03:38 1994  John Harper  (jsh@orcrist)

	* compiler.jl: added some warnings

	* compiler.jl (compile-function): New command
	
Fri Oct  7 15:12:56 1994  John Harper  (jsh@orcrist)

	* Version 3.2 released

Wed Oct  5 16:31:39 1994  John Harper  (jsh@orcrist)

	* edit.jl (transpose-items): now this actually does what it
	says it does

Tue Oct  4 00:33:37 1994  John Harper  (jsh@orcrist)

	* buffers.jl (fix-local-variables): new function; scans the
	end of a newly-loaded buffer for Emacs-style local variable
	definitions. Called from `open-file'.

Mon Oct  3 17:59:44 1994  John Harper  (jsh@orcrist)

	* buffers.jl (recover-file): sets the `modified' flag

Sun Oct  2 15:17:26 1994  John Harper  (jsh@orcrist)

	* fill-mode.jl (fill-mode-spc): this now auto-indents the newly
	created line when the major mode is indented-text-mode.

	* xc.jl: many improvements.

	* c-mode.jl (c-forward-exp, c-backward-exp): cpp lines don't
	count as an expression anymore

Sat Oct  1 16:41:42 1994  John Harper  (jsh@orcrist)

	* modes.jl: expression functions now use word syntax if expressions
	aren't defined in the buffer

Wed Sep 21 15:12:26 1994  John Harper  (jsh@orcrist)

	* c-mode.jl (c-forward-exp, c-backward-exp): minor fixups plus
	cpp lines are now recognised

Tue Sep 13 20:55:14 1994  John Harper  (jsh@orcrist)

	* shell.jl: now sets the termcap environment variables correctly

Sat Sep  3 15:23:02 1994  John Harper  (jsh@orcrist)

	* gzip.jl (gzip-insert-file): this hooks into `insert-file-hook'
	so inserted files can be decompressed

	* buffers.jl (insert-file): now calls the hook `insert-file-hook'

	* buffers.jl, gzip.jl: the read-file-hook now has to set the
	modtime of the buffer

Thu Sep  1 20:12:18 1994  John Harper  (jsh@orcrist)

	* ask.jl (y-or-n-p): now resets its values in the proper buffer

Wed Aug 31 20:26:36 1994  John Harper  (jsh@orcrist)

	* buffer-menu.jl (bm-select-buffer): now burys the buffer-menu
	buffer

	* loadkeys.jl, windows.jl (window-closed-hook): since this was
	renamed (from `close-gadget-hook') it's a good time to put it
	in a better place

Tue Aug 30 11:05:09 1994  John Harper  (jsh@orcrist)

	* help.jl (describe-function): now prints a macro's arguments
	properly

Tue Aug 23 17:51:19 1994  John Harper  (jsh@orcrist)

	* disassembler.jl (disassemble-fun): now knows about interactive
	declarations

	* compiler.jl, disassembler.jl (op-logxor-2): new opcode

Thu Aug 18 16:29:30 1994  John Harper  (jsh@orcrist)

	* shell.jl (shell-start-process): the default output stream
	is now `(BUFFER . t)' not `BUFFER'

	* edit.jl (set-variable, show-variable): both removed;
	`set' can be called interactively and `describe-variable'
	can be used to see the value of a variable

Tue Jul 19 16:56:46 1994  John Harper  (jsh@orcrist)

	* lisp.jl (eval-and-print): interactive version of eval

Mon Jul 18 21:45:29 1994  John Harper  (jsh@orcrist)

	* edit.jl (transpose-items): new function to swap items of text
	defined by two functions
	(transpose-words, transpose-chars): commands using the above; bound
	to Meta-t and Ctrl-t respectively
	* modes.jl (transpose-exps): new command, bound to Ctrl-Meta-t

Sun Jul 17 13:04:59 1994  John Harper  (jsh@orcrist)

	* edit.jl (just-one-space): renamed to `just-spaces', now
	takes a COUNT arg; the number of spaces wanted.
	(no-spaces): new command, bound to Meta-\

Sat Jul 16 17:47:57 1994  John Harper  (jsh@orcrist)

	* compiler.jl (compile-file): only selected top-level forms are
	compiled -- those which may(?) benefit from it

Wed Jul 13 18:19:35 1994  John Harper  (jsh@orcrist)

	* compiler.jl: added op-eql

Tue Jul 12 13:06:14 1994  John Harper  (jsh@orcrist)

	* compiler.jl: many more opcodes added.
	* disassembler.jl: synchronised with the above additions

Mon Jul 11 19:50:48 1994  John Harper  (jsh@orcrist)

	* c-mode.jl (c-backward-exp): better method of skipping comments;
	doesn't loop for ever anymore :-)

	* edit.jl: many more commands use the prefix argument now
	(kill-line): can now kill backwards and uses the prefix-arg to
	specify the number of lines to kill

Wed Jul  6 19:45:35 1994  John Harper  (jsh@orcrist)

	* buffers.jl (buffer-list): removed, now in ../src/windows.c

Tue Jul  5 18:19:40 1994  John Harper  (jsh@orcrist)

	* ask.jl (ask-yes-or-no): renamed as `yes-or-no-p'
	(ask-y-or-n): renamed as `y-or-n-p'

Sun Jul  3 15:18:44 1994  John Harper  (jsh@orcrist)

	* debug.jl: now uses a (semi-) proper mode `debug-mode'

	* help.jl (describe-function): now prints the name of the function
	and, if it's not a subr, its argument specification

	* compiler.jl: defconst forms handled (more) properly now

	* All occurrences of `file-length', `file-name', `set-file-name',
	`file-start', `goto-file-start', `file-end' and `goto-file-end'
	have been replaced by their new names (see ../src/ChangeLog for
	more details).

Fri Jul  1 17:52:41 1994  John Harper  (jsh@orcrist)

	* prompt.jl (prompt-file-exclude): under UNIX the `.' and `..'
	directory nodes are ignored

	* info.jl (info-find-node): uses the `inhibit-read-only' variable
	instead of manually calling `set-buffer-read-only' all the
	time.

Thu Jun 30 21:59:20 1994  John Harper  (jsh@orcrist)

	* buffer-menu.jl: new file

Tue Jun 28 15:03:20 1994  John Harper  (jsh@orcrist)

	* help.jl (describe-variable): takes the value of the variable from
	the buffer which was active when this command is called.

	* shell.jl (shell-whole-line): new option; shell-send-line sends the
	*whole* line.

Fri Jun 24 21:46:46 1994  John Harper  (jsh@orcrist)

	* xc.jl: experimental indentation functions for C mode; these
	give much better indentation but are a tad slower...

Thu Jun 23 20:33:41 1994  John Harper  (jsh@orcrist)

	* All packages which define esc keymaps have had them put into
	their main keymaps (with each key Meta-qualified).

Tue Jun 21 22:12:29 1994  John Harper  (jsh@orcrist)

	* prompt.jl: attempts to only record undo information for user edits,
	not completions

Sat Jun 18 18:21:31 1994  John Harper  (jsh@orcrist)

	* texinfo-mode.jl (texinfo-insert-@end): now tries to find
	what is being ended.

	* c-mode.jl (c-forward-exp, c-backward-exp): expression handling

	* modes.jl (mode-indent-function, indent-area): hooks for
	doing indentation
	(mode-forward-exp, mode-backward-exp, forward-exp, backward-exp,
	kill-exp, backward-kill-exp): expression handling

Thu Jun 16 21:22:56 1994  John Harper  (jsh@orcrist)

	* buffers.jl (mildly-special-buffer): controls whether kill-buffer
	will actually nuke a `special' buffer

Wed Jun 15 19:46:55 1994  John Harper  (jsh@orcrist)

	* gdb.jl: interface to gdb; highlights the source of the current
	frame plus some other nice stuff

Mon Jun 13 01:09:09 1994  John Harper  (jsh@orcrist)

	* shell.jl: simple interface to a shell subprocess

	* modes.jl (init-mode): tries -*-X-*- before mode-name

	* gzip.jl: provides editing of gzipped files

Sun Jun 12 02:15:18 1994  John Harper  (jsh@orcrist)

	* buffers.jl (write-file-hook): order of arguments changed (to
	match read-file-hook
	(backup-file): new function

	* loadkeys.jl (user-keymap): keymap hung from `Ctrl-c', intended
	for user bindings

Fri Jun 10 13:58:20 1994  John Harper  (jsh@orcrist)

	* latin-1.jl: This now looks like a minor mode. The function
	`latin-1-mode' toggles the Latin-1 character in *all* buffers.

	* lisp-mode.jl: functions to eval Lisp in a buffer now use sexps
	not paragraphs
	(lisp-forward-sexp, lisp-backward-sexp): now understands #<...>
	style expressions
	(lisp-indent-pos): now notices when there are no previous sexps to
	indent against.

	* keymap.jl (read-event): new function
	(describe-key): interactive command to print the command that is
	bound to an entered key sequence

Thu Jun  9 22:13:27 1994  John Harper  (jsh@orcrist)

	* info.jl: where regexps are made with concat the necessary strings
	are regexp-quote'd

	* keymap.jl (print-keymap): function to print the contents of
	a list of keymaps

Wed Jun  8 20:55:36 1994  John Harper  (jsh@orcrist)

	* help.jl (describe-variable): now works with unbound variables

Tue Jun  7 20:32:18 1994  John Harper  (jsh@orcrist)

	* edit.jl (just-one-space): new command, bound to `ESC SPC'

Mon Jun  6 19:55:58 1994  John Harper  (jsh@orcrist)

	* buffers.jl (write-file): new backup option `else-backup-by-copying'
	when it's unsafe to rename the file it's copied instead

	* add-log.jl (log-in-same-day-p): changed `substr' to `substring'

	* init.jl: uses file-concat to make the .jaderc file's path

	* modes.jl (mode-alist): fixed some case confusion

Sun Jun  5 17:53:59 1994  John Harper  (jsh@orcrist)

	* lisp-mode.jl (lisp-indent-pos): rewritten, now this works properly!

Sat Jun  4 19:29:19 1994  John Harper  (jsh@orcrist)

	* edit.jl (yank-to-mouse): new function, bound to the middle mouse
	button

	* buffers.jl (bury-buffer): new function

Fri Jun  3 20:41:00 1994  John Harper  (jsh@orcrist)

	* edit.jl (kill-string, kill-area, copy-area-as-kill): new functions
	plus some other functions have been rewritten/created to use them
	(yank, yank-rectangle): new functions

	* info.jl (info-read-dir): deletes all lines before the first `file:'
	line

Thu Jun  2 12:29:41 1994  John Harper  (jsh@orcrist)

	* Version 3.1 released

Wed Jun  1 21:04:22 1994  John Harper  (jsh@orcrist)

	* info.jl (info-read-dir): discards the preamble of all supplementary
	dir files

Wed May 25 20:52:31 1994  John Harper  (jsh@orcrist)

	* lisp-mode.jl (lisp-forward-sexp, lisp-backward-sexp): new functions

Tue May 24 21:25:34 1994  John Harper  (jsh@orcrist)

	* disassembler.jl: now uses a lookup table to get the names of
	opcodes.

	* compiler.jl (compile-file): Compiles top-level forms now (except
	for defX and require). Also writes a header to the compiled file.

	* compiler.jl: Changed the names of the conditional jump instructions

Mon May 23 19:16:16 1994  John Harper  (jsh@orcrist)

	* texinfo-mode.jl: TAB inserts spaces now

	* Changed lots of stuff to cope with coordinate origin at (0,0)

	* info.jl (info-locate-file): now tries the lowercase version of
	the filename

Sun May 22 23:20:19 1994  John Harper  (jsh@orcrist)

	* info.jl (info-read-dir): function to read all `dir' files in the
	info-directory-list

Sat May 21 19:57:51 1994  John Harper  (jsh@orcrist)

	* windows.jl (in-new-window, goto-new-window): new

	* modes.jl: support for inserting comments

	* help.jl (describe-mode): works now

	* asm-mode.jl: new file

Thu May 19 21:40:29 1994  John Harper  (jsh@orcrist)

	* fill-mode.jl (fill-mode-spc): deletes the trailing space it leaves.
	(set-fill-column): now uses the glyph position of the cursor.

Sun May 15 23:14:12 1994  John Harper  (jsh@orcrist)

	* compiler.jl (compile-file, compile-directory): now prompt for
	their argument if necessary. Also new instruction `return'.
	
	* replace.jl: new file, user commands for replacing, `replace-all'
	replaces all occurrences of a regexp after the cursor, and
	`query-replace' an Emacs style interactive replace. Both these
	commands work on regexps not strings.

Sat May 14 18:47:31 1994  John Harper  (jsh@orcrist)

	* isearch.jl: new file, provides an Emacs'ish incremental search

Thu May 12 20:42:57 1994  John Harper  (jsh@orcrist)

	* compiler.jl: bytes no longer have their high-bit set -- this
	means bigger arguments are possible. Generates forms which
	call `lisp-code2'.

Wed May 11 00:02:10 1994  John Harper  (jsh@orcrist)

	* find-autoloads.jl: reorganised, also now copies any forms
	after the `;;;###autoload' marker.

Tue May 10 23:28:41 1994  John Harper  (jsh@orcrist)

	* init.jl: `loadkeys.jl' is now loaded before `autoload.jl'

Sun May  8 19:39:00 1994  John Harper  (jsh@orcrist)

	* info.jl: double-clicking the left mouse button selects menu
	items and xrefs.

Sat May  7 13:55:37 1994  John Harper  (jsh@orcrist)

	* latin-1.jl: new file, makes the default glyph-table use Latin1
	character set

Fri May  6 22:25:03 1994  John Harper  (jsh@orcrist)

	* buffers.jl (save-file-as): tried to delete the auto-save'd file
	itself, failed if it didn't exist

Tue May  3 20:48:04 1994  John Harper  (jsh@orcrist)

	* Changed occurrences of `goto' to `goto-char' or `goto-glyph'

Mon May	 2 10:37:04 1994  John Harper  (jsh@orcrist)

	* debug.jl: changed keybindings

	* lisp.jl (format-string): renamed as format-to-string
	(prin1-to-string): new function

Sun May	 1 09:45:16 1994  John Harper  (jsh@orcrist)

	* prompt.jl (prompt-complete-filename): Discards files which match
	the regexp `prompt-file-exclude'

	* info.jl (info-parse-ref): didn't work if the *Note was the last
	thing on the line

	* find-autoloads.jl: new file

	* help.jl: `documentation' and `document-var' functions moved
	here from lisp.jl

	* lisp.jl (require): optional second arg, the file to load the
	feature from

Sat Apr 30 21:40:11 1994  John Harper  (jsh@orcrist)

	* loadsyms.jl: renamed as autoload.jl, more sensible

	* compiler.jl (compile-directory): new arg, EXCLUDE-LIST
	(compile-lisp-lib): takes advantage of the above new arg to
	compile-directory

Fri Apr 29 23:20:58 1994  John Harper  (jsh@orcrist)

	* info.jl (info-parse-menu-line): *another* bug fixed

	* server.jl: code to handle client/server stuff

Fri Apr 29 11:32:56 1994  J.S.Harper  (jsh@raven.ukc.ac.uk)

	* prompt.jl: You can now double click the lmb to select a completion

Thu Apr 28 21:15:30 1994  John Harper  (jsh@orcrist)

	* info.jl (info-parse-menu-line): didn't allow punctuation in
	file names

Thu Apr 28 10:59:05 1994  J.S.Harper  (jsh@raven.ukc.ac.uk)

	* texinfo-mode.jl (texinfo-mode): now calls `text-mode-hook'

	* init.jl: now loads files properly

Thu Apr 28 01:20:58 1994  John Harper  (jsh@orcrist)

	* text-mode.jl (text-mode-indent-tab): this works properly now

Wed Apr 27 22:34:14 1994  John Harper  (jsh@orcrist)

	* edit.jl (overwrite-mode): moved from overwrite-mode.jl

Tue Apr 26 01:04:18 1994  John Harper  (jsh@orcrist)

	* buffers.jl (auto-save-mode): minor-mode interface to toggle
	auto-saving buffers.

	* fill-mode.jl: new minor-mode

Mon Apr 25 20:57:51 1994  John Harper  (jsh@orcrist)

	* overwrite-mode.jl: new minor-mode (the first!)

	* modes.jl (add-minor-mode, remove-minor-mode): support for minor-
	modes.

	* buffers.jl (write-file): remembers the modes of the file and resets
	them after the file has been saved.

Sun Apr 24 11:33:30 1994  John Harper  (jsh@orcrist)

	* edit.jl (capitalize-word): new function, bound to `ESC c'

	* *-mode.jl: new way of working to allow the user to just call the
	mode's function, possibly when a different mode is already in effect.
	Every mode must check for a non-nil `major-mode-kill' when it starts,
	calling this function if necessary.

	* text-mode.jl: new file

	* help.jl (describe-variable): says whether var is buffer-local,
	window-local or global, and whether it's a constant.

	* add-log.jl: fixed problem of null strings not being treated as
	directories. Also added some defvar's to override the stuff that
	gets put into the header.

	* prompt.jl: When prompting for a file now copes with `~' characters

	* disassembler.jl (disassemble): sets `disk-tab' as well as `screen-tab'

	* info.jl (info-read-tags): didn't close the file it opened, this
	is now done in an unwind-protect for safety.

Sat Apr 23 20:06:15 1994  John Harper  (jsh@orcrist)

	* lisp.jl (defvar, defconst): these are now special-forms

	* compiler.jl (comp-compile-file-form): now does macro-expansion
	of top-level forms.

	* info.jl (info-has-tags-p): new var, set when a tag-table is loaded.
	If a file doesn't have a tag-table the whole file is loaded. This is
	mainly so the `dir' file can be edited by hand.
	(info-directory-list): replaces `info-directory', a list of directorys
	to search.
	(info-parse-menu): didn't like punctuation in comments
	(info-goto-link, info-next-link, info-prev-link): for moving around
	menus and refs, bound to RET, TAB and SHIFT-TAB respectively.
	(info-parse-ref): new function to extract the guts of an xref
	(info-follow-ref): no menu yet, just finds the next ref

Wed Apr 20 16:02:51 1994  John Harper  (jsh@orcrist)

	* Version 3.0 released

Mon Apr 18 13:27:55 1994  John Harper  (jsh@deep)

	* c-mode.jl (c-indent-pos-empty): handles opening braces on the same
	line as the keyword now

Sun Apr 17 19:40:05 1994  John Harper  (jsh@orcrist)

	* buffers.jl (write-buffer): now copes better with backup files,
	if `backup-by-copying' is non-nil the file is copied not renamed.
	Else, the file is only renamed if it won't damage anything.

Sat Apr 16 14:04:45 1994  John Harper  (jsh@orcrist)

	* info.jl (info-find-node): Protection against info-file being
	modified while we're viewing it, if this happens it reloads the
	tags table.

	* info.jl (info): Doesn't always show `(dir)' if no NODE-NAME is
	given, uses the currently loaded node if one exists.

	* Added license notices at the beginning of all Lisp files

	* All instances of the string `jed' have been changed to `jade'. I
	decided to change its name since there is at least one other editor
	called jed.

Fri Apr 15 16:14:48 1994  John Harper  (jsh@deep)

	* init.jl: Now sets the status line while initialising. Also
	loads `loadmenus' if necessary.

	* loadmenus.jl: New file, sets up a small menu strip, but only
	on Amigas

Tue Apr 12 14:54:57 1994  John Harper  (jsh@orcrist)

	* lisp.jl (add-command-arg, clear-command-args, command-prompt): new
	functions -- provide a method of giving arguments to commands invoked
	with `ESC x'

	* edit.jl (mark-paragraph): now works properly on a paragraph boundary

	* prompt.jl: Now keeps a list of the buffers it's used so they
	can be recycled.

	* edit.jl: Rewrote word handling, now it works :)

Mon Apr 11 16:12:05 1994  John Harper  (jsh@orcrist)

	* All occurrences of `make-*-variable' changed to `set-*-variable'

	* c-mode.jl, texinfo-mode.jl: Doesn't bother to redefine
	`paragraph-start' anymore.

	* edit.jl (prev-paragraph): Now goes to the start of the current
	paragraph, or start of previous one if already at start.
	(mark-paragraph): Marks line which ends paragraph as well.
	(paragraph-start): Deleted

	* lisp-mode.jl: Got rid of `lisp-interactive-mode' entry point, the
	only difference it had with `lisp-mode' was the name!

Fri Apr	 8 20:22:10 1994  John Harper  (jsh@orcrist)

	* loadsyms.jl: Removed `void-symbol-function'

Tue Apr 05 19:34:24 1994  John Harper  (jsh@deep)

	* buffers.jl: New option `amiga-use-file-req-p' -- makes find-file
	and friends use the ASL file requester

Sun Apr	 3 17:12:21 1994  John Harper  (jsh@orcrist)

	* add-log.jl: Now asks for the directory whose ChangeLog should
	be updated.

Thu Mar 24 09:51:07 1994  John Harper  (jsh@orcrist)

	* compiler.jl (comp-compile-body): Fixed for null lists (it
	wasn't incrementing the stack counter).
	(comp-compile-file-form): Now copes with doc-strings in defvar and
	defconst (ie, they're written to disk if necessary).

Sat Mar 19 03:45:03 1994  John Harper  (jsh@orcrist)

	* info.jl: Braindead support for viewing info files

Sat Mar 12 22:25:36 1994  John Harper  (jsh@orcrist)

	* compile.jl: Renamed `grep' to `grep-buffer'. New function
	`grep' which executes the program grep.
	* compile.jl: Error descriptions are now stored in the error-list
	* compile.jl: Some new options to `start-compile-command'

Mon Mar	 7 21:27:25 1994  John Harper  (jsh@orcrist)

	* compiler.jl: New options `comp-eval-constants-p' and
	`comp-write-docs-p'. New function `compile-lisp-lib'. General
	support for writing doc strings to the file.

Sat Mar	 5 01:21:35 1994  John Harper  (jsh@orcrist)

	* edit.jl: Various upcase/downcase functions to use the stuff
	noted below.

Fri Mar	 4 18:55:38 1994  John Harper  (jsh@orcrist)

	* loadkeys.jl: Lots of changes.

	* compile.jl: Variables to control extraction of error details.
	Also takes note of the directory that the compilation was run in.

	* c-mode.jl: Now handles if (etc) constructs which have a space
	between the keyword and the parenthesised expression.

Sun Feb 27 20:48:56 1994  John Harper  (jsh@orcrist)

	* edit.jl: paragraph handling functions, `next-paragraph',
	`prev-paragraph', `paragraph-start', `mark-paragraph' and variable
	`paragraph-regexp'.

Sat Feb 19 00:45:53 1994  John Harper  (jsh@orcrist)

	* debug.jl: Support for debugging errors and getting
	backtraces.

Sat Feb 12 01:28:01 1994  John Harper  (jsh@orcrist)

	* c-mode.jl: Now handles `do' keyword properly.

Thu Feb 10 03:15:12 1994  John Harper  (jsh@orcrist)

	* c-mode.jl: Now copes with empty lines and preprocessor
	directives. Still fairly braindead though.

Sun Feb	 6 01:25:15 1994  John Harper  (jsh@orcrist)

	* help.jl: No longer uses recursive-edit, just some deft
	keymap manipulation.

Sat Feb	 5 21:36:22 1994  John Harper  (jsh@orcrist)

	* buffers.jl, windows.jl: Made each window have its own
	`buffer-list'. This means some new functions, `add-buffer' and
	`remove-buffer'.
	* windows.jl: `window-list' variable -- list of all open windows.
